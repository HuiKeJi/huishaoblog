<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>appimageåˆ›å»ºdesktopé—®é¢˜è§£å†³</title>
    <link href="/2025/08/31/appimage%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2025/08/31/appimage%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯ç”±äº-desktop-æ–‡ä»¶çš„-StartupWMClass-ä¸åŒ¹é…å¯¼è‡´çš„ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š"><a href="#è¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯ç”±äº-desktop-æ–‡ä»¶çš„-StartupWMClass-ä¸åŒ¹é…å¯¼è‡´çš„ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š" class="headerlink" title="è¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯ç”±äº .desktop æ–‡ä»¶çš„ StartupWMClass ä¸åŒ¹é…å¯¼è‡´çš„ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š"></a>è¿™ä¸ªé—®é¢˜é€šå¸¸æ˜¯ç”±äº .desktop æ–‡ä»¶çš„ StartupWMClass ä¸åŒ¹é…å¯¼è‡´çš„ã€‚å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è§£å†³ï¼š</h1><h2 id="1-ç¡®å®šè½¯ä»¶çš„-WM-CLASS-å€¼"><a href="#1-ç¡®å®šè½¯ä»¶çš„-WM-CLASS-å€¼" class="headerlink" title="1. ç¡®å®šè½¯ä»¶çš„ WM_CLASS å€¼"></a>1. ç¡®å®šè½¯ä»¶çš„ WM_CLASS å€¼</h2><p>AppImage åœ¨è¿è¡Œæ—¶å¯èƒ½ä½¿ç”¨äº†ä¸åŒçš„çª—å£ç±»åç§°ï¼ˆWM_CLASSï¼‰ï¼Œè€Œ .desktop æ–‡ä»¶ä¸­çš„ StartupWMClass éœ€è¦ä¸å…¶åŒ¹é…ï¼Œå¦åˆ™ç³»ç»Ÿä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„åº”ç”¨ã€‚</p><h3 id="æ–¹æ³•-1ï¼šä½¿ç”¨-xprop-è·å–-WM-CLASS"><a href="#æ–¹æ³•-1ï¼šä½¿ç”¨-xprop-è·å–-WM-CLASS" class="headerlink" title="æ–¹æ³• 1ï¼šä½¿ç”¨ xprop è·å– WM_CLASS"></a>æ–¹æ³• 1ï¼šä½¿ç”¨ xprop è·å– WM_CLASS</h3><ol><li>æ‰“å¼€ç»ˆç«¯</li><li>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br><code>xprop | grep WM_CLASS</code></li><li>é¼ æ ‡ç‚¹å‡» AppImage è¿è¡Œçš„çª—å£ï¼Œç»ˆç«¯ä¼šè¿”å›ç±»ä¼¼ä»¥ä¸‹çš„è¾“å‡ºï¼š<br><code>WM_CLASS(STRING) = &quot;real_app_name&quot;, &quot;RealAppClass&quot;</code><br>å…¶ä¸­ï¼Œâ€RealAppClassâ€ æ˜¯ä½ éœ€è¦çš„å€¼ã€‚</li></ol><h3 id="æ–¹æ³•-2ï¼šä½¿ç”¨-wmctrlï¼ˆå¦‚æœ-xprop-æ— æ•ˆï¼‰"><a href="#æ–¹æ³•-2ï¼šä½¿ç”¨-wmctrlï¼ˆå¦‚æœ-xprop-æ— æ•ˆï¼‰" class="headerlink" title="æ–¹æ³• 2ï¼šä½¿ç”¨ wmctrlï¼ˆå¦‚æœ xprop æ— æ•ˆï¼‰"></a>æ–¹æ³• 2ï¼šä½¿ç”¨ wmctrlï¼ˆå¦‚æœ xprop æ— æ•ˆï¼‰</h3><p>å¦‚æœ xprop æ— æ³•è·å–æ­£ç¡®çš„ WM_CLASSï¼Œå¯ä»¥å°è¯•ï¼š</p><p><code>wmctrl -lx</code></p><p>ç„¶åæ‰¾åˆ°ä½ çš„ AppImage è¿è¡Œçª—å£çš„å¯¹åº”è¡Œï¼Œç±»ä¼¼ï¼š</p><p><code>0x04200007  0 real_app_name.RealAppClass  AppImage è½¯ä»¶æ ‡é¢˜</code></p><p>è¿™é‡Œ real_app_name.RealAppClass çš„æœ€åä¸€éƒ¨åˆ†å°±æ˜¯ StartupWMClass éœ€è¦çš„å€¼ã€‚</p><h2 id="2-ä¿®æ”¹-desktop-æ–‡ä»¶"><a href="#2-ä¿®æ”¹-desktop-æ–‡ä»¶" class="headerlink" title="2. ä¿®æ”¹ .desktop æ–‡ä»¶"></a>2. ä¿®æ”¹ .desktop æ–‡ä»¶</h2><ol><li>ç¼–è¾‘ä½ çš„ .desktop æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨ ~&#x2F;usr&#x2F;share&#x2F;applications&#x2F; ç›®å½•ä¸‹ï¼‰ï¼š<br><code>sudo vim /usr/share/applications/your_app.desktop</code></li><li>æ·»åŠ æˆ–ä¿®æ”¹ StartupWMClassï¼Œç¡®ä¿å®ƒåŒ¹é…åˆšåˆšè·å–çš„å€¼ï¼š<br><code>[Desktop Entry]</code><br><code>Version=1.0</code><br><code>Type=Application</code><br><code>Name=Your App</code><br><code>Exec=/path/to/your.appimage</code><br><code>Icon=/path/to/icon.png</code><br><code>StartupWMClass=RealAppClass  # è¿™é‡Œå¡«å†™æ­£ç¡®çš„ WM_CLASS å€¼</code></li></ol><p>è¿™æ ·ï¼ŒAppImage è¿è¡Œæ—¶å°±ä¸ä¼šå†å‡ºç°ä¸¤ä¸ªå›¾æ ‡ï¼Œè€Œæ˜¯æ­£ç¡®åœ°é‡å åˆ°å·²å›ºå®šçš„å›¾æ ‡ä¸Šã€‚</p><p>è¦è®©é€šè¿‡ AppImage å¯åŠ¨çš„ .desktop æ–‡ä»¶å‡ºç°åœ¨ å¼€å§‹èœå•ï¼ˆStart Menuï¼‰å¹¶åˆ†ç±»åˆ«ï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥æ“ä½œï¼ˆé€‚ç”¨äºåŸºäº freedesktop.org çš„æ¡Œé¢ç¯å¢ƒï¼Œæ¯”å¦‚ GNOMEã€KDEã€XFCEã€LXQt ç­‰ï¼‰ï¼š</p><hr><p>âœ… ä¸€ã€æ”¾ç½® .desktop æ–‡ä»¶åˆ°ç³»ç»Ÿæˆ–ç”¨æˆ·ç›®å½•</p><p>ä½ å¯ä»¥å°† .desktop æ–‡ä»¶æ”¾åˆ°ä»¥ä¸‹è·¯å¾„ä¹‹ä¸€ï¼š</p><p>ç³»ç»ŸèŒƒå›´ï¼ˆæ‰€æœ‰ç”¨æˆ·ï¼‰ï¼š</p><p>&#x2F;usr&#x2F;share&#x2F;applications&#x2F;</p><p>å½“å‰ç”¨æˆ·ï¼ˆæ¨èï¼‰ï¼š</p><p>~&#x2F;.local&#x2F;share&#x2F;applications&#x2F;</p><p>å¦‚æœä½ æ˜¯ç”¨ AppImage å¯åŠ¨å™¨ï¼ˆæ¯”å¦‚ AppImageLauncherï¼‰ç”Ÿæˆçš„ï¼Œå®ƒä¸€èˆ¬ä¼šè‡ªåŠ¨æ”¾åˆ° ~&#x2F;.local&#x2F;share&#x2F;applications&#x2F;ã€‚</p><hr><p>âœ… äºŒã€ç¼–è¾‘ .desktop æ–‡ä»¶ï¼Œè®¾ç½®åˆ†ç±»</p><p>.desktop æ–‡ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä½ å¯ä»¥ç”¨ä»»æ„ç¼–è¾‘å™¨æ‰“å¼€ï¼Œä¾‹å¦‚ï¼š</p><p>nano ~&#x2F;.local&#x2F;share&#x2F;applications&#x2F;yourapp.desktop</p><p>å…³é”®å­—æ®µæ˜¯ï¼š</p><p>Categories&#x3D;Utility;</p><p>å°† Categories&#x3D; æ”¹æˆä½ æƒ³è¦å½’ç±»åˆ°çš„åˆ†ç±»ã€‚å¸¸ç”¨åˆ†ç±»æœ‰ï¼š</p><p>åˆ†ç±»åå¯¹åº”å¼€å§‹èœå•ä½ç½®</p><p>Utilityå®ç”¨å·¥å…·<br>AudioVideoå¤šåª’ä½“<br>Developmentå¼€å‘å·¥å…·<br>Educationæ•™è‚²ç±»<br>Gameæ¸¸æˆ<br>Graphicså›¾å½¢ç»˜åˆ¶ã€å›¾åƒå¤„ç†ç­‰<br>Networkç½‘ç»œå·¥å…·<br>OfficeåŠå…¬è½¯ä»¶<br>Settingsè®¾ç½®ï¼ˆç³»ç»Ÿé…ç½®ï¼‰<br>Systemç³»ç»Ÿå·¥å…·</p><p>ä¾‹å¦‚ä¸€ä¸ªå›¾åƒæŸ¥çœ‹å·¥å…·å¯ä»¥è¿™æ ·å†™ï¼š</p><p>[Desktop Entry]<br>Type&#x3D;Application<br>Name&#x3D;MyApp<br>Exec&#x3D;&#x2F;home&#x2F;user&#x2F;Applications&#x2F;MyApp.AppImage<br>Icon&#x3D;myapp<br>Categories&#x3D;Graphics;</p><blockquote><p>æ³¨æ„ Categories&#x3D; å¿…é¡»ä»¥åˆ†å· ; ç»“å°¾ã€‚</p></blockquote><hr><p>âœ… ä¸‰ã€åˆ·æ–°æ¡Œé¢æ•°æ®åº“ï¼ˆéƒ¨åˆ†æ¡Œé¢ç¯å¢ƒéœ€è¦ï¼‰</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ·æ–°å›¾æ ‡&#x2F;èœå•ç¼“å­˜ï¼š</p><p>update-desktop-database ~&#x2F;.local&#x2F;share&#x2F;applications&#x2F;</p><hr><p>âœ… å››ã€å›¾æ ‡æ˜¾ç¤ºé—®é¢˜ï¼ˆå¯é€‰ï¼‰</p><p>Icon&#x3D;myapp åº”è¯¥æ˜¯å›¾æ ‡åï¼ˆä¸å¸¦æ‰©å±•åï¼‰ï¼Œç³»ç»Ÿä¼šåœ¨ &#x2F;usr&#x2F;share&#x2F;icons æˆ– ~&#x2F;.icons ä¸­æŸ¥æ‰¾å¯¹åº”çš„ PNG æˆ– SVG æ–‡ä»¶ã€‚</p><p>æˆ–è€…ä½ å¯ä»¥ç”¨ç»å¯¹è·¯å¾„ï¼š</p><p>Icon&#x3D;&#x2F;home&#x2F;user&#x2F;.icons&#x2F;myapp.png</p><hr><p>âœ… äº”ã€é‡æ–°ç™»å½•æˆ–é‡å¯æ¡Œé¢ç¯å¢ƒ</p><p>æœ‰æ—¶ä½ éœ€è¦æ³¨é”€å†ç™»å½•ï¼Œæˆ–é‡å¯ç³»ç»Ÿï¼Œæ‰èƒ½åœ¨å¼€å§‹èœå•çœ‹åˆ°æ•ˆæœï¼ˆç‰¹åˆ«æ˜¯ KDE Plasmaï¼‰ã€‚</p><hr><p>ğŸ§© è¡¥å……å·¥å…·æ¨è</p><p>å¦‚æœä½ è§‰å¾—æ‰‹åŠ¨ç¼–è¾‘ç¹çï¼Œå¯ä»¥ç”¨è¿™äº›å›¾å½¢åŒ–å·¥å…·ï¼š</p><p>AppImageLauncher â€“ è‡ªåŠ¨ç®¡ç† AppImageã€åˆ›å»º .desktop æ–‡ä»¶ã€‚</p><p>Menulibre â€“ å›¾å½¢åŒ–èœå•ç¼–è¾‘å™¨ï¼Œé€‚åˆ XFCEã€GNOME ç­‰ã€‚</p><p>å®‰è£…ï¼š</p><p>sudo pacman -S menulibre</p><hr><p>å¦‚ä½ æä¾› .desktop æ–‡ä»¶å†…å®¹æˆ–ä½ ä½¿ç”¨çš„æ¡Œé¢ç¯å¢ƒï¼ˆKDE&#x2F;GNOME&#x2F;XFCEâ€¦ï¼‰ï¼Œæˆ‘å¯ä»¥æ›´å…·ä½“åœ°å¸®ä½ åˆ†ç±»ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Conkyæ¡Œé¢å¡ç‰‡</title>
    <link href="/2025/08/30/Conky%E6%A1%8C%E9%9D%A2%E5%8D%A1%E7%89%87/"/>
    <url>/2025/08/30/Conky%E6%A1%8C%E9%9D%A2%E5%8D%A1%E7%89%87/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="conkyä½¿ç”¨"><a href="#conkyä½¿ç”¨" class="headerlink" title="conkyä½¿ç”¨"></a>conkyä½¿ç”¨</h1><h4 id="å®‰è£…conky"><a href="#å®‰è£…conky" class="headerlink" title="å®‰è£…conky"></a>å®‰è£…conky</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S conky<br></code></pre></td></tr></table></figure><h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S mesa-utils brightnessctl <br></code></pre></td></tr></table></figure><h4 id="ç¼–è¾‘ç”¨æˆ·ç›®å½•ä¸‹é…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘ç”¨æˆ·ç›®å½•ä¸‹é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘ç”¨æˆ·ç›®å½•ä¸‹é…ç½®æ–‡ä»¶"></a>ç¼–è¾‘ç”¨æˆ·ç›®å½•ä¸‹é…ç½®æ–‡ä»¶</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> ~/.config/conky/comprehensive.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>åŠ å…¥</p></blockquote><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs smalltalk">conky.config = &#123;<br>    background = <span class="hljs-keyword">true</span>,<br>    update_interval = <span class="hljs-number">1</span>,<br>    total_run_times = <span class="hljs-number">0</span>,<br>    own_window = <span class="hljs-keyword">true</span>,<br>    own_window_type = <span class="hljs-string">&#x27;desktop&#x27;</span>,<br>    own_window_transparent = <span class="hljs-keyword">true</span>,<br>    own_window_argb_visual = <span class="hljs-keyword">true</span>,<br>    own_window_argb_value = <span class="hljs-number">0</span>,<br>    double_buffer = <span class="hljs-keyword">true</span>,<br>    draw_shades = <span class="hljs-keyword">false</span>,<br>    draw_outline = <span class="hljs-keyword">false</span>,<br>    draw_borders = <span class="hljs-keyword">false</span>,<br>    alignment = <span class="hljs-string">&#x27;top_right&#x27;</span>,<br>    gap_x = <span class="hljs-number">30</span>,<br>    gap_y = <span class="hljs-number">60</span>,<br>    minimum_width = <span class="hljs-number">250</span>,<br>    minimum_height = <span class="hljs-number">400</span>,<br>    default_color = <span class="hljs-string">&#x27;white&#x27;</span>,<br>    use_xft = <span class="hljs-keyword">true</span>,<br>    font = <span class="hljs-string">&#x27;Ubuntu Mono:size=12&#x27;</span>,<br>&#125;;<br><br>conky.text = [[<br><span class="hljs-string">$&#123;</span>color cyan&#125;æ—¥æœŸæ—¶é—´ï¼š<span class="hljs-string">$&#123;</span>time %<span class="hljs-type">Y</span>-%m-%d %<span class="hljs-type">H</span>:%<span class="hljs-type">M</span>:%<span class="hljs-type">S</span>&#125;<br><span class="hljs-string">$&#123;</span>color cyan&#125;ä¸»æœºåç§°ï¼š<span class="hljs-string">$&#123;</span>nodename&#125;<br><span class="hljs-string">$&#123;</span>color cyan&#125;ç³»ç»Ÿä¿¡æ¯ï¼š<span class="hljs-string">$&#123;</span>sysname&#125; <span class="hljs-string">$&#123;</span>kernel&#125; on <span class="hljs-string">$&#123;</span>machine&#125;<br><span class="hljs-string">$&#123;</span>color cyan&#125;è¿è¡Œæ—¶é—´ï¼š<span class="hljs-string">$&#123;</span>uptime&#125;<br><span class="hljs-string">$&#123;</span>color cyan&#125;å½“å‰ç”¨æˆ·ï¼š<span class="hljs-string">$&#123;</span>exec whoami&#125;<br><span class="hljs-string">$&#123;</span>color white&#125;------------------------------------------------------------<br><span class="hljs-string">$&#123;</span>color red&#125;<span class="hljs-type">CPU</span>ä½¿ç”¨ç‡ï¼š<span class="hljs-string">$&#123;</span>cpu&#125;%  <span class="hljs-string">$&#123;</span>cpubar <span class="hljs-number">6</span>,<span class="hljs-number">150</span>&#125;<br><span class="hljs-string">$&#123;</span>color red&#125;å†…å­˜ä½¿ç”¨ï¼š<span class="hljs-string">$&#123;</span>mem&#125; / <span class="hljs-string">$&#123;</span>memmax&#125; <span class="hljs-string">$&#123;</span>membar <span class="hljs-number">6</span>,<span class="hljs-number">150</span>&#125;<br><span class="hljs-string">$&#123;</span>color red&#125;äº¤æ¢åˆ†åŒºï¼š<span class="hljs-string">$&#123;</span>swap&#125; / <span class="hljs-string">$&#123;</span>swapmax&#125; <span class="hljs-string">$&#123;</span>swapbar <span class="hljs-number">6</span>,<span class="hljs-number">150</span>&#125;<br><span class="hljs-string">$&#123;</span>color white&#125;------------------------------------------------------------<br><span class="hljs-string">$&#123;</span>color blue&#125;ç¡¬ç›˜ä½¿ç”¨ï¼š<span class="hljs-string">$&#123;</span>fs_used /&#125; / <span class="hljs-string">$&#123;</span>fs_size /&#125; <span class="hljs-string">$&#123;</span>fs_bar <span class="hljs-number">6</span>,<span class="hljs-number">150</span>&#125;<br><span class="hljs-string">$&#123;</span>color blue&#125;å½“å‰æ˜¾å¡ï¼š<span class="hljs-string">$&#123;</span>execi <span class="hljs-number">60</span> glxinfo | grep <span class="hljs-comment">&quot;OpenGL renderer&quot;</span> | cut -d: -f2 | sed <span class="hljs-string">&#x27;s/^[ \t]*//&#x27;</span>&#125;<br><span class="hljs-string">$&#123;</span>color blue&#125;å½“å‰æ¡Œé¢ï¼š<span class="hljs-string">$&#123;</span>exec echo <span class="hljs-string">$X</span>DG_SESSION_TYPE&#125;<br><span class="hljs-string">$&#123;</span>color white&#125;------------------------------------------------------------<br><span class="hljs-string">$&#123;</span>color green&#125;ç½‘ç»œæµé‡ï¼š<br><span class="hljs-string">$&#123;</span>color green&#125;ä¸‹è½½ï¼š<span class="hljs-string">$&#123;</span>downspeed wlo1&#125; kB/s  ä¸Šä¼ ï¼š<span class="hljs-string">$&#123;</span>upspeed wlo1&#125; kB/s<br><span class="hljs-string">$&#123;</span>color green&#125;<span class="hljs-type">IP</span>ï¼š<span class="hljs-string">$&#123;</span>addr wlo1&#125;<br><span class="hljs-string">$&#123;</span>color green&#125;<span class="hljs-type">WiFi</span> çŠ¶æ€<br><span class="hljs-string">$&#123;</span>color green&#125;<span class="hljs-type">SSID</span>: <span class="hljs-string">$&#123;</span>exec nmcli -t -f active,ssid dev wifi | grep <span class="hljs-string">&#x27;^æ˜¯&#x27;</span> | cut -d: -f2&#125;<br><span class="hljs-string">$&#123;</span>color green&#125;ä¿¡å·å¼ºåº¦: <span class="hljs-string">$&#123;</span>exec nmcli -t -f signal dev wifi | sort -nr | head -n <span class="hljs-number">1</span>&#125;%<br><span class="hljs-string">$&#123;</span>color white&#125;------------------------------------------------------------<br><span class="hljs-string">$&#123;</span>color pink&#125;å±å¹•äº®åº¦: <span class="hljs-string">$&#123;</span>exec brightnessctl g | awk <span class="hljs-string">&#x27;&#123;print int($1/100 * 100) &quot;%&quot;&#125;&#x27;</span>&#125;<br><span class="hljs-string">$&#123;</span>color pink&#125;æ¸©åº¦ï¼š<span class="hljs-string">$&#123;</span>execi <span class="hljs-number">10</span> sensors | grep <span class="hljs-string">&#x27;Package id 0:&#x27;</span> | cut -d<span class="hljs-string">&#x27; &#x27;</span> -f5&#125;<br><br># <span class="hljs-string">$&#123;</span>color pink&#125;ç”µæ± çŠ¶æ€ï¼š<span class="hljs-string">$&#123;</span>battery_short <span class="hljs-type">BAT0</span>&#125; <span class="hljs-string">$&#123;</span>battery_bar <span class="hljs-number">6</span>,<span class="hljs-number">150</span> <span class="hljs-type">BAT0</span>&#125;<br><br><span class="hljs-string">$&#123;</span>color pink&#125;å‰©ä½™ç”µé‡ï¼š<span class="hljs-string">$&#123;</span>battery_percent&#125;%<br><span class="hljs-string">$&#123;</span>color pink&#125;çˆ±å°æ—‹çš„ä¸€å¤©ï¼ï¼ï¼<br>]];<br></code></pre></td></tr></table></figure><blockquote><p>[!CAUTION]</p><p>è¿™æ ·å°±å¯ä»¥åœ¨ç³»ç»Ÿå±å¹•ä¸Šæ˜¾ç¤ºå°å¡ç‰‡ä¿¡æ¯ï¼Œè¿˜ä¸èƒ½å¼€æœºè‡ªå¯ï¼Œéœ€è¦æ·»åŠ desktopæ–‡ä»¶</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo vim <span class="hljs-regexp">/etc/</span>xdg<span class="hljs-regexp">/autostart/</span>conky.desktop<br></code></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">vim ï½/.config/<span class="hljs-built_in">auto</span>start/conky.desktop<br></code></pre></td></tr></table></figure><blockquote><p>[!TIP]</p><p>è¿™ä¸¤ä¸ªæ–‡ä»¶è‡ªå¯è·¯å¾„éƒ½å¯ä»¥ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Desktop Entry]</span><br><span class="hljs-attr">Type</span>=Application<br><span class="hljs-attr">Exec</span>=sh -c <span class="hljs-string">&quot;sleep 5 &amp;&amp; conky -c /home/zhh/.config/conky/comprehensive.conf&quot;</span><br><span class="hljs-attr">Hidden</span>=<span class="hljs-literal">false</span><br><span class="hljs-attr">NoDisplay</span>=<span class="hljs-literal">false</span><br><span class="hljs-attr">Name</span>=Conky<br><span class="hljs-attr">Comment</span>=å¯åŠ¨ Conky æ¡Œé¢ç›‘è§†å™¨<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ollama+Dockeré…ç½®</title>
    <link href="/2025/08/18/Ollama%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/"/>
    <url>/2025/08/18/Ollama%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å®‰è£…ollama"><a href="#å®‰è£…ollama" class="headerlink" title="å®‰è£…ollama"></a>å®‰è£…ollama</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S ollama<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>å¦‚éœ€ GPU æ”¯æŒï¼Œæ ¹æ®ä½ çš„æ˜¾å¡ç±»å‹é€‰æ‹©å®‰è£…ï¼š</p><ul><li>NVIDIAï¼šå®‰è£… ollama-cuda</li><li>AMDï¼šå®‰è£… ollama-rocm</li></ul></blockquote><blockquote><p>å¯ç”¨&#x2F;å¯åŠ¨æœåŠ¡</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now ollama.service<br></code></pre></td></tr></table></figure><h3 id="å®‰è£…æ¨¡å‹"><a href="#å®‰è£…æ¨¡å‹" class="headerlink" title="å®‰è£…æ¨¡å‹"></a>å®‰è£…æ¨¡å‹</h3><blockquote><p>[!TIP]</p><p>æ­£å¸¸å®‰è£…æ¨¡å‹æ˜¯ollama run gemma3:270m</p><p>æ¨èæ‰‹åŠ¨å®‰è£…é¿å…ä¸­é€”ç½‘ç»œé—®é¢˜ï¼Œé¦–å…ˆåˆ›å»ºæ¨¡å‹å­˜æ”¾æ–‡ä»¶å¤¹</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir -r <span class="hljs-regexp">/home/</span><span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.ollama/m</span>odels<span class="hljs-regexp">/blobs/</span><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>Aiå¯¹è¯æ¨¡å‹æ¨èåœ¨è¿™é‡Œä¸‹è½½ï¼š<a href="https://huggingface.co/">https://huggingface.co/</a></p><p>åœ¨ç½‘ç«™æœç´¢æ¨¡å‹åç§°å³å¯ï¼Œä¾‹å¦‚ï¼šLLaMAã€Qwenã€Seedç­‰ç­‰</p><p>å°†ä¸‹è½½å¥½çš„ggufåç¼€æ¨¡å‹æ–‡ä»¶é‡å‘½åä¸ºå“ˆå¸Œå€¼</p></blockquote><p>è·å–å“ˆå¸Œå€¼</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">shasum</span> -a <span class="hljs-number">256</span> <span class="hljs-regexp">*.gguf</span><br></code></pre></td></tr></table></figure><p>åˆ›å»ºModelfileæ–‡ä»¶å¤¹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkdir <span class="hljs-regexp">/home/</span><span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.ollama/m</span>odels<span class="hljs-regexp">/Modelfile/</span><br></code></pre></td></tr></table></figure><p>åˆ›å»ºModelfileæ–‡ä»¶</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">vim Modelfile</span><br></code></pre></td></tr></table></figure><p>æ·»åŠ å¦‚ä¸‹ä»£ç </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">FROM <span class="hljs-regexp">/home/</span><span class="hljs-variable">$HOME</span><span class="hljs-regexp">/.ollama/m</span>odels<span class="hljs-regexp">/blobs/</span><span class="hljs-number">33981</span>adf6bae52c503fb5c24f72539010632f7ed290a56c1315a8cd50adca587.gguf<br></code></pre></td></tr></table></figure><p>åˆ›å»ºæ¨¡å‹è¿è¡Œ</p><blockquote><p>[!IMPORTANT]</p><p>Nous-Hermes-2-Mistral-7B-DPO.Q8_0ï¼šæ¨¡å‹åå­—å³å¯</p><p>Modelfileï¼šåˆšåˆšåˆ›å»ºçš„Modelfileæ–‡ä»¶</p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ollama</span> create Nous-Hermes-<span class="hljs-number">2</span>-Mistral-<span class="hljs-number">7</span>B-DPO.Q8_0 -f Modelfile<br></code></pre></td></tr></table></figure><p>è¿è¡ŒollamaæŸ¥çœ‹æ¨¡å‹</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ollama list</span><br></code></pre></td></tr></table></figure><h3 id="Dockerä»å®‰è£…åˆ°ä»£ç†"><a href="#Dockerä»å®‰è£…åˆ°ä»£ç†" class="headerlink" title="Dockerä»å®‰è£…åˆ°ä»£ç†"></a>Dockerä»å®‰è£…åˆ°ä»£ç†</h3><p>å®‰è£…dockeråŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S docker<br></code></pre></td></tr></table></figure><p>å¯ç”¨docker.serviceæœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now docker.service<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨docker.socketå°†ä¼šåœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨Dockeræ—¶å¯åŠ¨ï¼Œä½¿ç”¨åè€…å¯ä»¥å‡å°‘å¼€æœºå¯åŠ¨æ—¶é—´</p><p>å¦‚æœä½ æƒ³ä»¥æ™®é€šç”¨æˆ·èº«ä»½è¿è¡Œdockerçš„è¯ï¼Œæ·»åŠ ä½ è‡ªå·±åˆ°Â dockerÂ ç”¨æˆ·ç»„</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">gpasswd  -<span class="hljs-selector-tag">a</span>  <span class="hljs-selector-attr">[ç”¨æˆ·å]</span>  <span class="hljs-selector-attr">[ç»„å]</span><br></code></pre></td></tr></table></figure><p>å°†ç”¨æˆ·ä»ç»„ä¸­ç§»é™¤</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">gpasswd  -d  <span class="hljs-selector-attr">[ç”¨æˆ·å]</span>  <span class="hljs-selector-attr">[ç»„å]</span><br></code></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart docker.service<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰é…ç½®</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">sudo</span> docker <span class="hljs-literal">info</span><br></code></pre></td></tr></table></figure><h3 id="é…ç½®ä»£ç†"><a href="#é…ç½®ä»£ç†" class="headerlink" title="é…ç½®ä»£ç†"></a>é…ç½®ä»£ç†</h3><p>åœ¨æ‰§è¡Œdocker pullæ—¶ï¼Œæ˜¯ç”±å®ˆæŠ¤è¿›ç¨‹dockerdæ¥æ‰§è¡Œã€‚å› æ­¤ä»£ç†éœ€è¦é…åœ¨dockerdçš„ç¯å¢ƒä¸­ã€‚è€Œè¿™ä¸ªç¯å¢ƒåˆ™æ˜¯å—systemdæ‰€ç®¡æ§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /etc/systemd/system/docker.service.d<br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">sudo <span class="hljs-keyword">vim</span> /etc/systemd/<span class="hljs-built_in">system</span>/docker.service.d/proxy.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>é”®å…¥å¦‚ä¸‹é…ç½®</p><p>HTTP_PROXYæˆ–HTTPS_PROXY åˆ†åˆ«ç”¨äºä»£ç†è®¿é—® socks5è¯·æ±‚ï¼ˆä¹Ÿå¯ä»¥æ˜¯httpæˆ–httpsè¯·æ±‚ï¼Œæ ¹æ®è‡ªå·±ä»£ç†ä¸ºå‡†ï¼‰ï¼Œå¦‚æœæƒ³æŸä¸ª IPæˆ–åŸŸåä¸èµ°ä»£ç†åˆ™é…ç½®åˆ° NO_PROXYä¸­</p><p>socks5:&#x2F;&#x2F;127.0.0.1:1080&#x2F;å¿…é¡»æ˜¯å…å¯†ä»£ç†</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Service]</span><br><span class="hljs-attr">Environment</span>=<span class="hljs-string">&quot;HTTP_PROXY=socks5://127.0.0.1:1080/&quot;</span><br><span class="hljs-attr">Environment</span>=<span class="hljs-string">&quot;HTTPS_PROXY=socks6://127.0.0.1:1080/&quot;</span><br><span class="hljs-attr">Environment</span>=<span class="hljs-string">&quot;NO_PROXY=localhost,.example.com&quot;</span><br></code></pre></td></tr></table></figure><p>æœ€åé‡å¯docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl restart docker.service<br></code></pre></td></tr></table></figure><h3 id="å®‰è£…openwebui"><a href="#å®‰è£…openwebui" class="headerlink" title="å®‰è£…openwebui"></a>å®‰è£…openwebui</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">docker run -d -p <span class="hljs-number">3000</span>:<span class="hljs-number">8080</span> --add-host=host.docker.<span class="hljs-keyword">internal</span>:host-gateway -v <span class="hljs-keyword">open</span>-webui:/app/backend/<span class="hljs-keyword">data</span> --name <span class="hljs-keyword">open</span>-webui --restart always ghcr.io/<span class="hljs-keyword">open</span>-webui/<span class="hljs-keyword">open</span>-webui:main<br></code></pre></td></tr></table></figure><h3 id="Open-WebUI-è®¾ç½®"><a href="#Open-WebUI-è®¾ç½®" class="headerlink" title="Open WebUI è®¾ç½®"></a>Open WebUI è®¾ç½®</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs 1c">OpenAI API ç®¡ç†<br>OpenAI APIè¿æ¥ https<span class="hljs-punctuation">:</span><span class="hljs-comment">//api.openai.com/v1</span><br>Ollama API ç®¡ç†<br>Ollama APIè¿æ¥ http<span class="hljs-punctuation">:</span><span class="hljs-comment">//host.docker.internal:11434</span><br><br>æœ€åæµè§ˆå™¨æ‰“å¼€http<span class="hljs-punctuation">:</span><span class="hljs-comment">//localhost:3000</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Sambaå…±äº«æ–‡ä»¶</title>
    <link href="/2025/08/13/Samba%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/"/>
    <url>/2025/08/13/Samba%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åœ¨-Arch-Linux-ä¸Šå®‰è£…å¹¶é…ç½®-Samba-å…±äº«æ–‡ä»¶å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š"><a href="#åœ¨-Arch-Linux-ä¸Šå®‰è£…å¹¶é…ç½®-Samba-å…±äº«æ–‡ä»¶å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š" class="headerlink" title="åœ¨ Arch Linux ä¸Šå®‰è£…å¹¶é…ç½® Samba å…±äº«æ–‡ä»¶å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š"></a>åœ¨ Arch Linux ä¸Šå®‰è£…å¹¶é…ç½® Samba å…±äº«æ–‡ä»¶å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</h1><h2 id="æ­¥éª¤-1-å®‰è£…-Samba"><a href="#æ­¥éª¤-1-å®‰è£…-Samba" class="headerlink" title="æ­¥éª¤ 1: å®‰è£… Samba"></a>æ­¥éª¤ 1: å®‰è£… Samba</h2><p>ä½¿ç”¨ pacman å®‰è£… Sambaï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S samba avahi <br></code></pre></td></tr></table></figure><p>å®‰è£… avahiè½¯ä»¶åŒ…ï¼Œ ç„¶åå¯ç”¨&#x2F;å¯åŠ¨ avahi-daemon.service é€šè¿‡ Zeroconf ä½¿ Samba æœåŠ¡å™¨å¯è¢«å‘ç°</p><h2 id="æ­¥éª¤-2-é…ç½®-Samba"><a href="#æ­¥éª¤-2-é…ç½®-Samba" class="headerlink" title="æ­¥éª¤ 2: é…ç½® Samba"></a>æ­¥éª¤ 2: é…ç½® Samba</h2><ol><li><p>ç¼–è¾‘ Samba é…ç½®æ–‡ä»¶ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/samba/smb.conf<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p><strong>pathæ ¹æ®è‡ªå·±å…±äº«è·¯å¾„</strong></p></blockquote><pre><code class="hljs"># å…¨å±€è®¾ç½®åŒºåŸŸ[global]# è®¾ç½®å·¥ä½œç»„åç§°ï¼ŒWindows é»˜è®¤æ˜¯ WORKGROUPï¼Œä¿æŒä¸€è‡´å¯é¿å…å…¼å®¹é—®é¢˜workgroup = WORKGROUP# è®¾ç½® Samba æœåŠ¡å™¨çš„æè¿°ä¿¡æ¯server string = Arch Samba Server# è®¾ç½®ä¸»æœºåœ¨ç½‘ç»œä¸Šçš„ NetBIOS åç§°ï¼ˆå³ç½‘ç»œè¯†åˆ«åï¼‰netbios name = archserver# è®¤è¯æ–¹å¼è®¾ä¸º &quot;user&quot;ï¼Œè¡¨ç¤ºç”¨æˆ·çº§åˆ«çš„è®¿é—®æ§åˆ¶ï¼ˆæ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç«‹è´¦å·ï¼‰security = user# å¦‚æœè¾“å…¥çš„ç”¨æˆ·åæ— æ•ˆï¼Œåˆ™å°†å…¶æ˜ å°„ä¸º guest ç”¨æˆ·ï¼ˆåŒ¿åè®¿é—®ï¼‰map to guest = Bad User# ç¬¬ä¸€ä¸ªå…±äº«ç›®å½•è®¾ç½® â€”â€” Tools[tools]# è®¾ç½®å…±äº«ç›®å½•çš„å®é™…è·¯å¾„path = /run/media/Tools/# å…è®¸è¢«æµè§ˆï¼Œå³ç”¨æˆ·å¯ä»¥åœ¨èµ„æºç®¡ç†å™¨ä¸­çœ‹åˆ°è¿™ä¸ªå…±äº«browseable = yes# å…è®¸å†™å…¥æƒé™ï¼ˆä¸è®¾ç½®çš„è¯é»˜è®¤åªè¯»ï¼‰writable = yes# å…è®¸ guestï¼ˆåŒ¿åï¼‰ç”¨æˆ·è®¿é—®guest ok = yes# ä¸åªè¯»ï¼ˆä¸ writable ä¸€èµ·ä½¿ç”¨ï¼‰read only = no# åˆ›å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™ï¼ˆå…«è¿›åˆ¶ 0777 è¡¨ç¤ºæ‰€æœ‰äººå¯è¯»å†™æ‰§è¡Œï¼‰create mask = 0777# åˆ›å»ºç›®å½•çš„é»˜è®¤æƒé™ï¼ˆåŒä¸Šï¼‰directory mask = 0777# ç¬¬äºŒä¸ªå…±äº«ç›®å½•è®¾ç½® â€”â€” Public[public]# è®¾ç½®å…±äº«ç›®å½•çš„å®é™…è·¯å¾„path = /home/Public# å…è®¸æµè§ˆè¯¥å…±äº«browseable = yes# å…è®¸å†™å…¥writable = yes# å…è®¸ guestï¼ˆåŒ¿åï¼‰è®¿é—®guest ok = yes# è®¾ç½®ä¸ºéåªè¯»read only = no# åˆ›å»ºæ–‡ä»¶çš„æƒé™create mask = 0777# åˆ›å»ºç›®å½•çš„æƒé™directory mask = 0777</code></pre></li></ol><h2 id="æ­¥éª¤-3-åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼ˆå¯è·³è¿‡ï¼‰"><a href="#æ­¥éª¤-3-åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼ˆå¯è·³è¿‡ï¼‰" class="headerlink" title="æ­¥éª¤ 3: åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼ˆå¯è·³è¿‡ï¼‰"></a>æ­¥éª¤ 3: åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼ˆå¯è·³è¿‡ï¼‰</h2><p>ç¡®ä¿å…±äº«ç›®å½•å­˜åœ¨ï¼Œå¹¶è®¾ç½®æ­£ç¡®çš„æƒé™ï¼š<br><code>sudo mkdir -p /path/to/shared/directory</code><br><code>sudo chmod -R 777 /path/to/shared/directory</code><br>å¦‚æœåªå…è®¸ç‰¹å®šç”¨æˆ·è®¿é—®ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼è®¾ç½®æƒé™ï¼š<br><code>sudo chown -R username:username /path/to/shared/directory</code></p><h2 id="æ­¥éª¤-4-è®¾ç½®-Samba-ç”¨æˆ·"><a href="#æ­¥éª¤-4-è®¾ç½®-Samba-ç”¨æˆ·" class="headerlink" title="æ­¥éª¤ 4: è®¾ç½® Samba ç”¨æˆ·"></a>æ­¥éª¤ 4: è®¾ç½® Samba ç”¨æˆ·</h2><p>ä¸º Samba æ·»åŠ ç”¨æˆ·ï¼ˆå¦‚æœéœ€è¦å¯†ç è®¿é—®ï¼‰ï¼š<br><code>sudo smbpasswd -a username</code></p><h2 id="æ­¥éª¤-5-å¯ç”¨å¹¶å¯åŠ¨-Samba-æœåŠ¡"><a href="#æ­¥éª¤-5-å¯ç”¨å¹¶å¯åŠ¨-Samba-æœåŠ¡" class="headerlink" title="æ­¥éª¤ 5: å¯ç”¨å¹¶å¯åŠ¨ Samba æœåŠ¡"></a>æ­¥éª¤ 5: å¯ç”¨å¹¶å¯åŠ¨ Samba æœåŠ¡</h2><p>å¯åŠ¨å’Œå¯ç”¨ Samba æœåŠ¡ï¼š<br><code>sudo systemctl start smb nmb</code><br><code>sudo systemctl enable smb nmb</code></p><h1 id="æ­¥éª¤-6-é˜²ç«å¢™è®¾ç½®ï¼ˆå¯é€‰ï¼‰"><a href="#æ­¥éª¤-6-é˜²ç«å¢™è®¾ç½®ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="æ­¥éª¤ 6: é˜²ç«å¢™è®¾ç½®ï¼ˆå¯é€‰ï¼‰"></a>æ­¥éª¤ 6: é˜²ç«å¢™è®¾ç½®ï¼ˆå¯é€‰ï¼‰</h1><p>å¦‚æœå¯ç”¨äº†é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾ç›¸å…³ç«¯å£ï¼š<br><code>sudo iptables -A INPUT -p tcp --dport 139 -j ACCEPT</code><br><code>sudo iptables -A INPUT -p tcp --dport 445 -j ACCEPT</code><br><code>sudo iptables -A INPUT -p udp --dport 137 -j ACCEPT</code><br><code>sudo iptables -A INPUT -p udp --dport 138 -j ACCEPT</code><br>æˆ–è€…ä½¿ç”¨ ufwï¼š<br><code>sudo ufw allow Samba</code></p><h1 id="æ­¥éª¤-7-æµ‹è¯•å…±äº«"><a href="#æ­¥éª¤-7-æµ‹è¯•å…±äº«" class="headerlink" title="æ­¥éª¤ 7: æµ‹è¯•å…±äº«"></a>æ­¥éª¤ 7: æµ‹è¯•å…±äº«</h1><ol><li>åœ¨ Windows æˆ–å…¶ä»–è®¾å¤‡ä¸Šæ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨ã€‚</li><li>è¾“å…¥åœ°å€ï¼Œä¾‹å¦‚ \archserver æˆ– \&lt;æœåŠ¡å™¨IPåœ°å€&gt;ã€‚</li><li>è®¿é—®å…±äº«ç›®å½•ã€‚<br>å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹ Samba æ—¥å¿—æ¥æ’æŸ¥é”™è¯¯ï¼š<br><code>sudo journalctl -u smb</code><br><code>sudo journalctl -u nmb</code></li></ol>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå®‰è£…å¼•å¯¼</title>
    <link href="/2025/08/11/arch%E5%BC%95%E5%AF%BC%E8%AE%BE%E7%BD%AE/"/>
    <url>/2025/08/11/arch%E5%BC%95%E5%AF%BC%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å®‰è£…grubã€efibootefi"><a href="#å®‰è£…grubã€efibootefi" class="headerlink" title="å®‰è£…grubã€efibootefi"></a>å®‰è£…grubã€efibootefi</h3><blockquote><p>[!NOTE]</p><p>è¿™é‡Œåœ¨å®‰è£…ç³»ç»Ÿæ—¶å·²ç»å®‰è£…</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S grub efibootefi<br></code></pre></td></tr></table></figure><blockquote><p>[!CAUTION]</p><ul><li><p>ç¡®ä¿ä½ å®‰è£… GRUB è½¯ä»¶åŒ…å’Œè¿è¡Œå‘½ä»¤çš„ç³»ç»Ÿæ˜¯ä½ æƒ³ç”¨ GRUB å¼•å¯¼çš„ç³»ç»Ÿã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ æ˜¯é€šè¿‡å®‰è£…ä»‹è´¨å¼•å¯¼çš„ï¼Œä½ éœ€è¦åœ¨ chroot ä¹‹åå†è¿è¡Œ <code>grub-install</code>ã€‚å¦‚æœå› ä¸ºæŸäº›åŸå› ä¸å¾—ä¸åœ¨å®‰è£…çš„ç³»ç»Ÿä¹‹å¤–è¿è¡Œ <code>grub-install</code>ï¼Œåœ¨åé¢åŠ ä¸Š <code>--boot-directory=</code> é€‰é¡¹æ¥æŒ‡å®šæŒ‚è½½ <code>/boot</code> ç›®å½•çš„è·¯å¾„ï¼Œä¾‹å¦‚ <code>--boot-directory=/mnt/boot</code>ã€‚</p></li><li><p>æŸäº›ä¸»æ¿æ— æ³•å¤„ç†åŒ…å«ç©ºæ ¼çš„ <code>bootloader-id</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=esp <span class="hljs-attribute">--bootloader-id</span>=GRUB<br></code></pre></td></tr></table></figure></li></ul></blockquote><h4 id="æœ€åç”Ÿæˆ-grub-cfg"><a href="#æœ€åç”Ÿæˆ-grub-cfg" class="headerlink" title="æœ€åç”Ÿæˆ grub.cfg"></a>æœ€åç”Ÿæˆ grub.cfg</h4><blockquote><p>[!NOTE]</p><p>é»˜è®¤çš„æ–‡ä»¶è·¯å¾„æ˜¯ <code>/boot/grub/grub.cfg</code></p><p>ä½¿ç”¨ grub-mkconfig å·¥å…·æ¥ç”Ÿæˆ</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure><h4 id="ä»¥ä¸Šæ˜¯æ­£å¸¸å®‰è£…grubå¿…å¤‡çš„å†…å®¹ï¼Œå¯ä»¥è·³è¿‡ä¸éœ€è¦"><a href="#ä»¥ä¸Šæ˜¯æ­£å¸¸å®‰è£…grubå¿…å¤‡çš„å†…å®¹ï¼Œå¯ä»¥è·³è¿‡ä¸éœ€è¦" class="headerlink" title="ä»¥ä¸Šæ˜¯æ­£å¸¸å®‰è£…grubå¿…å¤‡çš„å†…å®¹ï¼Œå¯ä»¥è·³è¿‡ä¸éœ€è¦"></a>ä»¥ä¸Šæ˜¯æ­£å¸¸å®‰è£…grubå¿…å¤‡çš„å†…å®¹ï¼Œå¯ä»¥è·³è¿‡ä¸éœ€è¦</h4><blockquote><p>[!IMPORTANT]</p><p>ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ï¼Œå¹¶åŠ å…¥ä»£ç å—å†…å®¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/grub.d/40_custom<br></code></pre></td></tr></table></figure></blockquote><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs perl"><span class="hljs-comment">#!/bin/sh</span><br><span class="hljs-keyword">exec</span> tail -n +<span class="hljs-number">3</span> <span class="hljs-variable">$0</span><br><br><span class="hljs-comment"># This file provides an easy way to add custom menu entries.  Simply type the</span><br><br><span class="hljs-comment"># menu entries you want to add after this comment.  Be careful not to change</span><br><br><span class="hljs-comment"># the &#x27;exec tail&#x27; line above.</span><br><br>menuentry <span class="hljs-string">&quot;Windows 11&quot;</span> --<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">windows</span> --<span class="hljs-title">class</span> <span class="hljs-title">os</span> </span>&#123;<br>    insmod part_gpt<br>    insmod fat<br>    insmod chain<br>    search --<span class="hljs-keyword">no</span>-floppy --set=root --fs-uuid F69C-7E34<br>    chainloader /EFI/Microsoft/Boot/bootmgfw.efi<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æœ€åç”Ÿæˆ-grub-cfg-1"><a href="#æœ€åç”Ÿæˆ-grub-cfg-1" class="headerlink" title="æœ€åç”Ÿæˆ grub.cfg"></a>æœ€åç”Ÿæˆ grub.cfg</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxé…ç½®PATHçš„å‡ ç§ä¾‹å­</title>
    <link href="/2025/08/10/arch%E7%9A%84PATH%E8%AE%BE%E7%BD%AE/"/>
    <url>/2025/08/10/arch%E7%9A%84PATH%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é¦–å…ˆéœ€è¦æœ‰ä»£ç†çš„æ¡ä»¶ï¼Œä¾‹å¦‚trojanã€v2rayã€shadowsocksã€WireGuardç­‰ç­‰</p><p>å…¶æ¬¡æ˜¯è¿›è¡Œshellä»£ç†ï¼Œå…¶å®å¯ä»¥ä½¿ç”¨shellä¸“ç”¨ä»£ç†å·¥å…·ï¼Œä¾‹å¦‚ï¼šproxychainsã€tsocksã€redsocksç­‰ç­‰ï¼Œè¿™é‡Œæˆ‘ä»¬å°±è®²è¿°shellæ–¹å¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.bashrc<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">http_proxy</span>=<span class="hljs-string">&quot;socks5://127.0.0.1:1089&quot;</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">https_proxy</span>=<span class="hljs-string">&quot;socks5://127.0.0.1:1089&quot;</span><br><span class="hljs-built_in">export</span> <span class="hljs-attribute">all_proxy</span>=<span class="hljs-string">&quot;socks5://127.0.0.1:1089&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><p>shellä»£ç†å°±ç”Ÿæ•ˆäº†ï¼Œä¸ç®¡æ˜¯yayã€pacmanã€aptã€yumç­‰éƒ½æ˜¯èµ°127.0.0.1:1089ç½‘ç»œæ•°æ®</p><h3 id="pipæŠ¥é”™"><a href="#pipæŠ¥é”™" class="headerlink" title="pipæŠ¥é”™"></a>pipæŠ¥é”™</h3><p>åœ¨ä½¿ç”¨<strong>pip</strong>è¿‡ç¨‹ä¸­ï¼Œä¼šæç¤ºä»¥ä¸‹æç¤ºï¼Œè¯´æ˜<strong>pip</strong>ä¸æ”¯æŒ<strong>~&#x2F;.bashrc</strong>è¿™ç§ä»£ç†</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs subunit">$ pip install pipenv <br><span class="hljs-keyword">ERROR: </span>Could not install packages due to an OSError: Missing dependencies for SOCKS support. <br><br>**[**notice**]** A new release of pip available: 22.3 -&gt; 25.1.1 <br>**[**notice**]** To update, run: pip3 install --upgrade pip<br></code></pre></td></tr></table></figure><p>éœ€æ³¨é‡Šä¸Šé¢çš„ä»£ç†ï¼Œå¹¶ç”¨<strong>pip</strong>å®‰è£…ä¸€ä¸ªè½¯ä»¶åŒ…ï¼š<strong>PySocks</strong>ï¼Œå…ˆä½¿ç”¨<strong>proxychains</strong>ç­‰å·¥å…·çš„ä»£ç†æ–¹å¼è§£å†³ï¼Œå¦‚ä¸‹</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">proxychains pip <span class="hljs-keyword">install</span> PySocks<br></code></pre></td></tr></table></figure><blockquote><p><strong>PySocks</strong>è§£å†³ç¼ºå°‘ <strong>SOCKS</strong> æ”¯æŒçš„é—®é¢˜</p><p>ç°åœ¨å¯ä»¥æ¢å¤<strong>~&#x2F;.bashrc</strong>ä¸­è®¾ç½®çš„ä»£ç†ä¿¡æ¯ï¼Œæ­£å¸¸<strong>pip install PySocks</strong>å³å¯</p></blockquote><h3 id="PATHè®¾ç½®"><a href="#PATHè®¾ç½®" class="headerlink" title="PATHè®¾ç½®"></a>PATHè®¾ç½®</h3><p>æ·»åŠ å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯å…¨å±€ä½¿ç”¨<strong>hexo cleanã€hexo serverã€hexo generate</strong>ç­‰ç­‰å‘½ä»¤</p><blockquote><p>[!IMPORTANT]</p><p><strong>PATH&#x3D;åé¢ä»¥è‡ªå·±è·¯å¾„ä¸ºä¸»</strong></p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$HOME</span>/src/myblog/node_modules/hexo/bin:$PATH<br></code></pre></td></tr></table></figure><p>scrcpyå®‰å“æ§åˆ¶</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=/opt/hsprogram/broker/scrcpy-linux-x86_64-v3.3.1:$PATH<br></code></pre></td></tr></table></figure><p>7zè§£å‹ç¼©</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=/opt/hsprogram/binary/7z:$PATH<br></code></pre></td></tr></table></figure><p>ä¸åŒç‰ˆæœ¬çš„python</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$HOME</span>/src/python311/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$HOME</span>/src/python310/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NTFSè‡ªåŠ¨æŒ‚è½½</title>
    <link href="/2025/08/09/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDNTFS%E7%A1%AC%E7%9B%98/"/>
    <url>/2025/08/09/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BDNTFS%E7%A1%AC%E7%9B%98/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è‡ªåŠ¨æŒ‚è½½"><a href="#è‡ªåŠ¨æŒ‚è½½" class="headerlink" title="è‡ªåŠ¨æŒ‚è½½"></a>è‡ªåŠ¨æŒ‚è½½</h1><ul><li>æŸ¥çœ‹åˆ†åŒºä¿¡æ¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> fdisk -l<br></code></pre></td></tr></table></figure><ul><li>è¯»å–UUIDç </li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> blkid /dev/nvme0n1p6<br></code></pre></td></tr></table></figure><ul><li>ç¼–è¾‘fstabåŠ å…¥UUIDä¿¡æ¯</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/fstab<br></code></pre></td></tr></table></figure><ul><li>é”®å…¥&#x2F;dev&#x2F;nvme0n1p6</li></ul><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">UUID</span>=<span class="hljs-number">23423423242</span>/run/media/win11toolsntfs-<span class="hljs-number">3</span>gdefaults<span class="hljs-number">0</span><span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>win11toolsè‡ªå®šä¹‰åˆ›å»ºå³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /run/media/win11tools<br></code></pre></td></tr></table></figure><p>ntfs-3gæ˜¯æŒ‚è½½çš„ntfsç¡¬ç›˜</p><p>æœ€åé‡å¯å³å¯</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>NVIDIAæ—©å¯åŠ¨</title>
    <link href="/2025/08/08/%E6%97%A9%E5%90%AF%E5%8A%A8/"/>
    <url>/2025/08/08/%E6%97%A9%E5%90%AF%E5%8A%A8/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ—©å¯åŠ¨ï¼ˆè§£å†³NVIDIAåœ¨waylandé—®é¢˜ï¼‰"><a href="#æ—©å¯åŠ¨ï¼ˆè§£å†³NVIDIAåœ¨waylandé—®é¢˜ï¼‰" class="headerlink" title="æ—©å¯åŠ¨ï¼ˆè§£å†³NVIDIAåœ¨waylandé—®é¢˜ï¼‰"></a>æ—©å¯åŠ¨ï¼ˆè§£å†³NVIDIAåœ¨waylandé—®é¢˜ï¼‰</h2><p>å¯¹äºåŸºæœ¬åŠŸèƒ½ï¼Œåªéœ€æ·»åŠ å†…æ ¸å‚æ•°å°±è¶³å¤Ÿäº†ã€‚å¦‚æœæ‚¨å¸Œæœ›ç¡®ä¿é©±åŠ¨èƒ½è¢«æœ€æ—©åŠ è½½ï¼Œæˆ–è€…é‡åˆ°äº†å¯åŠ¨é—®é¢˜ï¼ˆä¾‹å¦‚ nvidia å†…æ ¸æ¨¡å—åœ¨æ˜¾ç¤ºç®¡ç†å™¨å¯åŠ¨åæ‰è¢«åŠ è½½ï¼‰ï¼Œå¯ä»¥å°† nvidiaã€nvidia_modesetã€nvidia_uvm å’Œ nvidia_drm æ·»åŠ åˆ° initramfs ä¸­ã€‚è¯·å‚é˜…å†…æ ¸æ¨¡å—#æ—©æœŸæ¨¡å—åŠ è½½ä»¥äº†è§£å¦‚ä½•é…ç½®æ‚¨çš„ initramfs ç”Ÿæˆå™¨ã€‚mkinitcpioç”¨æˆ·å¯èƒ½è¿˜éœ€è¦åœ¨æ¯æ¬¡nvidiaåŒ…é©±åŠ¨ç¨‹åºæ›´æ–°æ—¶é‡æ–°ç”Ÿæˆ initramfsæ˜ åƒ</p><h4 id="ç¼–è¾‘mkinitcpioé…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘mkinitcpioé…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘mkinitcpioé…ç½®æ–‡ä»¶"></a>ç¼–è¾‘mkinitcpioé…ç½®æ–‡ä»¶</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/mkinitcpio.conf<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>MODULES æ·»åŠ æ¨¡å—</p></blockquote><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">MODULES=(nvidia nvidi<span class="hljs-built_in">a_modeset</span> nvidi<span class="hljs-built_in">a_uvm</span> nvidi<span class="hljs-built_in">a_drm</span>)<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ å°†é©±åŠ¨æ·»åŠ åˆ°äº†initramfsä¸­ï¼Œè®°å¾—æ¯æ¬¡æ›´æ–°nvidiaåŒ…é©±åŠ¨ç¨‹åºåéƒ½è¦è¿è¡Œmkinitcpio</p><h4 id="Pacman-é’©å­"><a href="#Pacman-é’©å­" class="headerlink" title="Pacman é’©å­"></a>Pacman é’©å­</h4><p>ä¸ºäº†é¿å…æ›´æ–°NVIDIAé©±åŠ¨ä¹‹åå¿˜äº†æ›´æ–°initramfsï¼Œä½ å¯ä»¥ä½¿ç”¨Pacman Hooksï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs routeros">/etc/pacman.d/hooks/nvidia.hook<br>[Trigger]<br><span class="hljs-attribute">Operation</span>=Install<br><span class="hljs-attribute">Operation</span>=Upgrade<br><span class="hljs-attribute">Operation</span>=Remove<br><span class="hljs-attribute">Type</span>=Package<br><span class="hljs-attribute">Target</span>=nvidia<br><span class="hljs-attribute">Target</span>=linux<br><span class="hljs-comment"># Change the linux part above and in the Exec line if a different kernel is used</span><br><span class="hljs-comment"># å¦‚æœä½¿ç”¨ä¸åŒçš„å†…æ ¸ï¼Œè¯·æ›´æ”¹ä¸Šé¢çš„ linux éƒ¨åˆ†å’Œ Exec è¡Œä¸­çš„å†…å®¹ï¼Œä¾‹å¦‚æ›´æ”¹ä¸ºTarget=nvidia-open</span><br><br>[Action]<br><span class="hljs-attribute">Description</span>=Updating Nvidia module <span class="hljs-keyword">in</span> initcpio<br><span class="hljs-attribute">Depends</span>=mkinitcpio<br><span class="hljs-attribute">When</span>=PostTransaction<br>NeedsTargets<br><span class="hljs-attribute">Exec</span>=/bin/sh -c <span class="hljs-string">&#x27;while read -r trg; do case $trg in linux) exit 0; esac; done; /usr/bin/mkinitcpio -P&#x27;</span><br></code></pre></td></tr></table></figure><p>åŠ¡å¿…ä¿è¯Targeté¡¹æ‰€è®¾ç½®çš„è½¯ä»¶åŒ…ä¸ä½ åœ¨å‰é¢çš„å®‰è£…è¿‡ç¨‹ä¸­æ‰€ä½¿ç”¨çš„ç›¸ç¬¦ï¼ˆä¾‹å¦‚nvidia æˆ– nvidia-dkms æˆ– nvidia-lts æˆ– nvidia-ck-somethingç­‰ï¼‰</p><blockquote><p>ä»¥ä¸Šè®¾ç½®å®Œæ¯•ï¼Œéœ€è¦è¿è¡Œä¸€æ¬¡mkinitcpio</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mkinitcpio -P<br></code></pre></td></tr></table></figure><h4 id="DRM-å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®"><a href="#DRM-å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®" class="headerlink" title="DRM å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®"></a>DRM å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®</h4><p>ç”±äºNVIDIAä¸æ”¯æŒè‡ªåŠ¨KMSæ™šåŠ è½½ï¼Œè¦æ­£å¸¸è¿è¡ŒWaylandåˆæˆå™¨æˆ–æ²¡æœ‰rootæƒé™çš„ Xorgï¼Œæ‚¨å¿…é¡»å¯ç”¨DRM (ç›´æ¥æ¸²æŸ“ç®¡ç†å™¨)å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®ï¼Œnvidia-utilsåŒ…560.35.03-5ç‰ˆæœ¬åé»˜è®¤å¯ç”¨DRM (Direct Rendering Manager) å†…æ ¸çº§æ˜¾ç¤ºæ¨¡å¼è®¾ç½®ï¼Œå¦‚æ‚¨ä½¿ç”¨æ›´æ—§çš„é©±åŠ¨ç‰ˆæœ¬ï¼Œè¯·ä¸ºnvidia_drmæ¨¡å—è®¾ç½®ä»¥ä¸‹å†…æ ¸æ¨¡å—å‚æ•°ï¼šmodeset&#x3D;1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim /etc/default/grub<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>åœ¨ GRUB_CMDLINE_LINUX_DEFAULTçš„quietåé¢æ·»åŠ nvidia_drm.modeset&#x3D;1</p></blockquote><p>æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯DRMæ˜¯å¦è‡ªåŠ¨å¯ç”¨ï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">cat <span class="hljs-regexp">/sys/m</span>odule<span class="hljs-regexp">/nvidia_drm/</span>parameters/modeset<br></code></pre></td></tr></table></figure><blockquote><p>å…¶åº”å½“è¿”å› Y</p></blockquote><p>æœ€åæ›´æ–°ä¸€ä¸‹Grub</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå¿…å¤‡è½¯ä»¶</title>
    <link href="/2025/08/07/%E5%AE%89%E8%A3%85%E5%BF%85%E5%A4%87%E8%BD%AF%E4%BB%B6/"/>
    <url>/2025/08/07/%E5%AE%89%E8%A3%85%E5%BF%85%E5%A4%87%E8%BD%AF%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs routeros">asusctl --help<br><br>asusctl aura static -c 27B7A1<br><br><br>asusctl<span class="hljs-built_in"> profile </span>--profile-<span class="hljs-built_in">set</span> Quiet         # é™éŸ³æ¨¡å¼ï¼ˆé€šå¸¸å¯ä»¥è°ƒèŠ‚äº®åº¦ï¼‰<br>asusctl<span class="hljs-built_in"> profile </span>--profile-<span class="hljs-built_in">set</span> Balanced      # å‡è¡¡æ¨¡å¼<br>asusctl<span class="hljs-built_in"> profile </span>--profile-<span class="hljs-built_in">set</span> Performance   # æ€§èƒ½æ¨¡å¼ï¼ˆå¯èƒ½è°ƒä¸äº†äº®åº¦ï¼‰<br><br>Starting version 6.1.12<br>Missing arg <span class="hljs-keyword">or</span> command<br><br>Optional arguments:<br>  -h, --help          <span class="hljs-built_in">print</span> help message<br>  -n, --next          toggle <span class="hljs-keyword">to</span> next<span class="hljs-built_in"> profile </span><span class="hljs-keyword">in</span> list<br>  -l, --list          list available profiles<br>  -p, --profile-<span class="hljs-built_in">get</span>   <span class="hljs-built_in">get</span><span class="hljs-built_in"> profile </span>      # æŸ¥çœ‹å½“å‰æ¨¡å¼<br>  -P, --profile-<span class="hljs-built_in">set</span>   <span class="hljs-built_in">set</span> the active<span class="hljs-built_in"> profile </span>   # è®¾ç½®å½“æœŸæ¨¡å¼<br></code></pre></td></tr></table></figure><h3 id="æ­£ç‰ˆæˆ‘çš„ä¸–ç•Œå¯åŠ¨å™¨"><a href="#æ­£ç‰ˆæˆ‘çš„ä¸–ç•Œå¯åŠ¨å™¨" class="headerlink" title="æ­£ç‰ˆæˆ‘çš„ä¸–ç•Œå¯åŠ¨å™¨"></a>æ­£ç‰ˆæˆ‘çš„ä¸–ç•Œå¯åŠ¨å™¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S minecraft-launcher<br></code></pre></td></tr></table></figure><h3 id="Java11"><a href="#Java11" class="headerlink" title="Java11"></a>Java11</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S jdk11-openjdk <br></code></pre></td></tr></table></figure><h3 id="æ‹‰å–ç¨‹åº"><a href="#æ‹‰å–ç¨‹åº" class="headerlink" title="æ‹‰å–ç¨‹åº"></a>æ‹‰å–ç¨‹åº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S git<br></code></pre></td></tr></table></figure><p><strong>è®¾ç½®gitçš„é‚®ç®±æ˜µç§°</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.email</span> <span class="hljs-string">&quot;2199654030@qq.com&quot;</span><br>git config <span class="hljs-attr">--global</span> user<span class="hljs-selector-class">.name</span> <span class="hljs-string">&quot;HuiKeJi&quot;</span><br></code></pre></td></tr></table></figure><h3 id="WPSOffice"><a href="#WPSOffice" class="headerlink" title="WPSOffice"></a>WPSOffice</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">yay</span> -S wps-office-<span class="hljs-meta">cn</span> wps-office-mui-zh-<span class="hljs-meta">cn</span> ttf-wps-fonts<br></code></pre></td></tr></table></figure><p><strong>ä¿®å¤WPSçš„Worldå’ŒPDF</strong></p><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elm"><span class="hljs-title">yay</span> -<span class="hljs-type">S</span> libtiff5 freetype2-wps <br></code></pre></td></tr></table></figure><h3 id="å¾®è½¯ç¼–è¾‘å™¨"><a href="#å¾®è½¯ç¼–è¾‘å™¨" class="headerlink" title="å¾®è½¯ç¼–è¾‘å™¨"></a>å¾®è½¯ç¼–è¾‘å™¨</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">yay</span> -S visual-studio-<span class="hljs-meta">code</span>-bin<br></code></pre></td></tr></table></figure><p><strong>è®¾ç½®å­—ä½“</strong></p><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey"><span class="hljs-built_in">Consolas,</span> Courier <span class="hljs-keyword">New</span>, Fira Code<br></code></pre></td></tr></table></figure><h3 id="downgradeå›é€€Pacmanæ›´æ–°"><a href="#downgradeå›é€€Pacmanæ›´æ–°" class="headerlink" title="downgradeå›é€€Pacmanæ›´æ–°"></a>downgradeå›é€€Pacmanæ›´æ–°</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S downgrade <br></code></pre></td></tr></table></figure><blockquote><p>[!TIP]</p><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ—¶ï¼Œéœ€è¦é€‰æ‹©å›é€€çš„ç‰ˆæœ¬ï¼ˆexiv2å°±æ˜¯æ‚¨è¦å›é€€çš„åŒ…åï¼‰</p><p>å†è€…ä¼šæç¤ºæ˜¯å¦å°†exiv2åŠ å…¥å¿½ç•¥Pacmanæ›´æ–°ï¼šN</p><p>ä»¥ä¸Šæ„æ€æ˜¯ä¸‹æ¬¡pacman -Syuæ—¶è¿˜ä¼šæ›´æ–°exiv2</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> downgrade exiv2 <br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é…ç½®Windows11 Fonts</title>
    <link href="/2025/08/06/%E8%AE%BE%E7%BD%AEWindows11%E5%AD%97%E4%BD%93/"/>
    <url>/2025/08/06/%E8%AE%BE%E7%BD%AEWindows11%E5%AD%97%E4%BD%93/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è®¾ç½®Windowså­—ä½“"><a href="#è®¾ç½®Windowså­—ä½“" class="headerlink" title="è®¾ç½®Windowså­—ä½“"></a>è®¾ç½®Windowså­—ä½“</h1><blockquote><p>[!NOTE]</p><p>åˆ›å»ºæœ¬åœ°å­˜æ”¾å­—ä½“æ–‡ä»¶å¤¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /usr/local/share/fonts<br></code></pre></td></tr></table></figure><p>å°†å­—ä½“å¤åˆ¶åˆ°æ–‡ä»¶å¤¹å†…</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo cp -r  <span class="hljs-regexp">/windows/</span>Windows<span class="hljs-regexp">/Fonts /u</span>sr<span class="hljs-regexp">/local/</span>share<span class="hljs-regexp">/fonts/</span>WindowsFonts/<br></code></pre></td></tr></table></figure><p>æ·»åŠ æƒé™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo chmod <span class="hljs-number">644</span> <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/share/</span>fonts<span class="hljs-regexp">/WindowsFonts/</span>*<br></code></pre></td></tr></table></figure><p>ç„¶åé‡æ–°ç”Ÿæˆå­—ä½“ç¼“å­˜</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">sudo fc-cache <span class="hljs-comment">--force</span><br></code></pre></td></tr></table></figure></blockquote>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Waylandæ›´å¤šè®¾ç½®</title>
    <link href="/2025/08/05/Wayland%E6%9B%B4%E5%A4%9A%E8%AE%BE%E7%BD%AE/"/>
    <url>/2025/08/05/Wayland%E6%9B%B4%E5%A4%9A%E8%AE%BE%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/applications/</span>.desktop<br></code></pre></td></tr></table></figure><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Exec</span><span class="hljs-operator">=/</span>usr/bin/microsoft-edge-stable --disable-gpu %U<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">--ozone-platform</span>=wayland <span class="hljs-attribute">--enable-features</span>=WaylandWindowDecorationsï¼ˆè¿™ä¸ªä¼šé€ æˆæµè§ˆå™¨è¾“å…¥ä¸äº†ä¸­æ–‡ï¼‰<br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">--proxy-server</span>=<span class="hljs-string">&quot;socks5://127.0.0.1:9900&quot;</span>ï¼ˆç»™google-chromeå’Œbrave-browseræ–‡ä»¶åŠ å…¥ä»£ç†ï¼Œå…¶ä»–ä¸èƒ½ç”¨ï¼‰<br></code></pre></td></tr></table></figure><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs perl">--<span class="hljs-keyword">no</span>-sandbox <span class="hljs-variable">%U</span>ï¼ˆç¦æ­¢æ²™ç›’ï¼‰<br></code></pre></td></tr></table></figure><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">MimeType</span><span class="hljs-operator">=</span>x-scheme-handler/termius<span class="hljs-comment">;ï¼ˆå®ç°è½¯ä»¶è·³è½¬ï¼‰</span><br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-attribute">Exec</span>=/opt/hsprogram/binary/huiishaochrome/google-chrome <span class="hljs-attribute">--proxy-server</span>=<span class="hljs-string">&quot;socks5://127.0.0.1:1089&quot;</span> <span class="hljs-attribute">--ozone-platform</span>=x11 --disable-gpu %U<br></code></pre></td></tr></table></figure><h3 id="å¦‚æœWaylandåœ¨æ··åˆæ˜¾å¡æ¨¡å¼ä¸‹sddmæ— æ³•æ­£å¸¸å¯åŠ¨éœ€è¦å¦‚ä¸‹æ“ä½œ"><a href="#å¦‚æœWaylandåœ¨æ··åˆæ˜¾å¡æ¨¡å¼ä¸‹sddmæ— æ³•æ­£å¸¸å¯åŠ¨éœ€è¦å¦‚ä¸‹æ“ä½œ" class="headerlink" title="å¦‚æœWaylandåœ¨æ··åˆæ˜¾å¡æ¨¡å¼ä¸‹sddmæ— æ³•æ­£å¸¸å¯åŠ¨éœ€è¦å¦‚ä¸‹æ“ä½œ"></a>å¦‚æœWaylandåœ¨æ··åˆæ˜¾å¡æ¨¡å¼ä¸‹sddmæ— æ³•æ­£å¸¸å¯åŠ¨éœ€è¦å¦‚ä¸‹æ“ä½œ</h3><blockquote><p>[!IMPORTANT]</p><p>æ²¡æœ‰é—®é¢˜æ—¶å¯è·³è¿‡ï¼ˆå»ºè®®è®¾ç½®æ—©å¯åŠ¨çœ‹çœ‹æ•ˆæœï¼‰</p></blockquote><blockquote><p>è¡¥é½ä¾èµ–ï¼ˆé»˜è®¤layer-shell-qtå­˜åœ¨ï¼‰</p></blockquote><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss">sudo pacman -S  layer-<span class="hljs-built_in">shell</span>-qt layer-<span class="hljs-built_in">shell</span>-qt5 <br></code></pre></td></tr></table></figure><blockquote><p>ç¼–è¾‘å¦‚ä¸‹</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">sudo <span class="hljs-keyword">vim</span> /etc/sddm.<span class="hljs-keyword">conf</span>.d/<span class="hljs-number">10</span>-wayland.<span class="hljs-keyword">conf</span><br></code></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[General]</span><br><span class="hljs-attr">DisplayServer</span>=wayland<br><span class="hljs-attr">GreeterEnvironment</span>=QT_WAYLAND_SHELL_INTEGRATION=layer-shell<br><span class="hljs-section">[Wayland]</span><br><span class="hljs-attr">CompositorCommand</span>=kwin_wayland --drm --<span class="hljs-literal">no</span>-lockscreen --<span class="hljs-literal">no</span>-global-shortcuts --locale1 --inputmethod maliit-keyboard<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nftablesé˜²ç«å¢™</title>
    <link href="/2025/08/05/%E9%85%8D%E7%BD%AEnftables%E8%AF%B4%E6%98%8E/"/>
    <url>/2025/08/05/%E9%85%8D%E7%BD%AEnftables%E8%AF%B4%E6%98%8E/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å®‰è£…nftables"><a href="#å®‰è£…nftables" class="headerlink" title="å®‰è£…nftables"></a>å®‰è£…nftables</h1><p><code>sudo pacman -S nftables æ­£å¸¸å·²ç»å†…ç½®æ— éœ€å®‰è£…</code><br><code>sudo pacman -Q nftables æŸ¥çœ‹æ˜¯å¦å­˜åœ¨</code></p><h1 id="æ‰“å¼€æœåŠ¡"><a href="#æ‰“å¼€æœåŠ¡" class="headerlink" title="æ‰“å¼€æœåŠ¡"></a>æ‰“å¼€æœåŠ¡</h1><p><code>sudo systemctl enable --now nftables.service</code><br><code>sudo systemctl status nftables.service æŸ¥çœ‹æœåŠ¡æ˜¯å¦å¼€å¯</code></p><h1 id="æ‰€æœ‰çš„æ”¾è¡Œå’Œç¦æ­¢ç«¯å£éƒ½åœ¨-etc-nftables-confä¸‹è®¾ç½®"><a href="#æ‰€æœ‰çš„æ”¾è¡Œå’Œç¦æ­¢ç«¯å£éƒ½åœ¨-etc-nftables-confä¸‹è®¾ç½®" class="headerlink" title="æ‰€æœ‰çš„æ”¾è¡Œå’Œç¦æ­¢ç«¯å£éƒ½åœ¨&#x2F;etc&#x2F;nftables.confä¸‹è®¾ç½®"></a>æ‰€æœ‰çš„æ”¾è¡Œå’Œç¦æ­¢ç«¯å£éƒ½åœ¨&#x2F;etc&#x2F;nftables.confä¸‹è®¾ç½®</h1><h3 id="ä¿®æ”¹åçš„é…ç½®ï¼ˆåœ¨ä½ çš„åŸºç¡€ä¸Šæ‰©å±•ç«¯å£è§„åˆ™ï¼‰"><a href="#ä¿®æ”¹åçš„é…ç½®ï¼ˆåœ¨ä½ çš„åŸºç¡€ä¸Šæ‰©å±•ç«¯å£è§„åˆ™ï¼‰" class="headerlink" title="ä¿®æ”¹åçš„é…ç½®ï¼ˆåœ¨ä½ çš„åŸºç¡€ä¸Šæ‰©å±•ç«¯å£è§„åˆ™ï¼‰"></a>ä¿®æ”¹åçš„é…ç½®ï¼ˆåœ¨ä½ çš„åŸºç¡€ä¸Šæ‰©å±•ç«¯å£è§„åˆ™ï¼‰</h3><h1 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs conf">destroy table inet filter<br>table inet filter &#123;<br>  chain input &#123;<br>    type filter hook input priority filter<br>    policy drop<br><br>ct state invalid drop comment &quot;early drop of invalid connections&quot;<br>ct state &#123;established, related&#125; accept comment &quot;allow tracked connections&quot;<br>iif lo accept comment &quot;allow from loopback&quot;<br>ip protocol icmp accept comment &quot;allow icmp&quot;<br>meta l4proto ipv6-icmp accept comment &quot;allow icmp v6&quot;<br><br># å¼€æ”¾ SSH<br><br>tcp dport ssh accept comment &quot;allow sshd&quot;<br><br># å¼€æ”¾ä½ éœ€è¦çš„ç«¯å£ï¼ˆTCP å’Œ UDPï¼‰ï¼ˆ&#123;&#125;è¿™æ˜¯ä¸€ä¸ªé›†åˆï¼‰<br>tcp dport &#123; 443, 80, 8080, 8090, 1090, 1080, 33612, 23361, 5000, 2017, 10170, 1314 &#125; accept comment &quot;allow specified tcp ports&quot;<br>udp dport &#123; 443, 80, 8080, 8090, 1090, 1080, 33612, 23361, 5000, 2017, 10170, 1314 &#125; accept comment &quot;allow specified udp ports&quot;<br><br># kdeconnect<br>tcp dport 1716-1764 accept comment &quot;allow kdeconnect tcp ports&quot;<br>udp dport 1716-1764 accept comment &quot;allow kdeconnect udp ports&quot;<br><br># é™åˆ¶æ‰«æç±»æ•°æ®åŒ…<br>pkttype host limit rate 5/second counter reject with icmpx type admin-prohibited<br><br># ç»Ÿè®¡é»˜è®¤æ‹’ç»åŒ…<br><br>counter<br><br>  &#125;<br><br>  chain forward &#123;<br>    type filter hook forward priority filter<br>    policy drop<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-1"><a href="#â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-1" class="headerlink" title="â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-"></a>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”-</h1><blockquote><h4 id="å°†æ­¤å†…å®¹ä¿å­˜ä¸º-etc-nftables-conf"><a href="#å°†æ­¤å†…å®¹ä¿å­˜ä¸º-etc-nftables-conf" class="headerlink" title="å°†æ­¤å†…å®¹ä¿å­˜ä¸º&#x2F;etc&#x2F;nftables.conf"></a>å°†æ­¤å†…å®¹ä¿å­˜ä¸º&#x2F;etc&#x2F;nftables.conf</h4></blockquote><h4 id="é‡è½½é˜²ç«å¢™è§„åˆ™ï¼š"><a href="#é‡è½½é˜²ç«å¢™è§„åˆ™ï¼š" class="headerlink" title="é‡è½½é˜²ç«å¢™è§„åˆ™ï¼š"></a>é‡è½½é˜²ç«å¢™è§„åˆ™ï¼š</h4><p><code>sudo systemctl restart nftables.service</code></p><h1 id="ä¸ºä»€ä¹ˆä¸æ”¾è¡Œç«¯å£ä¹Ÿèƒ½è®¿é—®ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸æ”¾è¡Œç«¯å£ä¹Ÿèƒ½è®¿é—®ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æ”¾è¡Œç«¯å£ä¹Ÿèƒ½è®¿é—®ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¸æ”¾è¡Œç«¯å£ä¹Ÿèƒ½è®¿é—®ï¼Ÿ</h1><h4 id="è®¿é—®åˆ†ä¸ºã€Œå‡ºç«™ã€è¿æ¥ï¼Œã€Œå…¥ç«™ã€è¿æ¥"><a href="#è®¿é—®åˆ†ä¸ºã€Œå‡ºç«™ã€è¿æ¥ï¼Œã€Œå…¥ç«™ã€è¿æ¥" class="headerlink" title="è®¿é—®åˆ†ä¸ºã€Œå‡ºç«™ã€è¿æ¥ï¼Œã€Œå…¥ç«™ã€è¿æ¥"></a>è®¿é—®åˆ†ä¸ºã€Œå‡ºç«™ã€è¿æ¥ï¼Œã€Œå…¥ç«™ã€è¿æ¥</h4><blockquote><p>Linux é˜²ç«å¢™é»˜è®¤æ˜¯ä½œç”¨åœ¨ã€Œå…¥ç«™ï¼ˆinputï¼‰ã€æµé‡ä¸Šçš„ï¼Œæµè§ˆå™¨è®¿é—®ç½‘é¡µå±äºã€Œå‡ºç«™ï¼ˆoutputï¼‰ã€æµé‡ã€‚</p></blockquote><h2 id="æƒ…å†µå¯¹æ¯”"><a href="#æƒ…å†µå¯¹æ¯”" class="headerlink" title="æƒ…å†µå¯¹æ¯”"></a>æƒ…å†µå¯¹æ¯”</h2><h6 id="ä½¿ç”¨æ–¹å¼å±äºä»€ä¹ˆæ–¹å‘æ˜¯å¦è¢«-input-é“¾é™åˆ¶"><a href="#ä½¿ç”¨æ–¹å¼å±äºä»€ä¹ˆæ–¹å‘æ˜¯å¦è¢«-input-é“¾é™åˆ¶" class="headerlink" title="ä½¿ç”¨æ–¹å¼å±äºä»€ä¹ˆæ–¹å‘æ˜¯å¦è¢« input é“¾é™åˆ¶"></a>ä½¿ç”¨æ–¹å¼å±äºä»€ä¹ˆæ–¹å‘æ˜¯å¦è¢« input é“¾é™åˆ¶</h6><ul><li>æµè§ˆå™¨è®¿é—®ç½‘é¡µï¼ˆä»£ç†è½¬å‘ï¼‰å‡ºç«™ï¼ˆoutputï¼‰âŒ ä¸å—é™åˆ¶</li><li>æœåŠ¡ç›‘å¬æœ¬åœ°ç«¯å£ä¾›å¤–éƒ¨è®¿é—®å…¥ç«™ï¼ˆinputï¼‰âœ… ä¼šè¢«é™åˆ¶</li><li>v2ray è¢«å®¢æˆ·ç«¯è®¿é—®ï¼ˆä¾‹å¦‚æ‰‹æœºè¿ï¼‰å…¥ç«™ï¼ˆinputï¼‰âœ… ä¼šè¢«é™åˆ¶</li></ul><ol><li><p>æƒ…å†µ Aï¼šä½ è®¿é—®å¤–ç½‘ç½‘é¡µ</p></li><li><p>curl -x 127.0.0.1:2017 <a href="https://example.com/">https://example.com</a></p></li><li><p>è¯·æ±‚ä»æœ¬åœ°å‘å‡ºï¼Œèµ°çš„æ˜¯ output é“¾</p></li><li><p>å³ä½¿ä½ æ²¡å¼€æ”¾ 2017 ç«¯å£ï¼Œä¹Ÿèƒ½ç”¨</p></li><li><p>å› ä¸º ä½ åœ¨æœ¬æœºå‘è¯·æ±‚ï¼Œæœ¬æœºå“åº”è‡ªå·±ï¼Œæˆ–æ˜¯æœ¬æœºä½œä¸ºå®¢æˆ·ç«¯è¿æ¥è¿œç«¯æœåŠ¡å™¨</p></li><li><p>æƒ…å†µ Bï¼šåˆ«äººè¿æ¥ä½ çš„ 2017 ç«¯å£</p></li><li><p>æ¯”å¦‚ä½ æ‰‹æœºè®¾ç½®ä»£ç†æŒ‡å‘ï¼š</p></li><li><p>ä½ çš„ç”µè„‘IP:2017</p></li><li><p>è¿™æ—¶æ‰‹æœºçš„è¿æ¥è¯·æ±‚ä¼šå‘½ä¸­ input é“¾ï¼Œè€Œä½ ï¼š</p></li><li><p>å¦‚æœæ²¡æœ‰ tcp dport 2017 acceptï¼Œé˜²ç«å¢™å°±ä¼šæ‹¦ä½è¿™æ¬¡è¿æ¥</p></li><li><p>âŒ æ‰€ä»¥ä¸èƒ½è®¿é—®</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŸºäºPythonå»æ°´å°</title>
    <link href="/2025/08/04/%E5%8E%BB%E6%B0%B4%E5%8D%B0/"/>
    <url>/2025/08/04/%E5%8E%BB%E6%B0%B4%E5%8D%B0/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ"><a href="#ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ" class="headerlink" title="ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ"></a>ä¸€ã€æ•´ä½“æµç¨‹æ¦‚è§ˆ</h3><ol><li><p>ç”¨YOLOv8è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡é‡Œçš„æ°´å°åŒºåŸŸï¼Œå¾—åˆ°æ°´å°çš„â€œæ©ç å›¾â€maskï¼ˆå³é»‘ç™½å›¾ï¼Œç™½è‰²æ˜¯æ°´å°ï¼‰</p></li><li><p>ç”¨ lama-cleaner å‘½ä»¤è¡Œï¼ˆæ”¯æŒè‡ªå®šä¹‰maskï¼‰å¯¹åŸå›¾+æ©ç æ‰¹é‡è‡ªåŠ¨ä¿®å¤ï¼Œå¾—åˆ°æ— æ°´å°å›¾</p></li><li><p>å…¨ç¨‹æ‰¹é‡è‡ªåŠ¨ï¼Œä¸ç”¨äººå·¥ä¸€å¼ å¼ ç”»æ¡†</p></li><li><p><strong>è·¯å¾„æ˜¯ï¼š&#x2F;src&#x2F;weibo&#x2F;rmwatermarksï¼š</strong></p><p><strong>mask.pyã€lama-cleaner.pyã€venvã€models</strong></p></li></ol><h3 id="äºŒã€è¯¦ç»†åˆ†æ­¥æ•™ç¨‹"><a href="#äºŒã€è¯¦ç»†åˆ†æ­¥æ•™ç¨‹" class="headerlink" title="äºŒã€è¯¦ç»†åˆ†æ­¥æ•™ç¨‹"></a>äºŒã€è¯¦ç»†åˆ†æ­¥æ•™ç¨‹</h3><h4 id="Step-1-ç¯å¢ƒå‡†å¤‡"><a href="#Step-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="Step 1. ç¯å¢ƒå‡†å¤‡"></a>Step 1. ç¯å¢ƒå‡†å¤‡</h4><p>ä½¿ç”¨Python 3.10åˆ›å»ºä¸€ä¸ªvenvç¯å¢ƒï¼ˆæ¨èï¼Œé¿å…torchç­‰AIåŒ…å…¼å®¹æ€§é—®é¢˜ï¼‰</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">python3</span>.<span class="hljs-number">10</span> -m venv venv<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> venv/bin/activate<br></code></pre></td></tr></table></figure><h4 id="Step-2-å®‰è£…å»æ°´å°å·¥å…·ä»¥åŠä¾èµ–"><a href="#Step-2-å®‰è£…å»æ°´å°å·¥å…·ä»¥åŠä¾èµ–" class="headerlink" title="Step 2. å®‰è£…å»æ°´å°å·¥å…·ä»¥åŠä¾èµ–"></a>Step 2. å®‰è£…å»æ°´å°å·¥å…·ä»¥åŠä¾èµ–</h4><blockquote><p>[!IMPORTANT]</p><p>å®‰è£…ultralyticsï¼Œ æ˜¯ä¸€ä¸ªä¸“æ³¨äºäººå·¥æ™ºèƒ½è§†è§‰æ£€æµ‹ï¼Œå°¤å…¶æ˜¯ç›®æ ‡æ£€æµ‹ï¼ˆObject Detectionï¼‰é¢†åŸŸçš„å¼€æºé¡¹ç›®å’Œå…¬å¸ã€‚å®ƒæœ€è‘—åçš„äº§å“æ˜¯ YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—æ¨¡å‹çš„å®˜æ–¹å®ç°</p><p>huggingface_hubï¼Œæ˜¯huggingface&#x2F;diffusers&#x2F;transformers ç³»åˆ—æ¨¡å‹æ‰˜ç®¡å’Œä¸‹è½½çš„åŸºç¡€åŒ…ï¼Œå¾ˆå¤š AI é¡¹ç›®éƒ½ä¼šè‡ªåŠ¨å¸¦ä¸Š</p><p>lama-cleanerï¼Œç”± SOTA AI æ¨¡å‹æä¾›æ”¯æŒçš„å…è´¹å¼€æºä¿®å¤å·¥å…·</p></blockquote><p>ç¼–è¾‘requirements.txtæ–‡ä»¶</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">torch</span>==<span class="hljs-number">2</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>                # PyTorchï¼Œæ·±åº¦å­¦ä¹ æ ¸å¿ƒåº“ï¼Œæ¨¡å‹æ¨ç†å’Œè®­ç»ƒç”¨<br><span class="hljs-attribute">torchvision</span>==<span class="hljs-number">0</span>.<span class="hljs-number">15</span>.<span class="hljs-number">1</span>         # PyTorch å›¾åƒå·¥å…·åº“ï¼Œå¸¸ç”¨äºæ•°æ®å¤„ç†å’Œæ¨¡å‹<br><span class="hljs-attribute">diffusers</span>==<span class="hljs-number">0</span>.<span class="hljs-number">16</span>.<span class="hljs-number">1</span>           # Huggingface Diffusersï¼Œä¸»è¦ç”¨äºæ‰©æ•£æ¨¡å‹ï¼ˆå¦‚Lamaç­‰å›¾åƒä¿®å¤/ç”Ÿæˆï¼‰<br><span class="hljs-attribute">huggingface_hub</span>==<span class="hljs-number">0</span>.<span class="hljs-number">15</span>.<span class="hljs-number">1</span>     # Huggingface Hubå®¢æˆ·ç«¯ï¼Œä¸‹è½½æ¨¡å‹/æƒé‡/ä¸Šä¼ æ•°æ®<br><span class="hljs-attribute">lama</span>-cleaner==<span class="hljs-number">1</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span>         # lama-cleaner å›¾åƒå»æ°´å°/ä¿®å¤å·¥å…·ï¼ˆå¯ç”¨maskæ‰¹é‡ä¿®å¤ï¼‰<br><span class="hljs-attribute">ultralytics</span>                  # YOLOv8å®˜æ–¹åº“ï¼Œç›®æ ‡æ£€æµ‹æ¨¡å‹æ¨ç†ç”¨<br><span class="hljs-attribute">PySocks</span>                      # socks5ä»£ç†æ”¯æŒï¼ˆå¦‚æŸäº›pipéœ€ä»£ç†ï¼‰<br><span class="hljs-attribute">PyQt5</span>                        # Qt5 GUIåº“ï¼ŒlabelImgç­‰å›¾å½¢ç•Œé¢ä¾èµ–<br><span class="hljs-attribute">lxml</span>                         # è¯»å†™XMLæ–‡ä»¶ï¼ŒlabelImgç­‰ä¾èµ–VOCæ ¼å¼æ—¶å¿…å¤‡<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip3</span>.<span class="hljs-number">10</span> install -r requirements.txt<br></code></pre></td></tr></table></figure><h4 id="Step-3-ä¸‹è½½-å‡†å¤‡YOLOv8æ°´å°æ£€æµ‹æ¨¡å‹"><a href="#Step-3-ä¸‹è½½-å‡†å¤‡YOLOv8æ°´å°æ£€æµ‹æ¨¡å‹" class="headerlink" title="Step 3. ä¸‹è½½&#x2F;å‡†å¤‡YOLOv8æ°´å°æ£€æµ‹æ¨¡å‹"></a>Step 3. ä¸‹è½½&#x2F;å‡†å¤‡YOLOv8æ°´å°æ£€æµ‹æ¨¡å‹</h4><blockquote><p>[!IMPORTANT]</p><p>å¯ä»¥ç›´æ¥ç”¨å¼€æºè®­ç»ƒå¥½çš„é€šç”¨æ°´å°æ£€æµ‹æ¨¡å‹ï¼Œæ¯”å¦‚è¿™ä¸ªyolov5-watermarkï¼ˆé€‚é…å¾®åš&#x2F;å…¬ä¼—å·&#x2F;å°çº¢ä¹¦ç­‰ï¼‰</p><p><strong>å°†åç¼€ä¸ºptçš„æ¨¡å‹æ”¾åœ¨ä»¥ä¸‹æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ˜¯æˆ‘çš„æ¨¡å‹ï¼šbest.pt</strong></p><p><strong>ä¸‹è½½åœ°å€ï¼š<a href="https://pan.baidu.com/s/1xRzBTlBlDk0vM980rgB79g">https://pan.baidu.com/s/1xRzBTlBlDk0vM980rgB79g</a> æå–ç : hui9</strong></p><p><strong>æ”¾åœ¨ï¼šsrc&#x2F;weibo&#x2F;rmwatermarks&#x2F;models&#x2F;</strong></p><p><strong>lama-cleaner æ˜¯åŸºäºâ€œå¤§LAMAæ¨¡å‹ï¼ˆbig-lamaï¼‰â€çš„ inpainting ä¿®å¤å·¥å…·ï¼Œè¿™ä¸ªä¹Ÿæ˜¯å¿…é¡»ï¼Œçœçš„lama-cleaneræŠ¥é”™</strong></p><p><strong>ä¸‹è½½åœ°å€ï¼š<a href="https://pan.baidu.com/s/10Q6cls-XbgH-ggF9LCetWQ">https://pan.baidu.com/s/10Q6cls-XbgH-ggF9LCetWQ</a> æå–ç : hui9</strong></p><p><strong>æ”¾åœ¨ï¼š~&#x2F;.cache&#x2F;torch&#x2F;hub&#x2F;checkpoints&#x2F;big-lama.pt</strong></p></blockquote><p>big-lama.pt å°±æ˜¯ Lama æ¨¡å‹çš„æ ¸å¿ƒâ€œæƒé‡æ–‡ä»¶â€ï¼ˆmodel checkpointï¼‰ï¼Œæ˜¯ç¥ç»ç½‘ç»œçš„æ‰€æœ‰å‚æ•°ï¼Œæœ¬åœ°æ²¡è¿™ä¸ªæ–‡ä»¶ï¼Œæ¨¡å‹æ ¹æœ¬æ²¡æ³•è¿è¡Œ</p><h5 id="å·¥ä½œæµç¨‹ï¼š"><a href="#å·¥ä½œæµç¨‹ï¼š" class="headerlink" title="å·¥ä½œæµç¨‹ï¼š"></a>å·¥ä½œæµç¨‹ï¼š</h5><p>é¦–æ¬¡å¯åŠ¨ lama-cleanerï¼ˆæ—  big-lama.ptï¼‰ï¼Œç¨‹åºä¼šè‡ªåŠ¨è”ç½‘ä¸‹è½½å®˜æ–¹æƒé‡åŒ…åˆ°ä½ çš„ç¼“å­˜ç›®å½•ï¼ˆé»˜è®¤ PyTorch ä¹ æƒ¯æ˜¯ ~&#x2F;.cache&#x2F;torch&#x2F;hub&#x2F;checkpoints&#x2F;ï¼‰ã€‚</p><p>ä¸‹å¥½åæ°¸ä¹…å¤ç”¨ã€‚ä½ ä¹‹åæ¯æ¬¡å¯åŠ¨ lama-cleanerã€è°ƒç”¨ inpaintï¼Œéƒ½ä¼šç›´æ¥åŠ è½½è¿™ä¸ª big-lama.pt</p><p>å¦‚æœä½ åˆ é™¤ big-lama.ptï¼Œlama-cleaner ä¼šå†æ¬¡è‡ªåŠ¨ä¸‹è½½ï¼ˆåªè¦æœ¬åœ°æ²¡æ‰¾åˆ°æƒé‡æ–‡ä»¶ï¼‰</p><h4 id="Step-4-æ‰¹é‡æ£€æµ‹æ‰€æœ‰å›¾ç‰‡ï¼Œå¯¼å‡ºmask"><a href="#Step-4-æ‰¹é‡æ£€æµ‹æ‰€æœ‰å›¾ç‰‡ï¼Œå¯¼å‡ºmask" class="headerlink" title="Step 4. æ‰¹é‡æ£€æµ‹æ‰€æœ‰å›¾ç‰‡ï¼Œå¯¼å‡ºmask"></a>Step 4. æ‰¹é‡æ£€æµ‹æ‰€æœ‰å›¾ç‰‡ï¼Œå¯¼å‡ºmask</h4><p><strong>æ–°å»ºæ£€æµ‹è„šæœ¬ï¼ˆè¿™æ˜¯æˆ‘çš„è·¯å¾„ä½ ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±çš„ï¼‰</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-attribute">src</span>/weibo/rmwatermarks/<span class="hljs-attribute">mask</span><span class="hljs-selector-class">.py</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO<br><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><br>model = YOLO(<span class="hljs-string">&#x27;/src/weibo/rmwatermarks/models/best.pt&#x27;</span>)<br><br>img_dir = <span class="hljs-string">&#x27;/src/weibo/rmwatermarks/image&#x27;</span><span class="hljs-comment"># å»æ°´å°çš„å›¾ç‰‡è·¯å¾„</span><br>mask_dir = <span class="hljs-string">&#x27;/src/weibo/rmwatermarks/mask/&#x27;</span><span class="hljs-comment"># ç”Ÿæˆçš„maskæ–‡ä»¶è·¯å¾„ï¼Œåé¢éœ€è¦</span><br>os.makedirs(mask_dir, exist_ok=<span class="hljs-literal">True</span>)<br><br><span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(img_dir):<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> fname.lower().endswith((<span class="hljs-string">&#x27;.jpg&#x27;</span>, <span class="hljs-string">&#x27;.png&#x27;</span>, <span class="hljs-string">&#x27;.jpeg&#x27;</span>)):<br>        <span class="hljs-keyword">continue</span><br>    img_path = os.path.join(img_dir, fname)<br>    im = Image.<span class="hljs-built_in">open</span>(img_path)<br>    w, h = im.size<br>    mask = np.zeros((h, w), dtype=np.uint8)<br><br>    results = model(img_path)<br>    boxes = results[<span class="hljs-number">0</span>].boxes.xyxy.cpu().numpy()  <span class="hljs-comment"># [x1, y1, x2, y2]</span><br>    <span class="hljs-comment"># è‡ªåŠ¨æˆªæ–­ï¼Œé¿å…æº¢å‡ºè¾¹ç•Œ</span><br>    <span class="hljs-keyword">for</span> box <span class="hljs-keyword">in</span> boxes:<br>        x1, y1, x2, y2 = <span class="hljs-built_in">map</span>(<span class="hljs-built_in">int</span>, box)<br>        x1 = <span class="hljs-built_in">max</span>(x1, <span class="hljs-number">0</span>)<br>        y1 = <span class="hljs-built_in">max</span>(y1, <span class="hljs-number">0</span>)<br>        x2 = <span class="hljs-built_in">min</span>(x2, w)<br>        y2 = <span class="hljs-built_in">min</span>(y2, h)<br>        mask[y1:y2, x1:x2] = <span class="hljs-number">255</span><br><br>    mask_img = Image.fromarray(mask)<br>    <span class="hljs-comment"># ç»Ÿä¸€ä¿å­˜ä¸º png æ ¼å¼</span><br>    mask_name = fname.rsplit(<span class="hljs-string">&#x27;.&#x27;</span>,<span class="hljs-number">1</span>)[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;_mask.png&#x27;</span><br>    mask_img.save(os.path.join(mask_dir, mask_name), <span class="hljs-built_in">format</span>=<span class="hljs-string">&quot;PNG&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;ç”Ÿæˆmaskï¼š<span class="hljs-subst">&#123;mask_name&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>è¿è¡Œï¼š<strong>python3.10 mask.py</strong></p><p>éªŒè¯maskå›¾å’Œå»æ°´å°å›¾ç‰‡æ˜¯å¦ä¸€è‡´ï¼ˆå¯è·³è¿‡ï¼‰</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span>.<span class="hljs-number">10</span> check_and_fix_mask.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># é…ç½®ç›®å½•pip install pillow numpy</span><br>img_dir = <span class="hljs-string">&#x27;/src/weibo/rmwatermarks/image&#x27;</span><br>mask_dir = <span class="hljs-string">&#x27;/src/weibo/rmwatermarks/mask&#x27;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fix_mask</span>(<span class="hljs-params">img_path, mask_path</span>):<br>    <span class="hljs-keyword">try</span>:<br>        img = Image.<span class="hljs-built_in">open</span>(img_path)<br>        mask = Image.<span class="hljs-built_in">open</span>(mask_path)<br><br>        <span class="hljs-comment"># 1. æ£€æŸ¥å¹¶è‡ªåŠ¨ä¿®æ­£å°ºå¯¸</span><br>        <span class="hljs-keyword">if</span> mask.size != img.size:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[å°ºå¯¸ä¸ä¸€è‡´] <span class="hljs-subst">&#123;os.path.basename(mask_path)&#125;</span>: <span class="hljs-subst">&#123;mask.size&#125;</span> -&gt; <span class="hljs-subst">&#123;img.size&#125;</span>&quot;</span>)<br>            mask = mask.resize(img.size, Image.NEAREST)<br><br>        <span class="hljs-comment"># 2. å¼ºåˆ¶ç°åº¦Læ¨¡å¼</span><br>        <span class="hljs-keyword">if</span> mask.mode != <span class="hljs-string">&quot;L&quot;</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[æ¨¡å¼ä¸ä¸€è‡´] <span class="hljs-subst">&#123;os.path.basename(mask_path)&#125;</span>: <span class="hljs-subst">&#123;mask.mode&#125;</span> -&gt; L&quot;</span>)<br>            mask = mask.convert(<span class="hljs-string">&quot;L&quot;</span>)<br><br>        <span class="hljs-comment"># 3. äºŒå€¼åŒ–ï¼ˆåªå«0/255ï¼‰</span><br>        mask_bin = mask.point(<span class="hljs-keyword">lambda</span> x: <span class="hljs-number">255</span> <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">127</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>, mode=<span class="hljs-string">&#x27;1&#x27;</span>).convert(<span class="hljs-string">&quot;L&quot;</span>)<br>        uniq = np.unique(np.array(mask_bin))<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> (np.array_equal(uniq, [<span class="hljs-number">0</span>]) <span class="hljs-keyword">or</span> np.array_equal(uniq, [<span class="hljs-number">255</span>]) <span class="hljs-keyword">or</span> np.array_equal(uniq, [<span class="hljs-number">0</span>, <span class="hljs-number">255</span>])):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[äºŒå€¼åŒ–ä¿®æ­£] <span class="hljs-subst">&#123;os.path.basename(mask_path)&#125;</span> å”¯ä¸€å€¼: <span class="hljs-subst">&#123;uniq&#125;</span> -&gt; [0,255]&quot;</span>)<br>        mask = mask_bin<br><br>        <span class="hljs-comment"># 4. ä¿å­˜ä¿®æ­£åçš„mask</span><br>        mask.save(mask_path)<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[OK] <span class="hljs-subst">&#123;os.path.basename(img_path)&#125;</span> &lt;-&gt; <span class="hljs-subst">&#123;os.path.basename(mask_path)&#125;</span>  size: <span class="hljs-subst">&#123;img.size&#125;</span> mode: <span class="hljs-subst">&#123;mask.mode&#125;</span> å”¯ä¸€å€¼: <span class="hljs-subst">&#123;np.unique(np.array(mask))&#125;</span>&quot;</span>)<br><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[ERROR] <span class="hljs-subst">&#123;os.path.basename(mask_path)&#125;</span>: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(img_dir):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> fname.lower().endswith((<span class="hljs-string">&#x27;.jpg&#x27;</span>, <span class="hljs-string">&#x27;.jpeg&#x27;</span>, <span class="hljs-string">&#x27;.png&#x27;</span>)):<br>            <span class="hljs-keyword">continue</span><br>        img_base = fname.rsplit(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>]<br>        mask_name = img_base + <span class="hljs-string">&#x27;_mask.png&#x27;</span><br>        img_path = os.path.join(img_dir, fname)<br>        mask_path = os.path.join(mask_dir, mask_name)<br>        <span class="hljs-keyword">if</span> os.path.exists(mask_path):<br>            fix_mask(img_path, mask_path)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;[ç¼ºå°‘mask] <span class="hljs-subst">&#123;mask_path&#125;</span>&quot;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    main()<br><br></code></pre></td></tr></table></figure><h4 id="Step-5-ç”¨-lama-cleaner-æ‰¹é‡ä¿®å¤å»æ°´å°ï¼ˆè‡ªåŠ¨è¯»å–maskï¼‰"><a href="#Step-5-ç”¨-lama-cleaner-æ‰¹é‡ä¿®å¤å»æ°´å°ï¼ˆè‡ªåŠ¨è¯»å–maskï¼‰" class="headerlink" title="Step 5. ç”¨ lama-cleaner æ‰¹é‡ä¿®å¤å»æ°´å°ï¼ˆè‡ªåŠ¨è¯»å–maskï¼‰"></a>Step 5. ç”¨ lama-cleaner æ‰¹é‡ä¿®å¤å»æ°´å°ï¼ˆè‡ªåŠ¨è¯»å–maskï¼‰</h4><p><strong>ç¼–å†™æ‰¹å¤„ç†è„šæœ¬</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">src<span class="hljs-regexp">/weibo/</span>rmwatermarks/lama-cleaner.py<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>æ¯å¼ å›¾ç‰‡éƒ½ä¼šç”¨åŒåmaskä¿®å¤æ°´å°åŒºåŸŸï¼Œè¾“å‡ºåˆ° image_nowm&#x2F;</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> BytesIO<br><br><span class="hljs-comment"># 1. é…ç½®è·¯å¾„</span><br>img_dir = <span class="hljs-string">&#x27;/home/zjh/src/weibo/rmwatermarks/image&#x27;</span>       <span class="hljs-comment"># åŸå§‹å›¾ç‰‡ç›®å½•</span><br>mask_dir = <span class="hljs-string">&#x27;/home/zjh/src/weibo/rmwatermarks/mask&#x27;</span>       <span class="hljs-comment"># maskç›®å½•</span><br>out_dir = <span class="hljs-string">&#x27;/home/zjh/src/weibo/rmwatermarks/image_nowm/&#x27;</span> <span class="hljs-comment"># è¾“å‡ºç›®å½•</span><br>os.makedirs(out_dir, exist_ok=<span class="hljs-literal">True</span>)                      <span class="hljs-comment"># åˆ›å»ºè¾“å‡ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span><br><br>MAX_SIZE = <span class="hljs-number">4096</span>  <span class="hljs-comment"># å›¾ç‰‡æœ€å¤§è¾¹é•¿ï¼Œè¿‡å¤§å°±è‡ªåŠ¨ç¼©æ”¾</span><br><br><span class="hljs-comment"># 2. éå†å›¾ç‰‡æ–‡ä»¶å¤¹</span><br><span class="hljs-keyword">for</span> fname <span class="hljs-keyword">in</span> os.listdir(img_dir):<br>    <span class="hljs-comment"># åªå¤„ç†å›¾ç‰‡æ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> fname.lower().endswith((<span class="hljs-string">&#x27;.jpg&#x27;</span>, <span class="hljs-string">&#x27;.jpeg&#x27;</span>, <span class="hljs-string">&#x27;.png&#x27;</span>)):<br>        <span class="hljs-keyword">continue</span><br><br>    img_base = fname.rsplit(<span class="hljs-string">&#x27;.&#x27;</span>, <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>]<br>    mask_name = img_base + <span class="hljs-string">&#x27;_mask.png&#x27;</span><br>    mask_path = os.path.join(mask_dir, mask_name)<br>    in_path = os.path.join(img_dir, fname)<br>    out_path = os.path.join(out_dir, fname)<br><br>    <span class="hljs-comment"># mask å¿…é¡»å­˜åœ¨</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(mask_path):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;æœªæ‰¾åˆ°maskï¼š<span class="hljs-subst">&#123;mask_path&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">continue</span><br><br>    <span class="hljs-comment"># 3. æ‰“å¼€å›¾ç‰‡å’Œmaskï¼Œç¡®ä¿å°ºå¯¸åŒ¹é…</span><br>    <span class="hljs-keyword">try</span>:<br>        img = Image.<span class="hljs-built_in">open</span>(in_path)<br>        mask = Image.<span class="hljs-built_in">open</span>(mask_path)<br><br>        <span class="hljs-comment"># ç¼©æ”¾å›¾ç‰‡å’Œmaskåˆ°æœ€å¤§è¾¹é•¿ MAX_SIZEï¼Œä¸”ä¿è¯ä¸¤è€…åŒå°ºå¯¸</span><br>        scale = <span class="hljs-built_in">min</span>(MAX_SIZE / img.size[<span class="hljs-number">0</span>], MAX_SIZE / img.size[<span class="hljs-number">1</span>], <span class="hljs-number">1.0</span>)<br>        new_size = (<span class="hljs-built_in">int</span>(img.size[<span class="hljs-number">0</span>] * scale), <span class="hljs-built_in">int</span>(img.size[<span class="hljs-number">1</span>] * scale))<br>        <span class="hljs-keyword">if</span> img.size != new_size:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;fname&#125;</span> å›¾ç‰‡è¿‡å¤§(<span class="hljs-subst">&#123;img.size&#125;</span>), è‡ªåŠ¨resize -&gt; <span class="hljs-subst">&#123;new_size&#125;</span>&quot;</span>)<br>            img = img.resize(new_size, Image.LANCZOS)<br>        <span class="hljs-keyword">if</span> mask.size != new_size:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;fname&#125;</span> maskå°ºå¯¸ä¸ä¸€è‡´ï¼Œè‡ªåŠ¨resize: <span class="hljs-subst">&#123;mask.size&#125;</span> -&gt; <span class="hljs-subst">&#123;new_size&#125;</span>&quot;</span>)<br>            mask = mask.resize(new_size, Image.NEAREST)<br><br>        <span class="hljs-comment"># mask ç°åº¦åŒ–ã€äºŒå€¼åŒ–ï¼Œä¿è¯åªæœ‰0/255</span><br>        <span class="hljs-keyword">if</span> mask.mode != <span class="hljs-string">&quot;L&quot;</span>:<br>            mask = mask.convert(<span class="hljs-string">&quot;L&quot;</span>)<br>        mask = mask.point(<span class="hljs-keyword">lambda</span> x: <span class="hljs-number">255</span> <span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">127</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>, mode=<span class="hljs-string">&#x27;1&#x27;</span>).convert(<span class="hljs-string">&quot;L&quot;</span>)<br>        mask_array = np.array(mask)<br>        <span class="hljs-keyword">if</span> mask_array.<span class="hljs-built_in">max</span>() == <span class="hljs-number">0</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;fname&#125;</span> maskå…¨é»‘ï¼Œè·³è¿‡ï¼ˆæ²¡æœ‰æ£€æµ‹åˆ°æ°´å°åŒºåŸŸï¼‰&quot;</span>)<br>            <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å›¾ç‰‡æˆ–maskæ— æ³•æ‰“å¼€ï¼š<span class="hljs-subst">&#123;fname&#125;</span>, <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">continue</span><br><br>    <span class="hljs-comment"># 4. æ„é€  BytesIOï¼Œé˜²æ­¢IOå†²çª</span><br>    img_bytes = BytesIO()<br>    img.save(img_bytes, <span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;PNG&#x27;</span>)<br>    img_bytes.seek(<span class="hljs-number">0</span>)<br>    mask_bytes = BytesIO()<br>    mask.save(mask_bytes, <span class="hljs-built_in">format</span>=<span class="hljs-string">&#x27;PNG&#x27;</span>)<br>    mask_bytes.seek(<span class="hljs-number">0</span>)<br><br>    <span class="hljs-comment"># 5. æ„é€  POST æ•°æ®</span><br>    files = &#123;<br>        <span class="hljs-string">&#x27;image&#x27;</span>: (<span class="hljs-string">&#x27;image.png&#x27;</span>, img_bytes, <span class="hljs-string">&#x27;image/png&#x27;</span>),<br>        <span class="hljs-string">&#x27;mask&#x27;</span>: (<span class="hljs-string">&#x27;mask.png&#x27;</span>, mask_bytes, <span class="hljs-string">&#x27;image/png&#x27;</span>)<br>    &#125;<br><br>    <span class="hljs-comment"># ======= ä½ æ‰€æœ‰çš„ lama-cleaner å‚æ•°éƒ½å†™è¿™é‡Œ =======</span><br>    <span class="hljs-comment"># å¦‚æœè¦ä¸åŒå›¾ç‰‡ç”¨ä¸åŒå‚æ•°ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥çµæ´»è°ƒæ•´</span><br>    data = &#123;<br>        <span class="hljs-string">&quot;ldmSteps&quot;</span>: <span class="hljs-number">8</span>,<br>        <span class="hljs-string">&quot;ldmSampler&quot;</span>: <span class="hljs-string">&quot;plms&quot;</span>,<br>        <span class="hljs-string">&quot;hdStrategy&quot;</span>: <span class="hljs-string">&quot;Original&quot;</span>,<br>        <span class="hljs-string">&quot;zitsWireframe&quot;</span>: <span class="hljs-string">&quot;false&quot;</span>,<br>        <span class="hljs-string">&quot;hdStrategyCropMargin&quot;</span>: <span class="hljs-number">128</span>,<br>        <span class="hljs-string">&quot;hdStrategyCropTrigerSize&quot;</span>: <span class="hljs-number">2000</span>,<br>        <span class="hljs-string">&quot;hdStrategyResizeLimit&quot;</span>: <span class="hljs-number">2000</span>,<br>        <span class="hljs-string">&quot;prompt&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;negativePrompt&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;useCroper&quot;</span>: <span class="hljs-string">&quot;false&quot;</span>,<br>        <span class="hljs-string">&quot;croperX&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;croperY&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;croperHeight&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;croperWidth&quot;</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-string">&quot;sdScale&quot;</span>: <span class="hljs-number">1.0</span>,<br>        <span class="hljs-string">&quot;sdMaskBlur&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-string">&quot;sdStrength&quot;</span>: <span class="hljs-number">0.75</span>,<br>        <span class="hljs-string">&quot;sdSteps&quot;</span>: <span class="hljs-number">50</span>,<br>        <span class="hljs-string">&quot;sdGuidanceScale&quot;</span>: <span class="hljs-number">7.5</span>,<br>        <span class="hljs-string">&quot;sdSampler&quot;</span>: <span class="hljs-string">&quot;plms&quot;</span>,<br>        <span class="hljs-string">&quot;sdSeed&quot;</span>: -<span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;sdMatchHistograms&quot;</span>: <span class="hljs-string">&quot;false&quot;</span>,<br>        <span class="hljs-string">&quot;cv2Flag&quot;</span>: <span class="hljs-string">&quot;INPAINT_NS&quot;</span>,<br>        <span class="hljs-string">&quot;cv2Radius&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-string">&quot;paintByExampleSteps&quot;</span>: <span class="hljs-number">50</span>,<br>        <span class="hljs-string">&quot;paintByExampleGuidanceScale&quot;</span>: <span class="hljs-number">7.5</span>,<br>        <span class="hljs-string">&quot;paintByExampleMaskBlur&quot;</span>: <span class="hljs-number">3</span>,<br>        <span class="hljs-string">&quot;paintByExampleSeed&quot;</span>: -<span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;paintByExampleMatchHistograms&quot;</span>: <span class="hljs-string">&quot;false&quot;</span>,<br>        <span class="hljs-string">&quot;paintByExampleExampleImage&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>        <span class="hljs-string">&quot;p2pSteps&quot;</span>: <span class="hljs-number">50</span>,<br>        <span class="hljs-string">&quot;p2pImageGuidanceScale&quot;</span>: <span class="hljs-number">1.5</span>,<br>        <span class="hljs-string">&quot;p2pGuidanceScale&quot;</span>: <span class="hljs-number">7.5</span>,<br>        <span class="hljs-string">&quot;controlnet_conditioning_scale&quot;</span>: <span class="hljs-number">1.0</span>,<br>        <span class="hljs-string">&quot;controlnet_method&quot;</span>: <span class="hljs-string">&quot;none&quot;</span>,<br>    &#125;<br><br>    <span class="hljs-comment"># 6. å‘é€ POST è¯·æ±‚ï¼Œè·å¾—ç»“æœ</span><br>    <span class="hljs-keyword">try</span>:<br>        response = requests.post(<br>            <span class="hljs-string">&#x27;http://127.0.0.1:8188/inpaint&#x27;</span>,<br>            files=files,<br>            data=data,<br>            timeout=<span class="hljs-number">120</span>      <span class="hljs-comment"># lama-cleaner æ…¢å¯é€‚å½“è°ƒå¤§</span><br>        )<br>        <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(out_path, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f_out:<br>                f_out.write(response.content)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¤„ç†å®Œæˆ: <span class="hljs-subst">&#123;fname&#125;</span>&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¤„ç†å¤±è´¥: <span class="hljs-subst">&#123;fname&#125;</span>, çŠ¶æ€ç : <span class="hljs-subst">&#123;response.status_code&#125;</span>, å“åº”: <span class="hljs-subst">&#123;response.text[:<span class="hljs-number">100</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;å¤„ç†å¼‚å¸¸: <span class="hljs-subst">&#123;fname&#125;</span>, é”™è¯¯: <span class="hljs-subst">&#123;e&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p><strong>é¦–å…ˆè¿è¡Œ</strong></p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">lama</span><span class="hljs-literal">-</span><span class="hljs-comment">cleaner</span> <span class="hljs-literal">--</span><span class="hljs-comment">model lama</span> <span class="hljs-literal">--</span><span class="hljs-comment">host 127</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">.</span><span class="hljs-comment">0</span><span class="hljs-string">.</span><span class="hljs-comment">1</span> <span class="hljs-literal">--</span><span class="hljs-comment">port 8188</span> <span class="hljs-literal">--</span><span class="hljs-comment">debug</span><br></code></pre></td></tr></table></figure><p><strong>æç¤ºå¦‚ä¸‹ä¿¡æ¯å°±ä»£è¡¨æˆåŠŸ</strong></p></blockquote><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs delphi">Running <span class="hljs-keyword">on</span> http:<span class="hljs-comment">//127.0.0.1:8188</span><br>Press CTRL+C <span class="hljs-keyword">to</span> quit<br></code></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œï¼š<strong>python3.10 lama-cleaner.py</strong></p><p><strong>æ‰€æœ‰å»æ‰æ°´å°çš„å›¾ç‰‡éƒ½ä¿å­˜åœ¨ï¼š&#x2F;src&#x2F;weibo&#x2F;rmwatermarks&#x2F;image_nowm&#x2F;</strong></p><hr><h3 id="ä»¥ä¸Šæ˜¯å·²æœ‰æ¨¡å‹è¿›è¡Œçš„å»æ°´å°ï¼Œä¸‹é¢æ˜¯è®­ç»ƒè‡ªå·±çš„å»æ°´å°æ¨¡å‹â¬‡ï¸"><a href="#ä»¥ä¸Šæ˜¯å·²æœ‰æ¨¡å‹è¿›è¡Œçš„å»æ°´å°ï¼Œä¸‹é¢æ˜¯è®­ç»ƒè‡ªå·±çš„å»æ°´å°æ¨¡å‹â¬‡ï¸" class="headerlink" title="ä»¥ä¸Šæ˜¯å·²æœ‰æ¨¡å‹è¿›è¡Œçš„å»æ°´å°ï¼Œä¸‹é¢æ˜¯è®­ç»ƒè‡ªå·±çš„å»æ°´å°æ¨¡å‹â¬‡ï¸"></a>ä»¥ä¸Šæ˜¯å·²æœ‰æ¨¡å‹è¿›è¡Œçš„å»æ°´å°ï¼Œä¸‹é¢æ˜¯è®­ç»ƒè‡ªå·±çš„å»æ°´å°æ¨¡å‹â¬‡ï¸</h3><h3 id="è¯·æ³¨æ„è‡ªå·±çš„è·¯å¾„ï¼Œä»¥ä¸‹æ˜¯å…¨æ–°çš„è·¯å¾„ï¼Œå”¯ç‹¬å…±ç”¨ä¸€ä¸ªvenv"><a href="#è¯·æ³¨æ„è‡ªå·±çš„è·¯å¾„ï¼Œä»¥ä¸‹æ˜¯å…¨æ–°çš„è·¯å¾„ï¼Œå”¯ç‹¬å…±ç”¨ä¸€ä¸ªvenv" class="headerlink" title="è¯·æ³¨æ„è‡ªå·±çš„è·¯å¾„ï¼Œä»¥ä¸‹æ˜¯å…¨æ–°çš„è·¯å¾„ï¼Œå”¯ç‹¬å…±ç”¨ä¸€ä¸ªvenv"></a>è¯·æ³¨æ„è‡ªå·±çš„è·¯å¾„ï¼Œä»¥ä¸‹æ˜¯å…¨æ–°çš„è·¯å¾„ï¼Œå”¯ç‹¬å…±ç”¨ä¸€ä¸ªvenv</h3><h3 id="ä¸‰ã€è®­ç»ƒå»æ°´å°æ¨¡å‹"><a href="#ä¸‰ã€è®­ç»ƒå»æ°´å°æ¨¡å‹" class="headerlink" title="ä¸‰ã€è®­ç»ƒå»æ°´å°æ¨¡å‹"></a>ä¸‰ã€è®­ç»ƒå»æ°´å°æ¨¡å‹</h3><h4 id="Step-1-å‰æè®­ç»ƒæ¨¡å‹å‰ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨ç»™æœ‰æ°´å°çš„å›¾ç‰‡åŠ çŸ©å½¢é€‰åŒºï¼Œè¿™é‡Œæˆ‘æ¨èä»¥ä¸‹ä¸¤æ¬¾å·¥å…·"><a href="#Step-1-å‰æè®­ç»ƒæ¨¡å‹å‰ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨ç»™æœ‰æ°´å°çš„å›¾ç‰‡åŠ çŸ©å½¢é€‰åŒºï¼Œè¿™é‡Œæˆ‘æ¨èä»¥ä¸‹ä¸¤æ¬¾å·¥å…·" class="headerlink" title="Step 1.å‰æè®­ç»ƒæ¨¡å‹å‰ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨ç»™æœ‰æ°´å°çš„å›¾ç‰‡åŠ çŸ©å½¢é€‰åŒºï¼Œè¿™é‡Œæˆ‘æ¨èä»¥ä¸‹ä¸¤æ¬¾å·¥å…·"></a>Step 1.å‰æè®­ç»ƒæ¨¡å‹å‰ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨ç»™æœ‰æ°´å°çš„å›¾ç‰‡åŠ çŸ©å½¢é€‰åŒºï¼Œè¿™é‡Œæˆ‘æ¨èä»¥ä¸‹ä¸¤æ¬¾å·¥å…·</h4><blockquote><p>[!IMPORTANT]</p><p><strong>labelImgæœ¬åœ°</strong></p><p><strong><a href="https://roboflow.com/%E5%9C%A8%E7%BA%BF">https://roboflow.com/åœ¨çº¿</a></strong></p></blockquote><p>è¿™é‡Œæˆ‘é€‰æ‹©<strong>labelImgæœ¬åœ°</strong>è¿›è¡Œç»˜åˆ¶ï¼Œç›®å‰æ–‡ä»¶è·¯å¾„ä¸ºï¼š</p><h5 id="src-weibo-rmwatermarksï¼š"><a href="#src-weibo-rmwatermarksï¼š" class="headerlink" title="src&#x2F;weibo&#x2F;rmwatermarksï¼š"></a>src&#x2F;weibo&#x2F;rmwatermarksï¼š</h5><ul><li>labelImg   ä¸‹è½½åœ°å€ï¼š <a href="https://pan.baidu.com/s/19WwEaa2PM_M_GTnMUsSZSA">https://pan.baidu.com/s/19WwEaa2PM_M_GTnMUsSZSA</a> æå–ç : hui9 </li><li>trainingmodel   è‡ªè¡Œåˆ›å»ºï¼Œæˆ‘è¿™é‡Œè§‰å¾—åˆ†ç±»å¥½æ–¹ä¾¿</li></ul><h5 id="src-weibo-rmwatermarks-trainingmodelï¼š"><a href="#src-weibo-rmwatermarks-trainingmodelï¼š" class="headerlink" title="src&#x2F;weibo&#x2F;rmwatermarks&#x2F;trainingmodelï¼š"></a>src&#x2F;weibo&#x2F;rmwatermarks&#x2F;trainingmodelï¼š</h5><ul><li><p>dataset   è‡ªè¡Œåˆ›å»ºï¼ˆå¿…é¡»ï¼‰</p></li><li><p><strong>train_val.py   è‡ªè¡Œåˆ›å»ºï¼ˆä»£ç å¦‚ä¸‹ï¼‰è¿™æ˜¯ä¸ºäº†åˆ’åˆ†trainå’Œvalå›¾ç‰‡ï¼Œå…ˆä¸è¦è¿è¡Œï¼ï¼ï¼</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> shutil<br><br><span class="hljs-comment"># 1. åŸå§‹æ•°æ®ç›®å½•ï¼Œå›¾ç‰‡å’Œtxtä¸€ä¸€å¯¹åº”ã€éƒ½åœ¨é‡Œé¢</span><br>src_dir = <span class="hljs-string">&#x27;/home/zjh/src/weibo/rmwatermarks/trainingmodel/dataset/datasource&#x27;</span>  <span class="hljs-comment"># ä¿®æ”¹ä¸ºä½ çš„åŸå§‹æ•°æ®ç›®å½•</span><br>dst_dir = <span class="hljs-string">&#x27;/home/zjh/src/weibo/rmwatermarks/trainingmodel/dataset&#x27;</span><br><br><span class="hljs-comment"># 2. è¾“å‡ºç›®å½•ç»“æ„</span><br>images_train = os.path.join(dst_dir, <span class="hljs-string">&#x27;images&#x27;</span>, <span class="hljs-string">&#x27;train&#x27;</span>)<br>images_val = os.path.join(dst_dir, <span class="hljs-string">&#x27;images&#x27;</span>, <span class="hljs-string">&#x27;val&#x27;</span>)<br>labels_train = os.path.join(dst_dir, <span class="hljs-string">&#x27;labels&#x27;</span>, <span class="hljs-string">&#x27;train&#x27;</span>)<br>labels_val = os.path.join(dst_dir, <span class="hljs-string">&#x27;labels&#x27;</span>, <span class="hljs-string">&#x27;val&#x27;</span>)<br><span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> [images_train, images_val, labels_train, labels_val]:<br>    os.makedirs(d, exist_ok=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># 3. è·å–æ‰€æœ‰å›¾ç‰‡ï¼ˆæ”¯æŒjpgã€jpegã€pngï¼‰</span><br>img_exts = (<span class="hljs-string">&#x27;.jpg&#x27;</span>, <span class="hljs-string">&#x27;.jpeg&#x27;</span>, <span class="hljs-string">&#x27;.png&#x27;</span>)<br>imgs = [f <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> os.listdir(src_dir) <span class="hljs-keyword">if</span> f.lower().endswith(img_exts)]<br><br>random.shuffle(imgs)   <span class="hljs-comment"># æ‰“ä¹±é¡ºåº</span><br>val_ratio = <span class="hljs-number">0.2</span>        <span class="hljs-comment"># éªŒè¯é›†æ¯”ä¾‹</span><br>num_val = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(imgs) * val_ratio)<br>val_imgs = imgs[:num_val]<br>train_imgs = imgs[num_val:]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">copy_pair</span>(<span class="hljs-params">imgs, img_dst, label_dst</span>):<br>    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> imgs:<br>        base = os.path.splitext(img)[<span class="hljs-number">0</span>]<br>        img_path = os.path.join(src_dir, img)<br>        label_path = os.path.join(src_dir, base + <span class="hljs-string">&#x27;.txt&#x27;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(label_path):<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;æ ‡ç­¾æ–‡ä»¶ç¼ºå¤±: <span class="hljs-subst">&#123;label_path&#125;</span>ï¼Œè·³è¿‡ã€‚&#x27;</span>)<br>            <span class="hljs-keyword">continue</span><br>        shutil.copy(img_path, os.path.join(img_dst, img))<br>        shutil.copy(label_path, os.path.join(label_dst, base + <span class="hljs-string">&#x27;.txt&#x27;</span>))<br><br>copy_pair(train_imgs, images_train, labels_train)<br>copy_pair(val_imgs, images_val, labels_val)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;åˆ’åˆ†å®Œæˆï¼Œtrain: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(train_imgs)&#125;</span>ï¼Œval: <span class="hljs-subst">&#123;<span class="hljs-built_in">len</span>(val_imgs)&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure></li><li><p>watermark.yaml    è‡ªè¡Œåˆ›å»ºï¼ˆä»£ç å¦‚ä¸‹ï¼‰</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nix"><span class="hljs-params">path:</span> src<span class="hljs-operator">/</span>weibo<span class="hljs-operator">/</span>rmwatermarks<span class="hljs-operator">/</span>trainingmodel<span class="hljs-operator">/</span>dataset<span class="hljs-symbol">/</span><br><span class="hljs-params">train:</span> images<span class="hljs-symbol">/train</span><br><span class="hljs-params">val:</span> images<span class="hljs-symbol">/val</span><br><br><span class="hljs-params">names:</span><br>  <span class="hljs-number">0</span>: watermark<br></code></pre></td></tr></table></figure></li></ul><h5 id="src-weibo-rmwatermarks-trainingmodel-datasetï¼š"><a href="#src-weibo-rmwatermarks-trainingmodel-datasetï¼š" class="headerlink" title="src&#x2F;weibo&#x2F;rmwatermarks&#x2F;trainingmodel&#x2F;datasetï¼š"></a>src&#x2F;weibo&#x2F;rmwatermarks&#x2F;trainingmodel&#x2F;datasetï¼š</h5><ul><li><strong>datasource   è‡ªè¡Œåˆ›å»ºï¼ˆå¿…é¡»ï¼‰åœ¨è¿™é‡Œé¢æ”¾å…¥è¦ç”»çŸ©å½¢çš„æ°´å°å›¾ç‰‡</strong></li><li>images  è‡ªåŠ¨ç”Ÿæˆ</li><li>labels    è‡ªåŠ¨ç”Ÿæˆ</li><li>classes.txt  è‡ªåŠ¨ç”Ÿæˆ</li></ul><h4 id="Step-2-è¿è¡ŒlabelImgå·¥å…·ï¼ˆå¯é€‰venvç¯å¢ƒï¼‰"><a href="#Step-2-è¿è¡ŒlabelImgå·¥å…·ï¼ˆå¯é€‰venvç¯å¢ƒï¼‰" class="headerlink" title="Step 2.è¿è¡ŒlabelImgå·¥å…·ï¼ˆå¯é€‰venvç¯å¢ƒï¼‰"></a>Step 2.è¿è¡ŒlabelImgå·¥å…·ï¼ˆå¯é€‰venvç¯å¢ƒï¼‰</h4><p>å®‰è£…æ‰€éœ€ä¾èµ–</p><blockquote><p>[!TIP]</p><p><strong>æ ¹æ®è‡ªå·±çš„ç³»ç»Ÿæ¥å®‰è£…ï¼ˆå¦‚æœä¸ç”¨venvç¯å¢ƒï¼Œå°±åœ¨ç³»ç»Ÿä¸­å®‰è£…ä»¥ä¸‹å‘½ä»¤ï¼‰ï¼ˆvenvé»˜è®¤å·²ç»å®‰è£…PyQt5çš„ï¼‰</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install pyqt5-dev-tools<br><span class="hljs-built_in">sudo</span> pacman -S python-pyqt5<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p><strong>ä¸Šé¢æˆ‘å·²ç»æ”¾äº†labelImgçš„ä¸‹è½½åœ°å€ï¼Œè§£å‹å‡ºæ¥cd labelImg</strong>ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">pip3.<span class="hljs-number">10</span> install -r requirements/requirements-linux-<span class="hljs-keyword">python3</span>.txt<br><span class="hljs-keyword">python3</span>.<span class="hljs-number">10</span> labelImg.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><p><strong>æ‰“å¼€ç›®å½•ï¼šsrc&#x2F;weibo&#x2F;rmwatermarks&#x2F;trainingmodel&#x2F;dataset&#x2F;images&#x2F;è¿™é‡Œæˆ‘ä»¬å‰é¢å·²ç»äº¤ä»£äº†ï¼Œé€šè¿‡å¦‚ä¸‹å›¾ç‰‡è¿›è¡Œé€‰åŒºä¿å­˜ç­‰</strong></p><p><img src="/img/essay/image-20250722151213314.png" alt="image-20250722151213314"></p><blockquote><p>[!IMPORTANT]</p><p>é€‰åŒºå®Œæˆä¹‹åå¯ä»¥çœ‹åˆ°æˆ‘ä»¬datasourceä¸‹æœ‰å¾ˆå¤šå›¾ç‰‡ä»¥åŠtxtæ–‡ä»¶</p><p>è¿è¡Œtrain_val.pyå°†txtå’Œå›¾ç‰‡åˆ†ç±»å¼€</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">python3</span>.<span class="hljs-number">10</span> train_val.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure><p>ä»¥ä¸‹ä¸¤ç§æ–‡ä»¶å°±ç”Ÿæˆäº†</p></blockquote><ul><li>labels  é‡Œé¢è£…ç€txtæ–‡ä»¶</li><li>images  é‡Œé¢å°±æ˜¯ç”»å¥½é€‰åŒºçš„å›¾ç‰‡</li><li>datasource  è¿™ä¸ªæ•°æ®æºå°±å¯ä»¥åˆ é™¤äº†ï¼Œä¹Ÿå¯ä»¥ä¸åˆ é™¤</li></ul><h4 id="Step-3-æ­£å¼ç¼–å†™æ¨¡å‹ï¼ˆéœ€è¦venvç¯å¢ƒï¼‰"><a href="#Step-3-æ­£å¼ç¼–å†™æ¨¡å‹ï¼ˆéœ€è¦venvç¯å¢ƒï¼‰" class="headerlink" title="Step 3.æ­£å¼ç¼–å†™æ¨¡å‹ï¼ˆéœ€è¦venvç¯å¢ƒï¼‰"></a>Step 3.æ­£å¼ç¼–å†™æ¨¡å‹ï¼ˆéœ€è¦venvç¯å¢ƒï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> venv/bin/activate<br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p><strong>data&#x3D;trainingmodel&#x2F;watermark.yamlæ ¹æ®è‡ªå·±çš„è·¯å¾„æ”¹</strong></p><p>**è¿™é‡Œéœ€è¦ä¸€ä¸ªyolov8n.ptå®˜æ–¹çš„æ¨¡å‹ï¼Œä¸‹è½½é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1fyq6qhjnkglEj4cflSDvjg">https://pan.baidu.com/s/1fyq6qhjnkglEj4cflSDvjg</a> æå–ç : hui9 **</p><p><strong>æŠŠä»–æ”¾åœ¨å’ŒvenvåŒç›®å½•ä¸‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç›®å‰çš„src&#x2F;weibo&#x2F;rmwatermarks&#x2F;ç›®å½•ä¸‹</strong></p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">yolo detect train <span class="hljs-attribute">data</span>=trainingmodel/watermark.yaml <span class="hljs-attribute">model</span>=yolov8n.pt <span class="hljs-attribute">epochs</span>=100 <span class="hljs-attribute">imgsz</span>=640 <span class="hljs-attribute">batch</span>=8<br></code></pre></td></tr></table></figure><p>å‡ºç°ä»¥ä¸‹ç­‰ç­‰ä¿¡æ¯ä»£è¡¨æˆåŠŸï¼Œæ¨¡å‹æ”¾åœ¨<strong>src&#x2F;weibo&#x2F;rmwatermarks&#x2F;runs&#x2F;detect&#x2F;train&#x2F;weights&#x2F;best.pt</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs apache"><br>      <span class="hljs-attribute">Epoch</span>    GPU_mem   box_loss   cls_loss   dfl_loss  Instances       Size<br>    <span class="hljs-attribute">100</span>/<span class="hljs-number">100</span>      <span class="hljs-number">1</span>.<span class="hljs-number">19</span>G     <span class="hljs-number">0</span>.<span class="hljs-number">5884</span>     <span class="hljs-number">0</span>.<span class="hljs-number">7077</span>     <span class="hljs-number">0</span>.<span class="hljs-number">8859</span>          <span class="hljs-number">6</span>        <span class="hljs-number">640</span>: <span class="hljs-number">100</span>%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| <span class="hljs-number">10</span>/<span class="hljs-number">10</span><span class="hljs-meta"> [00:00&lt;00:00, 12.34it/s]</span><br>                 <span class="hljs-attribute">Class</span>     Images  Instances      Box(P          R      mAP50  mAP50-<span class="hljs-number">95</span>): <span class="hljs-number">100</span>%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| <span class="hljs-number">2</span>/<span class="hljs-number">2</span><span class="hljs-meta"> [00:00&lt;00:00, 26.77it</span><br><span class="hljs-meta">                   all         19         19      0.995          1      0.995      0.597</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">100 epochs completed in 0.028 hours.</span><br><span class="hljs-meta">Optimizer stripped from runs/detect/train/weights/last.pt, 6.2MB</span><br><span class="hljs-meta">Optimizer stripped from runs/detect/train/weights/best.pt, 6.2MB</span><br><span class="hljs-meta"></span><br><span class="hljs-meta">Validating runs/detect/train/weights/best.pt...</span><br><span class="hljs-meta">Ultralytics 8.3.169 ğŸš€ Python-3.10.0 torch-2.0.0+cu117 CUDA:0 (NVIDIA GeForce RTX 4070 Laptop GPU, 7781MiB)</span><br><span class="hljs-meta">Model summary (fused): 72 layers, 3,005,843 parameters, 0 gradients, 8.1 GFLOPs</span><br><span class="hljs-meta">                 Class     Images  Instances      Box(P          R      mAP50  mAP50-95): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 2/2 [00:00&lt;00:00, 22.66it</span><br><span class="hljs-meta">                   all         19         19      0.991          1      0.995      0.634</span><br><span class="hljs-meta">Speed: 0.1ms preprocess, 2.8ms inference, 0.0ms loss, 0.4ms postprocess per image</span><br><span class="hljs-meta">Results saved to runs/detect/train</span><br><span class="hljs-meta">ğŸ’¡ Learn more at https://docs.ultralytics.com/modes/train</span><br><span class="hljs-meta"></span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå®‰è£…Stable-Diffusion-WebUIæ›´æ–°ç‰ˆ</title>
    <link href="/2025/08/03/ArchLinux%E5%AE%89%E8%A3%85Stable-Diffusion-WebUI%E6%9B%B4%E6%96%B0%E7%89%88/"/>
    <url>/2025/08/03/ArchLinux%E5%AE%89%E8%A3%85Stable-Diffusion-WebUI%E6%9B%B4%E6%96%B0%E7%89%88/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨ Arch Linux ä¸Šå®‰è£… <strong>Stable Diffusion WebUIï¼ˆAUTOMATIC1111 çš„ sd-webuiï¼‰</strong> å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ æ­¥å®Œæˆã€‚è¿™ä¸ªæ•™ç¨‹å‡è®¾ä½ æœ‰åŸºæœ¬çš„ Arch ä½¿ç”¨ç»éªŒ</p><hr><h3 id="ç¬¬ä¸€æ­¥ï¼šå…ˆå†³æ¡ä»¶"><a href="#ç¬¬ä¸€æ­¥ï¼šå…ˆå†³æ¡ä»¶" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå…ˆå†³æ¡ä»¶"></a>ç¬¬ä¸€æ­¥ï¼šå…ˆå†³æ¡ä»¶</h3><p>ç¡®ä¿ä½ çš„ç³»ç»Ÿä¸­å·²ç»å®‰è£…äº†ä»¥ä¸‹ä¾èµ–é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S git ffmpeg wget unzip<br></code></pre></td></tr></table></figure><p>å¦‚æœä½ ä½¿ç”¨ NVIDIA æ˜¾å¡ï¼Œè¿˜éœ€è¦å®‰è£…ç›¸å…³é©±åŠ¨å’Œ CUDAï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S nvidia nvidia-utils cuda cudnn<br></code></pre></td></tr></table></figure><p>AMD ç”¨æˆ·å¯è·³è¿‡ CUDAï¼Œåªä¿è¯æœ‰ mesa å’Œ rocm ç›¸å…³åŒ…</p><blockquote><p>[!WARNING]</p><h4 id="CUDA-å’Œ-cuDNN-çš„åŒºåˆ«ï¼š"><a href="#CUDA-å’Œ-cuDNN-çš„åŒºåˆ«ï¼š" class="headerlink" title="CUDA å’Œ cuDNN çš„åŒºåˆ«ï¼š"></a>CUDA å’Œ cuDNN çš„åŒºåˆ«ï¼š</h4></blockquote><table><thead><tr><th>åç§°</th><th>å…¨ç§°</th><th>ä½œç”¨</th><th>ä¸¾ä¾‹</th></tr></thead><tbody><tr><td><strong>CUDA</strong></td><td>Compute Unified Device Architecture</td><td>NVIDIA æ¨å‡ºçš„ <strong>é€šç”¨ GPU åŠ é€Ÿå¹³å°</strong>ï¼Œè®©ç¨‹åºèƒ½ç”¨æ˜¾å¡è¿ç®—</td><td>PyTorch ç”¨ CUDA æ¥åŠ é€Ÿ</td></tr><tr><td><strong>cuDNN</strong></td><td>CUDA Deep Neural Network library</td><td>åŸºäº CUDA çš„ <strong>æ·±åº¦å­¦ä¹ åŠ é€Ÿåº“</strong>ï¼Œä¸“é—¨ä¼˜åŒ–ç¥ç»ç½‘ç»œçš„è®¡ç®—ï¼ˆæ›´å¿«ï¼‰</td><td>Stable Diffusion ç”¨ cuDNN æå‡é€Ÿåº¦</td></tr></tbody></table><p> é€šä¿—ç±»æ¯”ï¼š</p><ul><li><strong>CUDA &#x3D; æ˜¾å¡çš„é©±åŠ¨+æ“ä½œç³»ç»Ÿæ¥å£</strong>ï¼Œå°±åƒæ˜¯ç”µè„‘çš„â€œæ˜¾å¡ç³»ç»Ÿâ€</li><li><strong>cuDNN &#x3D; æ·±åº¦å­¦ä¹ ä¸“ç”¨çš„å¤–æŒ‚æ’ä»¶</strong>ï¼ŒåŠ é€Ÿç¥ç»ç½‘ç»œä¸­çš„çŸ©é˜µè¿ç®—ï¼ˆæ¯”å¦‚å·ç§¯ã€åå‘ä¼ æ’­ï¼‰</li></ul><p>ä½ å¯ä»¥ç†è§£ä¸ºï¼š</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">Stable <span class="hljs-keyword">Diffusion </span>â†’ ç”¨ PyTorch â†’ PyTorch ç”¨ CUDA â†’ CUDA ç”¨ cuDNN â†’ æ˜¾å¡ç–¯ç‹‚åŠ é€Ÿè·‘å›¾<br></code></pre></td></tr></table></figure><ul><li>nvidia â†’ æ˜¾å¡é©±åŠ¨</li><li>nvidia-utils â†’ åŸºç¡€å·¥å…·ï¼ˆæ¯”å¦‚ nvidia-smiï¼‰</li><li>cuda â†’ CUDA å·¥å…·åŒ…ï¼ˆå¸¦ nvcc ç¼–è¯‘å™¨ï¼‰</li><li>cudnn â†’ cuDNN åº“ï¼ˆä¸“é—¨ç»™ AI åŠ é€Ÿç”¨ï¼‰</li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šPython-é€‰æ‹©"><a href="#ç¬¬äºŒæ­¥ï¼šPython-é€‰æ‹©" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šPython é€‰æ‹©"></a>ç¬¬äºŒæ­¥ï¼šPython é€‰æ‹©</h3><p>ç¡®ä¿ä½¿ç”¨çš„æ˜¯ Python 3.11ã€‚WebUI ä¸å…¼å®¹ 3.12</p><ol><li><p>å¦‚æœä¸æ˜¯éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mkdir</span> -p ~/src &amp;&amp; cd ~/src<br><span class="hljs-attribute">wget</span> https://www.python.org/ftp/python/<span class="hljs-number">3</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span>/Python-<span class="hljs-number">3</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span>.tgz<br><span class="hljs-attribute">tar</span> -xzf Python-<span class="hljs-number">3</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span>.tgz<br><span class="hljs-attribute">cd</span> Python-<span class="hljs-number">3</span>.<span class="hljs-number">11</span>.<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure></li><li><p>é…ç½®å®‰è£…è·¯å¾„ï¼ˆä¸ä¼šè¦†ç›–ç³»ç»Ÿçš„ pythonï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">./configure --prefix=<span class="hljs-variable">$HOME</span>/src/python311 --enable-optimizations<br>make -j$(<span class="hljs-built_in">nproc</span>)<br>make install<br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>å®‰è£…è·¯å¾„åœ¨~&#x2F;src&#x2F;python311&#x2F;bin&#x2F;python3.11</p><p>make -j &lt;ä½  CPU çš„æ ¸å¿ƒæ•°é‡&gt;</p><ul><li><p>makeæ˜¯ç”¨äºæ ¹æ® Makefile ç¼–è¯‘æºç çš„å‘½ä»¤ï¼ˆå¤§å¤šæ•° C&#x2F;C++ é¡¹ç›®ç”¨å®ƒæ¥æ„å»ºï¼‰</p></li><li><p>-jè¡¨ç¤ºã€Œå¹¶è¡Œç¼–è¯‘ã€ï¼ŒåŠ å¿«é€Ÿåº¦ã€‚</p></li><li><p>$(nproc)æ˜¯ä¸€ä¸ª Shell å‘½ä»¤ï¼Œè¿”å›å½“å‰ CPU çš„æ ¸å¿ƒæ•°ã€‚æ¯”å¦‚ï¼š8</p></li><li><p>å¯ä»¥å°†æ–°å®‰è£…çš„PythonåŠ å…¥PATHå˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"> vim ~/.bashrc<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$HOME</span>/src/python311/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure></li></ul></blockquote></li></ol><h3 id="ç¬¬ä¸‰æ­¥ï¼šå…‹éš†-sd-webui-é¡¹ç›®"><a href="#ç¬¬ä¸‰æ­¥ï¼šå…‹éš†-sd-webui-é¡¹ç›®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå…‹éš† sd-webui é¡¹ç›®"></a>ç¬¬ä¸‰æ­¥ï¼šå…‹éš† sd-webui é¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/AUTOMATIC1111/stable-diffusion-webui.git<br><span class="hljs-built_in">cd</span> stable-diffusion-webui<br></code></pre></td></tr></table></figure><h3 id="ç¬¬å››æ­¥ï¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰"><a href="#ç¬¬å››æ­¥ï¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰" class="headerlink" title="ç¬¬å››æ­¥ï¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰"></a>ç¬¬å››æ­¥ï¼šä¸‹è½½æ¨¡å‹æ–‡ä»¶ï¼ˆå¿…é¡»ï¼‰</h3><p>Stable Diffusion çš„æ ¸å¿ƒæ¨¡å‹éœ€è¦æ‰‹åŠ¨ä¸‹è½½ï¼Œæ¯”å¦‚ï¼š</p><ol><li>ä¸‹è½½ v1.5 æ¨¡å‹</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd models/Stable-diffusion<br>wget https:<span class="hljs-regexp">//</span>huggingface.co<span class="hljs-regexp">/runwayml/</span>stable-diffusion-v1-<span class="hljs-number">5</span><span class="hljs-regexp">/resolve/m</span>ain/v1-<span class="hljs-number">5</span>-pruned-emaonly.safetensors<br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æ¢å…¶ä»– <code>.ckpt</code> æˆ– <code>.safetensors</code> æ¨¡å‹ã€‚</p><h3 id="ç¬¬äº”æ­¥ï¼šä½¿ç”¨è¿™ä¸ª3-11-0ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"><a href="#ç¬¬äº”æ­¥ï¼šä½¿ç”¨è¿™ä¸ª3-11-0ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ" class="headerlink" title="ç¬¬äº”æ­¥ï¼šä½¿ç”¨è¿™ä¸ª3.11.0ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"></a>ç¬¬äº”æ­¥ï¼šä½¿ç”¨è¿™ä¸ª3.11.0ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h3><p>è¿›å…¥ stable-diffusion-webui ç›®å½•åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">python3.11 -m venv venv<br><span class="hljs-built_in">source</span> venv/bin/activate<br></code></pre></td></tr></table></figure><h3 id="ç¬¬å…­æ­¥ï¼šè¡¥å…¨ä¾èµ–"><a href="#ç¬¬å…­æ­¥ï¼šè¡¥å…¨ä¾èµ–" class="headerlink" title="ç¬¬å…­æ­¥ï¼šè¡¥å…¨ä¾èµ–"></a>ç¬¬å…­æ­¥ï¼šè¡¥å…¨ä¾èµ–</h3><ol><li><p>å…ˆå®‰è£… CUDA 12.1 ç‰ˆæœ¬çš„ torch&#x2F;torchvision</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip3</span>.<span class="hljs-number">11</span> install torch==<span class="hljs-number">2</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span>+cu121 torchvision==<span class="hljs-number">0</span>.<span class="hljs-number">16</span>.<span class="hljs-number">2</span>+cu121 --extra-index-url https://download.pytorch.org/whl/cu121<br></code></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹requirements.txt</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">GitPython</span>&gt;=<span class="hljs-number">3</span>.<span class="hljs-number">1</span>.<span class="hljs-number">30</span><br><span class="hljs-attribute">Pillow</span>&gt;=<span class="hljs-number">9</span>.<span class="hljs-number">4</span>.<span class="hljs-number">0</span>,&lt;<span class="hljs-number">11</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">accelerate</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">18</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">blendmodes</span>&gt;=<span class="hljs-number">2022</span>.<span class="hljs-number">9</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">clean</span>-fid&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">35</span><br><span class="hljs-attribute">diskcache</span>&gt;=<span class="hljs-number">5</span>.<span class="hljs-number">6</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">einops</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">6</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">facexlib</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">fastapi</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">90</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">gradio</span>==<span class="hljs-number">3</span>.<span class="hljs-number">41</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">inflection</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">5</span>.<span class="hljs-number">1</span><br><span class="hljs-attribute">jsonmerge</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">8</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">kornia</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">6</span>.<span class="hljs-number">8</span><br><span class="hljs-attribute">lark</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">numpy</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">23</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">omegaconf</span>&gt;=<span class="hljs-number">2</span>.<span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">open</span>-clip-torch&gt;=<span class="hljs-number">2</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">piexif</span>&gt;=<span class="hljs-number">1</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">protobuf</span>==<span class="hljs-number">3</span>.<span class="hljs-number">20</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">psutil</span>&gt;=<span class="hljs-number">5</span>.<span class="hljs-number">9</span>.<span class="hljs-number">4</span><br><span class="hljs-attribute">pytorch_lightning</span>&gt;=<span class="hljs-number">2</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span><br><span class="hljs-attribute">requests</span>&gt;=<span class="hljs-number">2</span>.<span class="hljs-number">28</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">resize</span>-right&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">safetensors</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span><br><span class="hljs-attribute">scikit</span>-image&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">19</span><br><span class="hljs-attribute">tomesd</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">1</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">torchdiffeq</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">torchsde</span>&gt;=<span class="hljs-number">0</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span><br><span class="hljs-attribute">transformers</span>==<span class="hljs-number">4</span>.<span class="hljs-number">30</span>.<span class="hljs-number">2</span><br><span class="hljs-attribute">pillow</span>-avif-plugin==<span class="hljs-number">1</span>.<span class="hljs-number">4</span>.<span class="hljs-number">3</span><br><span class="hljs-attribute">xformers</span>==<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">23</span><br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…ä¾èµ–</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip3</span>.<span class="hljs-number">11</span> install -r requirements.txt<br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>socksio å¦‚æœä½ æœ‰shellä»£ç†å°±éœ€è¦å®‰è£…ï¼ˆå¯è·³è¿‡ï¼‰</p><p>bc æ²¡æœ‰çš„è¯shellè„šæœ¬é‡Œçš„æµ®ç‚¹è¿ç®—ä¹Ÿä¼šå‡ºé”™ï¼ˆä¸åŒç³»ç»Ÿå®‰è£…ä¹Ÿä¸ä¸€æ ·ï¼ŒæŒ‰éœ€å®‰è£…ï¼‰</p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip3</span>.<span class="hljs-number">11</span> install socksio<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S bc<br><span class="hljs-built_in">sudo</span> apt install bc<br></code></pre></td></tr></table></figure></li></ol><h3 id="ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨webui"><a href="#ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨webui" class="headerlink" title="ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨webui"></a>ç¬¬ä¸ƒæ­¥ï¼šå¯åŠ¨webui</h3><p>ç¬¬ä¸€æ¬¡è¿è¡Œä¸»è„šæœ¬éœ€è¦ä¸‹è½½å¾ˆå¤šä¾èµ–æ–‡ä»¶ï¼Œè¿™é‡Œéœ€è¦ç§‘å­¦ä¸Šç½‘æ‰è¡Œ</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./webui.sh</span> <span class="hljs-params">--xformers</span><br></code></pre></td></tr></table></figure><blockquote><p>[!CAUTION]</p><p><strong>proxychains</strong> æ˜¯æˆ‘çš„ç»ˆç«¯ä»£ç†ç¨‹åºï¼Œè¿™ä¸ªéœ€è¦å¦å¤–è®¾ç½®</p><p><strong>â€“xformers</strong> æ˜¯å¯åŠ¨ Stable Diffusion WebUI çš„åŠ é€Ÿå‚æ•°ï¼Œè®© WebUI ä½¿ç”¨ xformers è¿™ä¸ªåº“æ¥æå‡ç”Ÿæˆé€Ÿåº¦ã€å‡å°‘æ˜¾å­˜å ç”¨ï¼ˆå°¤å…¶æ˜¯åœ¨é«˜åˆ†è¾¨ç‡&#x2F;å¤šå›¾åœºæ™¯ä¸‹ï¼‰</p></blockquote><p>å¦‚æœä½¿ç”¨ NVIDIA æ˜¾å¡ï¼Œé»˜è®¤ä¼šå¯ç”¨ CUDAã€‚AMD ç”¨æˆ·å¯åŠ ä¸Šå‚æ•°ï¼š</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-string">./webui.sh</span> <span class="hljs-params">--skip-torch-cuda-test</span> <span class="hljs-params">--precision</span> full <span class="hljs-params">--no-half</span><br></code></pre></td></tr></table></figure><p>æ‰€æœ‰ä¾èµ–éƒ½ä¸‹è½½å®Œæˆä¹‹åï¼Œéœ€è¦å†æ¬¡è¿è¡Œ.&#x2F;webui.shï¼Œä½†è¿™é‡Œå°±ä¸éœ€è¦proxychainsä»£ç†ç¨‹åºäº†</p><h3 id="ç¬¬å…«æ­¥ï¼šè®¿é—®-WebUI"><a href="#ç¬¬å…«æ­¥ï¼šè®¿é—®-WebUI" class="headerlink" title="ç¬¬å…«æ­¥ï¼šè®¿é—® WebUI"></a>ç¬¬å…«æ­¥ï¼šè®¿é—® WebUI</h3><p>é»˜è®¤ç›‘å¬åœ°å€æ˜¯ï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">http:</span><span class="hljs-comment">//127.0.0.1:7860</span><br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®å®ƒ</p><h3 id="ç¬¬ä¹æ­¥ï¼šé€€å‡º"><a href="#ç¬¬ä¹æ­¥ï¼šé€€å‡º" class="headerlink" title="ç¬¬ä¹æ­¥ï¼šé€€å‡º"></a>ç¬¬ä¹æ­¥ï¼šé€€å‡º</h3><ul><li>æŒ‰é”®ç›˜ï¼š<strong>CTRL+C</strong></li><li>è¾“å…¥ï¼š<strong>deactivate</strong>ï¼Œå³å¯é€€å‡ºvenvå‘½ä»¤</li><li>æœ€åï¼š<strong>cd</strong>é€€å‡ºæ•´ä¸ªç›®å½•</li></ul>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå®‰è£…KVM</title>
    <link href="/2025/07/04/arch%E5%AE%89%E8%A3%85KVM%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    <url>/2025/07/04/arch%E5%AE%89%E8%A3%85KVM%E8%99%9A%E6%8B%9F%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Archå®‰è£…Kvmï¼ˆå¿…å¤‡ä¾èµ–ï¼‰"><a href="#Archå®‰è£…Kvmï¼ˆå¿…å¤‡ä¾èµ–ï¼‰" class="headerlink" title="Archå®‰è£…Kvmï¼ˆå¿…å¤‡ä¾èµ–ï¼‰"></a>Archå®‰è£…Kvmï¼ˆå¿…å¤‡ä¾èµ–ï¼‰</h3><ul><li>qemu â†’ æ ¸å¿ƒè™šæ‹ŸåŒ–å¼•æ“</li><li>virt-manager â†’ GUI ç®¡ç†å·¥å…·</li><li>virt-viewer â†’ è½»é‡æ˜¾ç¤ºå®¢æˆ·ç«¯</li><li>dnsmasq â†’ DHCP&#x2F;DNSï¼Œç»™è™šæ‹Ÿæœºåˆ†é…å†…ç½‘ IP</li><li>vde2 â†’ è™šæ‹Ÿäº¤æ¢æœºï¼ˆè™šæ‹Ÿä»¥å¤ªç½‘æ”¯æŒï¼‰</li><li>bridge-utils â†’ é…ç½® Linux ç½‘ç»œæ¡¥æ¥ï¼ˆè™šæ‹Ÿæœºå’Œç‰©ç†ç½‘ç»œç›´è¿ï¼‰</li><li>openbsd-netcat â†’ ç½‘ç»œè°ƒè¯•&#x2F;è½¬å‘å·¥å…·</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S qemu virt-manager virt-viewer dnsmasq vde2 bridge-utils openbsd-netcat<br></code></pre></td></tr></table></figure><blockquote><p>[!TIP]</p><p>æœ‰ 5 ä¸ªè½¯ä»¶åŒ…å¯æä¾› qemu ï¼š</p><p>è½¯ä»¶ä»“åº“ extraï¼š</p><blockquote><p>qemu-baseã€qemu-desktopã€qemu-full</p></blockquote><p>è½¯ä»¶ä»“åº“ archlinuxcnï¼š</p><blockquote><p>qemu-gitã€qemu-headless-git</p></blockquote><p>è¾“å…¥æŸä¸ªæ•°å­— ( é»˜è®¤&#x3D;1 ): è¿™é‡Œæ¨èï¼šqemu-desktopï¼ˆè¾“å…¥å¯¹åº”çš„æ•°å­—å³å¯ï¼‰</p></blockquote><h2 id="å¼€å¯æœåŠ¡"><a href="#å¼€å¯æœåŠ¡" class="headerlink" title="å¼€å¯æœåŠ¡"></a>å¼€å¯æœåŠ¡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now libvirtd.service <br></code></pre></td></tr></table></figure><h2 id="å°†æ™®é€šç”¨æˆ·æ·»åŠ è¿›ç»„"><a href="#å°†æ™®é€šç”¨æˆ·æ·»åŠ è¿›ç»„" class="headerlink" title="å°†æ™®é€šç”¨æˆ·æ·»åŠ è¿›ç»„"></a>å°†æ™®é€šç”¨æˆ·æ·»åŠ è¿›ç»„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> usermod -aG libvirt $(<span class="hljs-built_in">whoami</span>)<br></code></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹ç”¨æˆ·éƒ½åœ¨é‚£äº›ç»„"><a href="#æŸ¥çœ‹ç”¨æˆ·éƒ½åœ¨é‚£äº›ç»„" class="headerlink" title="æŸ¥çœ‹ç”¨æˆ·éƒ½åœ¨é‚£äº›ç»„"></a>æŸ¥çœ‹ç”¨æˆ·éƒ½åœ¨é‚£äº›ç»„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">groups</span> zjh<br></code></pre></td></tr></table></figure><h2 id="kvmå®‰è£…windows11å‡ºç°ä¸æ»¡è¶³ç³»ç»Ÿè¦æ±‚æ—¶"><a href="#kvmå®‰è£…windows11å‡ºç°ä¸æ»¡è¶³ç³»ç»Ÿè¦æ±‚æ—¶" class="headerlink" title="kvmå®‰è£…windows11å‡ºç°ä¸æ»¡è¶³ç³»ç»Ÿè¦æ±‚æ—¶"></a>kvmå®‰è£…windows11å‡ºç°ä¸æ»¡è¶³ç³»ç»Ÿè¦æ±‚æ—¶</h2><ul><li>åœ¨è™šæ‹Ÿæœºä¸­æŒ‰ä½å¿«æ·é”®Shift+F10æ‰“å¼€ç»ˆç«¯ç•Œé¢</li><li>è¾“å…¥regeditæ‰“å¼€æ³¨å†Œè¡¨</li><li>åœ¨HKEY_LOCAL_MACHINE\SYSTEM\Setupå³å‡»æ–°å»ºä¸€ä¸ªé¡¹ï¼Œå‘½åä¸ºLabConfig</li><li>åœ¨è¯¥é¡¹å³å‡»æ–°å»ºä¸‰ä¸ªDWORD (32ä½) å€¼ï¼Œåˆ†åˆ«å‘½åä¸ºBypassTPMCheckã€BypassRAMCheckã€BypassSecureBootCheckï¼Œå¹¶å°†è¿™ä¸‰ä¸ªå€¼éƒ½è®¾ç½®ä¸º1</li></ul><h2 id="windows11è·³è¿‡è”ç½‘æ¿€æ´»"><a href="#windows11è·³è¿‡è”ç½‘æ¿€æ´»" class="headerlink" title="windows11è·³è¿‡è”ç½‘æ¿€æ´»"></a>windows11è·³è¿‡è”ç½‘æ¿€æ´»</h2><ul><li>åœ¨è”ç½‘ç•Œé¢æŒ‰ã€Shift+F10ã€‘æˆ–ã€Shift+Fn+F10ã€‘ï¼Œå¼¹å‡ºå‘½ä»¤æç¤ºç¬¦çª—å£ </li><li>åœ¨å‘½ä»¤æç¤ºç¬¦çª—å£ä¸­è¾“å…¥ï¼šOOBE\BYPASSNROï¼Œæ•²å›è½¦ç”µè„‘é‡å¯ </li><li>å†æ¬¡å›åˆ°è¿æ¥ç½‘ç»œç•Œé¢ï¼Œç‚¹å‡»â€œæˆ‘æ²¡æœ‰Internetè¿æ¥â€å³å¯ </li><li>æ¥ç€ç‚¹å‡»â€œç»§ç»­æ‰§è¡Œå—é™è®¾ç½®â€å³å¯</li><li>å®‰è£…win11çš„æ—¶å€™å°½é‡å°†ç½‘å¡ç§»é™¤çœå¾—æ›´æ–°æ…¢</li><li>è¿›å…¥win11ä¹‹åå°†CDROMæ¢æˆvirtio-winï¼Œwin11ç³»ç»Ÿå®‰è£…å³å¯</li></ul><h2 id="å½“windowsæœ‰æ—¶å¯åŠ¨æ—¶å‡ºé”™-Requested-operation-is-not-valid-network-â€˜defaultâ€™-is-not-active"><a href="#å½“windowsæœ‰æ—¶å¯åŠ¨æ—¶å‡ºé”™-Requested-operation-is-not-valid-network-â€˜defaultâ€™-is-not-active" class="headerlink" title="å½“windowsæœ‰æ—¶å¯åŠ¨æ—¶å‡ºé”™: Requested operation is not valid: network â€˜defaultâ€™ is not active"></a>å½“windowsæœ‰æ—¶å¯åŠ¨æ—¶å‡ºé”™: Requested operation is not valid: network â€˜defaultâ€™ is not active</h2><blockquote><p>æ„æ€æ˜¯ï¼šè™šæ‹Ÿæœºå°è¯•å¯åŠ¨æ—¶ï¼Œä½¿ç”¨çš„ç½‘ç»œï¼ˆåç§°ä¸º defaultï¼‰å½“å‰æœªæ¿€æ´»</p></blockquote><h4 id="æ–¹æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ä¸­æ¿€æ´»é»˜è®¤ç½‘ç»œ"><a href="#æ–¹æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ä¸­æ¿€æ´»é»˜è®¤ç½‘ç»œ" class="headerlink" title="æ–¹æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ä¸­æ¿€æ´»é»˜è®¤ç½‘ç»œ"></a>æ–¹æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ä¸­æ¿€æ´»é»˜è®¤ç½‘ç»œ</h4><p>æ‰“å¼€ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¿€æ´»é»˜è®¤ç½‘ç»œï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">sudo virsh <span class="hljs-built_in">net</span>-<span class="hljs-built_in">start</span> default<br></code></pre></td></tr></table></figure><p>è®¾ç½®é»˜è®¤ç½‘ç»œå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼ˆå¯é€‰ï¼‰ï¼š</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">sudo virsh net-autostart <span class="hljs-keyword">default</span><br></code></pre></td></tr></table></figure><p>å–æ¶ˆè‡ªå¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> virsh net-autostart --<span class="hljs-built_in">disable</span> default<br></code></pre></td></tr></table></figure><h4 id="æ–¹æ³•äºŒï¼šæ£€æŸ¥-libvirtd-æœåŠ¡çŠ¶æ€"><a href="#æ–¹æ³•äºŒï¼šæ£€æŸ¥-libvirtd-æœåŠ¡çŠ¶æ€" class="headerlink" title="æ–¹æ³•äºŒï¼šæ£€æŸ¥ libvirtd æœåŠ¡çŠ¶æ€"></a>æ–¹æ³•äºŒï¼šæ£€æŸ¥ libvirtd æœåŠ¡çŠ¶æ€</h4><p>æœ‰æ—¶æ˜¯å› ä¸ºlibvirtdæ²¡æœ‰æ­£å¸¸è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl start libvirtd<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> libvirtd<br></code></pre></td></tr></table></figure><h4 id="æ–¹æ³•ä¸‰ï¼šå¦‚æœç½‘ç»œé…ç½®ä¸¢å¤±ï¼ˆdefault-ç½‘ç»œä¸å­˜åœ¨ï¼‰"><a href="#æ–¹æ³•ä¸‰ï¼šå¦‚æœç½‘ç»œé…ç½®ä¸¢å¤±ï¼ˆdefault-ç½‘ç»œä¸å­˜åœ¨ï¼‰" class="headerlink" title="æ–¹æ³•ä¸‰ï¼šå¦‚æœç½‘ç»œé…ç½®ä¸¢å¤±ï¼ˆdefault ç½‘ç»œä¸å­˜åœ¨ï¼‰"></a>æ–¹æ³•ä¸‰ï¼šå¦‚æœç½‘ç»œé…ç½®ä¸¢å¤±ï¼ˆdefault ç½‘ç»œä¸å­˜åœ¨ï¼‰</h4><p>ä½ å¯ä»¥é‡æ–°å®šä¹‰ default ç½‘ç»œï¼š</p><p>åˆ›å»ºä¸€ä¸ªåä¸º default.xml çš„é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">network</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>default<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">bridge</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#x27;virbr0&#x27;</span> <span class="hljs-attr">stp</span>=<span class="hljs-string">&#x27;on&#x27;</span> <span class="hljs-attr">delay</span>=<span class="hljs-string">&#x27;0&#x27;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">forward</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">&#x27;nat&#x27;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ip</span> <span class="hljs-attr">address</span>=<span class="hljs-string">&#x27;192.168.122.1&#x27;</span> <span class="hljs-attr">netmask</span>=<span class="hljs-string">&#x27;255.255.255.0&#x27;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dhcp</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">range</span> <span class="hljs-attr">start</span>=<span class="hljs-string">&#x27;192.168.122.2&#x27;</span> <span class="hljs-attr">end</span>=<span class="hljs-string">&#x27;192.168.122.254&#x27;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dhcp</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ip</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">network</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ç„¶åå¯¼å…¥å¹¶å¯åŠ¨å®ƒï¼š</p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">sudo virsh net-<span class="hljs-keyword">define</span> <span class="hljs-keyword">default</span>.xml<br></code></pre></td></tr></table></figure><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">sudo virsh <span class="hljs-built_in">net</span>-<span class="hljs-built_in">start</span> default<br></code></pre></td></tr></table></figure><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">sudo virsh net-autostart <span class="hljs-keyword">default</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå®‰è£…Fcitx5+ä¸‡è±¡æ‹¼éŸ³</title>
    <link href="/2025/07/03/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEfcitx5/"/>
    <url>/2025/07/03/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEfcitx5/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="archå®‰è£…Fcitx5"><a href="#archå®‰è£…Fcitx5" class="headerlink" title="archå®‰è£…Fcitx5"></a>archå®‰è£…Fcitx5</h1><h4 id="å®‰è£…fcitx5-imæ­¤åŒ…ç»„æä¾›fcitx5æœ¬ä½“ä»¥åŠfcitx5-qtã€fcitx5-gtkã€fcitx5-configtoolç­‰"><a href="#å®‰è£…fcitx5-imæ­¤åŒ…ç»„æä¾›fcitx5æœ¬ä½“ä»¥åŠfcitx5-qtã€fcitx5-gtkã€fcitx5-configtoolç­‰" class="headerlink" title="å®‰è£…fcitx5-imæ­¤åŒ…ç»„æä¾›fcitx5æœ¬ä½“ä»¥åŠfcitx5-qtã€fcitx5-gtkã€fcitx5-configtoolç­‰"></a>å®‰è£…fcitx5-imæ­¤åŒ…ç»„æä¾›fcitx5æœ¬ä½“ä»¥åŠfcitx5-qtã€fcitx5-gtkã€fcitx5-configtoolç­‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S fcitx5-im<br></code></pre></td></tr></table></figure><h4 id="å®‰è£…è¯æ±‡fcitx5-pinyin-zhwikiåŒ…ï¼Œæ˜¯ç”±felixonmars-æ ¹æ®ä¸­æ–‡ç»´åŸºç™¾ç§‘åˆ›å»ºçš„è¯åº“ã€‚é€‚ç”¨äº-æ‹¼éŸ³è¾“å…¥æ³•"><a href="#å®‰è£…è¯æ±‡fcitx5-pinyin-zhwikiåŒ…ï¼Œæ˜¯ç”±felixonmars-æ ¹æ®ä¸­æ–‡ç»´åŸºç™¾ç§‘åˆ›å»ºçš„è¯åº“ã€‚é€‚ç”¨äº-æ‹¼éŸ³è¾“å…¥æ³•" class="headerlink" title="å®‰è£…è¯æ±‡fcitx5-pinyin-zhwikiåŒ…ï¼Œæ˜¯ç”±felixonmars æ ¹æ®ä¸­æ–‡ç»´åŸºç™¾ç§‘åˆ›å»ºçš„è¯åº“ã€‚é€‚ç”¨äº æ‹¼éŸ³è¾“å…¥æ³•"></a>å®‰è£…è¯æ±‡fcitx5-pinyin-zhwikiåŒ…ï¼Œæ˜¯ç”±felixonmars æ ¹æ®ä¸­æ–‡ç»´åŸºç™¾ç§‘åˆ›å»ºçš„è¯åº“ã€‚é€‚ç”¨äº æ‹¼éŸ³è¾“å…¥æ³•</h4><h4 id="å®‰è£…ä¸»é¢˜fcitx5-material-coloråŒ…ï¼Œæä¾›äº†ç±»ä¼¼å¾®è½¯æ‹¼éŸ³çš„å¤–è§‚"><a href="#å®‰è£…ä¸»é¢˜fcitx5-material-coloråŒ…ï¼Œæä¾›äº†ç±»ä¼¼å¾®è½¯æ‹¼éŸ³çš„å¤–è§‚" class="headerlink" title="å®‰è£…ä¸»é¢˜fcitx5-material-coloråŒ…ï¼Œæä¾›äº†ç±»ä¼¼å¾®è½¯æ‹¼éŸ³çš„å¤–è§‚"></a>å®‰è£…ä¸»é¢˜fcitx5-material-coloråŒ…ï¼Œæä¾›äº†ç±»ä¼¼å¾®è½¯æ‹¼éŸ³çš„å¤–è§‚</h4><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima">sudo pacman -S fcitx5-<span class="hljs-built_in">chinese</span> fcitx5-pinyin-zhwiki fcitx5-material-<span class="hljs-built_in">color</span><br></code></pre></td></tr></table></figure><h4 id="ç¼–è¾‘-etc-environment-å¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼Œç„¶åé‡æ–°ç™»å½•"><a href="#ç¼–è¾‘-etc-environment-å¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼Œç„¶åé‡æ–°ç™»å½•" class="headerlink" title="ç¼–è¾‘ &#x2F;etc&#x2F;environment å¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼Œç„¶åé‡æ–°ç™»å½•"></a>ç¼–è¾‘ &#x2F;etc&#x2F;environment å¹¶æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼Œç„¶åé‡æ–°ç™»å½•</h4><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">GTK_IM_MODULE</span>=fcitx5<br><span class="hljs-attr">QT_IM_MODULE</span>=fcitx5<br><span class="hljs-attr">XMODIFIERS</span>=@im=fcitx5<br><span class="hljs-attr">SDL_IM_MODULE</span>=fcitx5<br><span class="hljs-attr">INPUT_METHOD</span>=fcitx5<br><span class="hljs-attr">GLFW_IM_MODULE</span>=fcitx5<br></code></pre></td></tr></table></figure><h4 id="æ·»åŠ fcitx5ä¸»é¢˜"><a href="#æ·»åŠ fcitx5ä¸»é¢˜" class="headerlink" title="æ·»åŠ fcitx5ä¸»é¢˜"></a>æ·»åŠ fcitx5ä¸»é¢˜</h4><blockquote><p>å°†ä¸»é¢˜æ”¾åœ¨å¦‚ä¸‹ç›®å½•ä¸­ï¼Œè®¾ç½®ä¸»é¢˜å‰å¾€ Fcitx5è®¾ç½® -&gt; é…ç½®é™„åŠ ç»„ä»¶ -&gt; ç»å…¸ç”¨æˆ·ç•Œé¢ -&gt; ä¸»é¢˜ </p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/fcitx5/</span>themes/<br></code></pre></td></tr></table></figure><p>é‡å¯å³å¯</p><h1 id="ä¸‡è±¡æ‹¼éŸ³ä½¿ç”¨é…ç½®ï¼ˆéœ€å®Œæˆä¸Šé¢çš„é…ç½®ï¼‰"><a href="#ä¸‡è±¡æ‹¼éŸ³ä½¿ç”¨é…ç½®ï¼ˆéœ€å®Œæˆä¸Šé¢çš„é…ç½®ï¼‰" class="headerlink" title="ä¸‡è±¡æ‹¼éŸ³ä½¿ç”¨é…ç½®ï¼ˆéœ€å®Œæˆä¸Šé¢çš„é…ç½®ï¼‰"></a>ä¸‡è±¡æ‹¼éŸ³ä½¿ç”¨é…ç½®ï¼ˆéœ€å®Œæˆä¸Šé¢çš„é…ç½®ï¼‰</h1><p>å®‰è£…fcitx5-rimeç­‰ä¾èµ–</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S librime fcitx5-rime <br></code></pre></td></tr></table></figure><p>åœ¨GitHubä¸­ä¸‹è½½<a href="https://github.com/amzxyz/rime_wanxiang%E7%A8%8B%E5%BA%8F%E5%8C%85%E3%80%82%E5%B0%86%E5%85%B6%E6%94%BE%E5%9C%A8%E5%A6%82%E4%B8%8B%E8%B7%AF%E5%BE%84">https://github.com/amzxyz/rime_wanxiangç¨‹åºåŒ…ã€‚å°†å…¶æ”¾åœ¨å¦‚ä¸‹è·¯å¾„</a></p><blockquote><p>[!TIP]</p><p>å¦‚æœè·¯å¾„ä¸­æœ‰å…¶ä»–æ–‡ä»¶ï¼Œå°†å…¶åˆ é™¤</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/home/</span>zjh<span class="hljs-regexp">/.local/</span>share<span class="hljs-regexp">/fcitx5/</span>rime/<br></code></pre></td></tr></table></figure><blockquote><p>[!TIP]</p><p>dictså­˜æ”¾ç€è¯æ±‡æ¨¡å‹</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/home/</span>zjh<span class="hljs-regexp">/.local/</span>share<span class="hljs-regexp">/fcitx5/</span>rime<span class="hljs-regexp">/dicts/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»£ç†è½¯ä»¶é…ç½®</title>
    <link href="/2025/06/02/arch%E4%BB%A3%E7%90%86%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/"/>
    <url>/2025/06/02/arch%E4%BB%A3%E7%90%86%E8%BD%AF%E4%BB%B6%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é€‚ç”¨äºå¤§å¤šæ•° Linux ç³»ç»Ÿï¼ŒArchã€Debianã€Ubuntu éƒ½å¯ä»¥å‚è€ƒï¼Œè¿™é‡Œåªåšç®€å•é…ç½®ï¼Œä¸è®¾ç½®é™æ€ä»£ç†ã€ç³»ç»Ÿä»£ç†ã€shellä»£ç†ç­‰ç­‰</p><h1 id="V2ray"><a href="#V2ray" class="headerlink" title="V2ray"></a>V2ray</h1><h3 id="1-ä¸‹è½½-v2ray-æœ€æ–°ç‰ˆæœ¬"><a href="#1-ä¸‹è½½-v2ray-æœ€æ–°ç‰ˆæœ¬" class="headerlink" title="1. ä¸‹è½½ v2ray æœ€æ–°ç‰ˆæœ¬"></a>1. ä¸‹è½½ v2ray æœ€æ–°ç‰ˆæœ¬</h3><p>å»å®˜ç½‘ä¸‹è½½ v2ray-core çš„å‹ç¼©åŒ…ï¼Œæ¯”å¦‚æœ€æ–°ç‰ˆä¸€èˆ¬æ˜¯<strong>v2ray-linux-64.zip</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨å‘½ä»¤ç›´æ¥ä¸‹è½½</p><p><strong>è·å–æœ€æ–°ç‰ˆä¸‹è½½é“¾æ¥ï¼š</strong></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">wget https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/v2fly/</span>v2ray-core<span class="hljs-regexp">/releases/</span>latest<span class="hljs-regexp">/download/</span>v2ray-linux-<span class="hljs-number">64</span>.zip<br></code></pre></td></tr></table></figure><h3 id="2-è§£å‹å¹¶æ•´ç†æ–‡ä»¶"><a href="#2-è§£å‹å¹¶æ•´ç†æ–‡ä»¶" class="headerlink" title="2. è§£å‹å¹¶æ•´ç†æ–‡ä»¶"></a>2. è§£å‹å¹¶æ•´ç†æ–‡ä»¶</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">unzip</span> v2ray-linux-<span class="hljs-number">64</span>.zip<br><span class="hljs-attribute">cd</span> v2ray-linux-<span class="hljs-number">64</span><br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>å»ºè®®ç§»åŠ¨åˆ°ä¸€ä¸ªæ ‡å‡†ç›®å½•ï¼Œæ¯”å¦‚ &#x2F;usr&#x2F;local&#x2F;v2rayæˆ–è€…&#x2F;opt&#x2F;</p><p>è¿™é‡Œæˆ‘ä»¥&#x2F;opt&#x2F;ä¸ºä¸»</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mv</span> <span class="hljs-variable">$HOME</span>/Downloads/v2ray-linux-64 /opt/v2ray/<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mv</span> ~/Downloads/v2ray-linux-64 /opt/v2ray/<br></code></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šä¸¤æ¡å‘½ä»¤éƒ½å¯ä»¥ç§»åŠ¨æ–‡ä»¶å¹¶ä¸”æ”¹å</strong></p><h3 id="3-æ·»åŠ æ‰§è¡Œæƒé™"><a href="#3-æ·»åŠ æ‰§è¡Œæƒé™" class="headerlink" title="3. æ·»åŠ æ‰§è¡Œæƒé™"></a>3. æ·»åŠ æ‰§è¡Œæƒé™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/v2ray<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> +x v2ray v2ctl<br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>åœ¨æœ€æ–°ç‰ˆä¸­å¯èƒ½æ²¡æœ‰v2ctlæ–‡ä»¶ï¼Œè¿™é‡Œå¯ä»¥ä¸ç®¡</p></blockquote><h3 id="4-è®¾ç½®é…ç½®æ–‡ä»¶"><a href="#4-è®¾ç½®é…ç½®æ–‡ä»¶" class="headerlink" title="4. è®¾ç½®é…ç½®æ–‡ä»¶"></a>4. è®¾ç½®é…ç½®æ–‡ä»¶</h3><blockquote><p>[!TIP]</p><p><strong>ç”±äºæˆ‘çš„æˆ‘æ”¾çš„åœ°æ–¹æ˜¯optä¸‹å¯¼è‡´è‡ªå¸¦çš„config.jsonæ–‡ä»¶å’Œv2rayåŒçº§æ— æ³•ä½¿ç”¨ï¼Œè¿™é‡Œéœ€è¦æ”¹ä¸€ä¸‹ä½ç½®</strong></p><p>ä»¥ä¸‹å‘½ä»¤æ„æ€æ˜¯åœ¨v2rayæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªconfigçš„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†å®˜æ–¹çš„config.jsonæ–‡ä»¶ç§»åŠ¨è¿›å»</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> /opt/v2ray/config<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mv</span> /opt/v2ray/config.json /opt/v2ray/config/<br></code></pre></td></tr></table></figure><h3 id="5-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#5-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="5. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>5. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim opt/v2ray/config/config.json<br></code></pre></td></tr></table></figure><blockquote><p>[!CAUTION]</p><p>è¿™é‡Œæˆ‘ä½¿ç”¨trojançš„æ–¹å¼è¿›è¡Œä»£ç†</p><p>å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·éœ€è¦æ”¹ï¼š<strong>æœåŠ¡å™¨åœ°å€ã€æœåŠ¡å™¨ç«¯å£ã€Trojan å¯†ç ã€è®¾ç½® SNIï¼ˆServer Name Indicationï¼‰ã€ç›‘å¬çš„ç«¯å£</strong>ç­‰ç­‰</p></blockquote><p>æ¨¡æ¿ä¸€ï¼šæœªæ³¨é‡Šç‰ˆï¼ˆæ¨èï¼‰</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;log&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;loglevel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;debug&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;access&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/log/v2ray/access.log&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/var/log/v2ray/error.log&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;inbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9911</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;listen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;socks&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;auth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;noauth&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;udp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;sniffing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;destOverride&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;http&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-string">&quot;tls&quot;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;outbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;202.000.33.136&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">23245</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;27382&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;streamSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;network&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tcp&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;security&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;tlsSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;serverName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cdnj60279.uu0009.com&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;allowInsecure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;freedom&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;direct&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;dns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https+local://dns.google/dns-query&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domains&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geosite:geolocation-!cn&quot;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https+local://cloudflare-dns.com/dns-query&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domains&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geosite:geolocation-!cn&quot;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;114.114.114.114&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domains&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geosite:cn&quot;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;8.8.8.8&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;1.1.1.1&quot;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;routing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;domainStrategy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;UseIP&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;rules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geosite:cn&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;direct&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geoip:cn&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-string">&quot;geoip:private&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;direct&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geoip:!cn&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan-out&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-string">&quot;geosite:geolocation-!cn&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan-out&quot;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>æ¨¡æ¿äºŒï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;log&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">//éœ€è¦æ—¥å¿—è®¾ç½®ï¼ˆé»˜è®¤å…³é—­ï¼Œéœ€è¦æ‰“å¼€ï¼‰</span><br>    <span class="hljs-comment">//&quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,    // è®¿é—®æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br>    <span class="hljs-comment">//&quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,      // é”™è¯¯æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br>    <span class="hljs-comment">// è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œé»˜è®¤æ—¥å¿—è®°å½•åˆ° stdout</span><br>    <span class="hljs-comment">// å¯é€‰å€¼ï¼šdebug, info, warning, error, none</span><br>    <span class="hljs-attr">&quot;loglevel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;warning&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// å…¥ç«™é…ç½®ï¼šV2Ray æ¥å—å®¢æˆ·ç«¯è¯·æ±‚çš„é…ç½®</span><br>  <span class="hljs-attr">&quot;inbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// ç›‘å¬çš„ç«¯å£ï¼Œå®¢æˆ·ç«¯é€šè¿‡è¿™ä¸ªç«¯å£ä¸ V2Ray é€šä¿¡</span><br>    <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9911</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// ç›‘å¬çš„ IP åœ°å€ï¼Œ127.0.0.1 è¡¨ç¤ºä»…æœ¬æœºå¯ä»¥è®¿é—®ï¼Œæ”¹ä¸º &quot;0.0.0.0&quot; å¯ä»¥è®©æ‰€æœ‰ç½‘ç»œæ¥å£éƒ½èƒ½è¿æ¥</span><br>    <span class="hljs-attr">&quot;listen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// æ­¤è¿æ¥çš„æ ‡ç­¾ï¼Œç”¨äºè·¯ç”±åŒ¹é…</span><br>    <span class="hljs-attr">&quot;tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;socks-inbound&quot;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// åè®®ï¼ŒæŒ‡å®šå®¢æˆ·ç«¯ä½¿ç”¨çš„åè®®ç±»å‹</span><br>    <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;socks&quot;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// é…ç½® SOCKS ä»£ç†çš„å…·ä½“è®¾ç½®</span><br>    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-comment">// authï¼šè®¾ç½®è®¤è¯æ–¹å¼ï¼Œnoauth è¡¨ç¤ºæ— éœ€è®¤è¯</span><br>      <span class="hljs-attr">&quot;auth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;noauth&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// udpï¼šæ˜¯å¦å¯ç”¨ UDP ä»£ç†ï¼Œfalse è¡¨ç¤ºç¦ç”¨</span><br>      <span class="hljs-attr">&quot;udp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// ç›‘å¬çš„ IP åœ°å€ï¼Œè®¾ç½®ä¸º &quot;127.0.0.1&quot; ä»…æ¥å—æœ¬åœ°è¯·æ±‚</span><br>      <span class="hljs-attr">&quot;ip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// å¯ç”¨ sniffing åŠŸèƒ½ï¼Œæ£€æµ‹ä¼ è¾“åè®®</span><br>    <span class="hljs-attr">&quot;sniffing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-comment">// sniffing ä¼šæ ¹æ®ä¼ è¾“åè®®æ¥åˆ¤æ–­ç›®æ ‡åŸŸå</span><br>      <span class="hljs-attr">&quot;destOverride&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;http&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// å‡ºç«™é…ç½®ï¼šV2Ray å‘é€è¯·æ±‚åˆ°å¤–éƒ¨çš„é…ç½®</span><br>  <span class="hljs-attr">&quot;outbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// ä½¿ç”¨ Trojan åè®®ä½œä¸ºå¤–éƒ¨è¿æ¥çš„åè®®</span><br>    <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-comment">// æœåŠ¡å™¨åˆ—è¡¨ï¼Œé…ç½® Trojan èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯</span><br>      <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;202.000.33.136&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœåŠ¡å™¨åœ°å€</span><br>          <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">23245</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// æœåŠ¡å™¨ç«¯å£</span><br>          <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;27382&quot;</span>  <span class="hljs-comment">// Trojan å¯†ç </span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// é…ç½®ä¼ è¾“å±‚åè®®ï¼Œä½¿ç”¨ TCP åè®®ï¼Œå¼€å¯ TLS åŠ å¯†</span><br>    <span class="hljs-attr">&quot;streamSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;network&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tcp&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;security&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä½¿ç”¨ TLS åŠ å¯†</span><br>      <span class="hljs-attr">&quot;tlsSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;serverName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cdnj60279.uu0009.com&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// è®¾ç½® SNIï¼ˆServer Name Indicationï¼‰</span><br>        <span class="hljs-attr">&quot;allowInsecure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>  <span class="hljs-comment">// å…è®¸ä¸å®‰å…¨çš„è¯ä¹¦</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan-outbound&quot;</span>  <span class="hljs-comment">// è®¾ç½®æ ‡ç­¾ï¼Œç”¨äºè·¯ç”±åŒ¹é…</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// é»˜è®¤çš„è‡ªç”±å‡ºå£ï¼Œä¸é€šè¿‡ä»£ç†</span><br>    <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;freedom&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;direct&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// ç”¨äºå±è”½æ— æ•ˆçš„è¿æ¥æˆ–ä¸éœ€è¦çš„æµé‡</span><br>    <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blackhole&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;tag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blocked&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// è·¯ç”±è®¾ç½®ï¼šå¦‚ä½•é€‰æ‹©å“ªä¸ªå‡ºç«™ä»£ç†</span><br>  <span class="hljs-attr">&quot;routing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// ç­–ç•¥ï¼šåŸŸåæˆ– IP ç­–ç•¥</span><br>    <span class="hljs-attr">&quot;domainStrategy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;IPOnDemand&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;rules&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-comment">// é˜»æ­¢è®¿é—®ç§æœ‰ IP åœ°å€ï¼ˆä¾‹å¦‚å±€åŸŸç½‘åœ°å€ï¼‰</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ip&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;geoip:private&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blocked&quot;</span>  <span class="hljs-comment">// ä½¿ç”¨â€œblockedâ€å‡ºç«™æ ‡ç­¾ï¼Œä¸¢å¼ƒè¿æ¥</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-comment">// é˜»æ­¢è®¿é—®å¹¿å‘ŠåŸŸå</span><br>        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;field&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;domain&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;geosite:category-ads&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;outboundTag&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blocked&quot;</span>  <span class="hljs-comment">// ä½¿ç”¨â€œblockedâ€å‡ºç«™æ ‡ç­¾ï¼Œä¸¢å¼ƒè¿æ¥</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// DNS é…ç½®ï¼šé…ç½® DNS è§£æ</span><br>  <span class="hljs-attr">&quot;dns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// é™æ€åŸŸåæ˜ å°„ï¼Œå¯ä»¥é˜²æ­¢ DNS æ±¡æŸ“</span><br>    <span class="hljs-attr">&quot;hosts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;domain:v2ray.com&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;www.vicemc.net&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¼ºåˆ¶ v2ray.com ä½¿ç”¨æ›¿ä»£çš„ IP</span><br>      <span class="hljs-attr">&quot;domain:github.io&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pages.github.com&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;domain:wikipedia.org&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;www.wikimedia.org&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;domain:shadowsocks.org&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;electronicsrealm.com&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// DNS æœåŠ¡å™¨åˆ—è¡¨ï¼ŒæŒ‰ç…§é¡ºåºæŸ¥è¯¢</span><br>    <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;1.1.1.1&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// Cloudflare DNS</span><br>      <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;114.114.114.114&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// ä¸­å›½çš„å…¬å…± DNS</span><br>        <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">53</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-comment">// é’ˆå¯¹ç‰¹å®šåŸŸåä½¿ç”¨æ­¤ DNS æœåŠ¡å™¨</span><br>        <span class="hljs-attr">&quot;domains&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;geosite:cn&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;8.8.8.8&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// Google DNS</span><br>      <span class="hljs-string">&quot;localhost&quot;</span>  <span class="hljs-comment">// æœ¬åœ° DNS</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// ç­–ç•¥è®¾ç½®ï¼šç”¨äºæ§åˆ¶è¿æ¥çš„è¡Œä¸º</span><br>  <span class="hljs-attr">&quot;policy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;levels&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;0&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-comment">// æ§åˆ¶æ¯ä¸ªç”¨æˆ·çš„ä¸Šä¼ å’Œä¸‹è½½æµé‡</span><br>        <span class="hljs-attr">&quot;uplinkOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;downlinkOnly&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;system&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-comment">// æ§åˆ¶æ˜¯å¦è®°å½•æµé‡ç»Ÿè®¡</span><br>      <span class="hljs-attr">&quot;statsInboundUplink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;statsInboundDownlink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;statsOutboundUplink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;statsOutboundDownlink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><br>  <span class="hljs-comment">// å…¶ä»–é…ç½®ï¼ˆå¯ä»¥æ‰©å±•ï¼‰</span><br>  <span class="hljs-attr">&quot;other&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>æ¨¡æ¿ä¸‰ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;log&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;loglevel&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;debug&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">//&quot;access&quot;: &quot;/var/log/v2ray/access.log&quot;,    // è®¿é—®æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br>    <span class="hljs-comment">//&quot;error&quot;: &quot;/var/log/v2ray/error.log&quot;,      // é”™è¯¯æ—¥å¿—æ–‡ä»¶è·¯å¾„</span><br>  <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;inbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9900</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;listen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;socks&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;auth&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;noauth&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;udp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;sniffing&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;destOverride&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;http&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;outbounds&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;protocol&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;settings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;servers&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>          <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;address&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;202.000.33.136&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">23245</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;27382&quot;</span><br>          <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><br>      <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;streamSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;network&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tcp&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;security&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;tls&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;tlsSettings&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>          <span class="hljs-attr">&quot;serverName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cdnj60279.uu0009.com&quot;</span><span class="hljs-punctuation">,</span><br>          <span class="hljs-attr">&quot;allowInsecure&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>        <span class="hljs-punctuation">&#125;</span><br>      <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><h3 id="6-æ‰‹åŠ¨å¯åŠ¨-v2rayæµ‹è¯•"><a href="#6-æ‰‹åŠ¨å¯åŠ¨-v2rayæµ‹è¯•" class="headerlink" title="6. æ‰‹åŠ¨å¯åŠ¨ v2rayæµ‹è¯•"></a>6. æ‰‹åŠ¨å¯åŠ¨ v2rayæµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /opt/v2ray<br><span class="hljs-built_in">sudo</span> v2ray run -config /config.json<br></code></pre></td></tr></table></figure><p>å¦‚æœèƒ½æ­£å¸¸å¯åŠ¨ï¼Œè¯´æ˜æ²¡é—®é¢˜</p><h3 id="7-ï¼ˆæ¨èï¼‰é…ç½®-Systemd-æœåŠ¡ï¼Œå®ç°å¼€æœºè‡ªå¯"><a href="#7-ï¼ˆæ¨èï¼‰é…ç½®-Systemd-æœåŠ¡ï¼Œå®ç°å¼€æœºè‡ªå¯" class="headerlink" title="7. ï¼ˆæ¨èï¼‰é…ç½® Systemd æœåŠ¡ï¼Œå®ç°å¼€æœºè‡ªå¯"></a>7. ï¼ˆæ¨èï¼‰é…ç½® Systemd æœåŠ¡ï¼Œå®ç°å¼€æœºè‡ªå¯</h3><p><strong>æœ€æ–°ç‰ˆå·²ç»æœ‰serviceæ–‡ä»¶ï¼Œè·¯å¾„ä¸ºï¼š&#x2F;opt&#x2F;v2ray&#x2F;systemd&#x2F;system&#x2F;v2ray.service&amp;&amp;v2ray@.serviceè¿™ä¸¤ä¸ªæ–‡ä»¶</strong></p><p>å¦‚æœæ²¡æœ‰ä»¥ä¸Šæ–‡ä»¶æ˜¯éœ€è¦è‡ªå·±åˆ›å»ºï¼Œå¦‚æœæœ‰ä¹Ÿæ˜¯è¦ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¸ç®¡æœ‰æ²¡æœ‰éƒ½æ˜¯è¦ç¼–è¾‘çš„</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> /<span class="hljs-keyword">opt</span>/v2ray/systemd/<span class="hljs-built_in">system</span>/v2ray.service<br></code></pre></td></tr></table></figure><p><strong>é”®å…¥ï¼š</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=V2Ray Service<br><span class="hljs-attr">Documentation</span>=https://www.v2fly.org/<br><span class="hljs-attr">After</span>=network.target nss-lookup.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">User</span>=nobody<br><span class="hljs-attr">CapabilityBoundingSet</span>=CAP_NET_ADMIN CAP_NET_BIND_SERVICE<br><span class="hljs-attr">AmbientCapabilities</span>=CAP_NET_ADMIN CAP_NET_BIND_SERVICE<br><span class="hljs-attr">NoNewPrivileges</span>=<span class="hljs-literal">true</span><br><span class="hljs-attr">ExecStart</span>=/opt/v2ray/v2ray run -config /opt/v2ray/config/config.json<br><span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure<br><span class="hljs-attr">RestartPreventExitStatus</span>=<span class="hljs-number">23</span><br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br><br></code></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡º</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> /<span class="hljs-keyword">opt</span>/v2ray/systemd/<span class="hljs-built_in">system</span>/v2ray@.service<br></code></pre></td></tr></table></figure><p><strong>é”®å…¥ï¼š</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=V2Ray Service<br><span class="hljs-attr">Documentation</span>=https://www.v2fly.org/<br><span class="hljs-attr">After</span>=network.target nss-lookup.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">User</span>=nobody<br><span class="hljs-attr">CapabilityBoundingSet</span>=CAP_NET_ADMIN CAP_NET_BIND_SERVICE<br><span class="hljs-attr">AmbientCapabilities</span>=CAP_NET_ADMIN CAP_NET_BIND_SERVICE<br><span class="hljs-attr">NoNewPrivileges</span>=<span class="hljs-literal">true</span><br><span class="hljs-attr">ExecStart</span>=/opt/v2ray/v2ray run -config /opt/v2ray/config/%i.json<br><span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure<br><span class="hljs-attr">RestartPreventExitStatus</span>=<span class="hljs-number">23</span><br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br><br></code></pre></td></tr></table></figure><p>ä¿å­˜å¹¶é€€å‡º</p><blockquote><p>[!IMPORTANT]</p><p>å°†ä»¥ä¸Šä¸¤æ–‡ä»¶æ‹·è´åˆ°ç³»ç»Ÿä¸­</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo <span class="hljs-regexp">/opt/</span>v2ray<span class="hljs-regexp">/systemd/</span>system<span class="hljs-regexp">/*.service /u</span>sr<span class="hljs-regexp">/lib/</span>systemd<span class="hljs-regexp">/system/</span><br></code></pre></td></tr></table></figure><p><strong>é‡æ–°åŠ è½½ systemd é…ç½®</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br></code></pre></td></tr></table></figure><p><strong>å¯åŠ¨æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now v2ray.service<br></code></pre></td></tr></table></figure><h3 id="8-æ£€æŸ¥çŠ¶æ€å’Œæ—¥å¿—"><a href="#8-æ£€æŸ¥çŠ¶æ€å’Œæ—¥å¿—" class="headerlink" title="8. æ£€æŸ¥çŠ¶æ€å’Œæ—¥å¿—"></a>8. æ£€æŸ¥çŠ¶æ€å’Œæ—¥å¿—</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs smali">sudo<span class="hljs-keyword"> system</span>ctl status v2ray<br>sudo journalctl -u v2ray -f<br></code></pre></td></tr></table></figure><h3 id="9-é…ç½®å®¢æˆ·ç«¯ä»£ç†ï¼ˆæœ¬æœºï¼‰"><a href="#9-é…ç½®å®¢æˆ·ç«¯ä»£ç†ï¼ˆæœ¬æœºï¼‰" class="headerlink" title="9. é…ç½®å®¢æˆ·ç«¯ä»£ç†ï¼ˆæœ¬æœºï¼‰"></a>9. é…ç½®å®¢æˆ·ç«¯ä»£ç†ï¼ˆæœ¬æœºï¼‰</h3><p><strong>v2ray é»˜è®¤ç›‘å¬ 1080 ç«¯å£ï¼Œä¸Šé¢çš„config.jsonæ–‡ä»¶ç«¯å£è®¾ç½®çš„æ˜¯9911ï¼Œè®¾ç½®æµè§ˆå™¨&#x2F;ç³»ç»Ÿçš„ SOCKS5 ä»£ç†åˆ° 127.0.0.1:ç«¯å£å·ï¼Œå³å¯</strong></p><h1 id="Trojan"><a href="#Trojan" class="headerlink" title="Trojan"></a>Trojan</h1><blockquote><p>[!NOTE]</p><p><strong>è¿™é‡Œæˆ‘ä»¬ä¾æ—§æŠŠä¸‹è½½å¥½çš„æ–‡ä»¶æ”¾åœ¨optä¸‹é¢</strong></p><p><strong>ä¸‹è½½Trojanå®¢æˆ·ç«¯</strong></p></blockquote><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> https://github.com/trojan-gfw/trojan/releases/download/v1.<span class="hljs-number">15</span>.<span class="hljs-number">1</span>/trojan-<span class="hljs-number">1</span>.<span class="hljs-number">15</span>.<span class="hljs-number">1</span>-linux-amd64.tar.xz<br></code></pre></td></tr></table></figure><p><strong>è§£å‹Trojanæ–‡ä»¶</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tar</span> xvf trojan-<span class="hljs-number">1</span>.<span class="hljs-number">15</span>.<span class="hljs-number">1</span>-linux-amd64.tar.xz<br><span class="hljs-attribute">cd</span> trojan<br></code></pre></td></tr></table></figure><p><strong>ç¼–è¾‘é…ç½®æ–‡ä»¶</strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">sudo vim config.json<br></code></pre></td></tr></table></figure><p><strong>å®Œæ•´çš„jsonæ–‡ä»¶å†…å®¹</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;run_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;client&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;local_addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;local_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1080</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;remote_addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;219.22.49.201&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;remote_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22201</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;123456&quot;</span><br>    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;log_level&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;ssl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;sni&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jpo123.ovod.me&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;verify&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;verify_hostname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cert&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/path/to/private.key&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key_password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cipher&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cipher_tls13&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;TLS_AES_128_GCM_SHA256:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_256_GCM_SHA384&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;prefer_server_cipher&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;alpn&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;http/1.1&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;alpn_port_override&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;h2&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">81</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;reuse_session&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;session_ticket&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;session_timeout&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;plain_http_response&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;curves&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;dhparam&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;tcp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;prefer_ipv4&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;no_delay&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;keep_alive&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;reuse_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;fast_open&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;fast_open_qlen&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">20</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;mysql&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;server_addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;127.0.0.1&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;server_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3306</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;database&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trojan&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;cert&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;ca&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p><strong>è§£é‡Šå†…å®¹ï¼ˆå¯è·³è¿‡ï¼‰</strong></p><p>run_type ä¸ºè¿è¡Œæ¨¡å¼ï¼ŒæŒ‡å®šå¡«ä¸º â€œclientâ€</p><p>local_port ä¸ºæœ¬åœ°ç«¯å£ï¼Œå¦‚ 1080</p><p>remote_addr ä¸ºè¿œç¨‹æœåŠ¡å™¨åœ°å€ï¼Œå¡«æœåŠ¡å™¨IPï¼Œå¦‚ â€œ219.22.49.201â€</p><p>remote_port ä¸ºè¿œç¨‹æœåŠ¡å™¨ç«¯å£ï¼Œå¦‚ 22201</p><p>password ä¿®æ”¹ä¸º [â€œ123456â€]</p><p><strong>ç¤ºä¾‹å¦‚ä¸‹</strong></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;run_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;client&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;local_addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;0.0.0.0&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;local_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1080</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;remote_addr&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;219.22.49.201&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;remote_port&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22201</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;123456&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>sslä¸­çš„ sni ä¸ºä¸»æœºSNIåï¼Œå¦‚ â€œjpo123.ovod.meâ€ï¼Œå¯¹åº”èŠ‚ç‚¹å†…å®¹é‡Œçš„â€æœåŠ¡å™¨SNIâ€</p><p>sslä¸­çš„ verify å€¼ä¿®æ”¹ä¸º false ï¼ˆå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰ï¼Œåˆ™æ·»åŠ è¿™ä¸ªé…ç½®ï¼‰</p><p>sslä¸­çš„ verify_hostname å€¼ä¿®æ”¹ä¸º false ï¼ˆå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰ï¼Œåˆ™æ·»åŠ è¿™ä¸ªé…ç½®ï¼‰</p><p>sslä¸­çš„ cert ä¿®æ”¹ä¸º â€œâ€ ï¼ˆæ”¹æˆç©ºçš„ï¼‰</p><p><strong>ç¤ºä¾‹å¦‚ä¸‹</strong></p></blockquote><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;sni&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jpo123.ovod.me&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;verify&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;verify_hostname&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;cert&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>ä¿å­˜é…ç½®æ–‡ä»¶</p><h3 id="åˆ›å»ºtrojan-serviceæ–‡ä»¶"><a href="#åˆ›å»ºtrojan-serviceæ–‡ä»¶" class="headerlink" title="åˆ›å»ºtrojan.serviceæ–‡ä»¶"></a>åˆ›å»ºtrojan.serviceæ–‡ä»¶</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo vim <span class="hljs-regexp">/usr/</span>lib<span class="hljs-regexp">/systemd/</span>system/trojan.service<br></code></pre></td></tr></table></figure><p><strong>é”®å…¥</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=trojan<br><span class="hljs-attr">After</span>=network.target<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">Type</span>=simple<br><span class="hljs-attr">PIDFile</span>=/opt/trojan/trojan.pid<br><span class="hljs-attr">ExecStart</span>=/opt/trojan/trojan -c /opt/trojan/config.json -l /opt/trojan/trojan.log<br><span class="hljs-attr">ExecReload</span>=/bin/kill -HUP \<span class="hljs-variable">$MAINPID</span><br><span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure<br><span class="hljs-attr">RestartSec</span>=<span class="hljs-number">1</span>s<br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=multi-user.target<br></code></pre></td></tr></table></figure><h3 id="å¯åŠ¨Trojanå¹¶è®¾ç½®å¼€æœºè‡ªå¯"><a href="#å¯åŠ¨Trojanå¹¶è®¾ç½®å¼€æœºè‡ªå¯" class="headerlink" title="å¯åŠ¨Trojanå¹¶è®¾ç½®å¼€æœºè‡ªå¯"></a>å¯åŠ¨Trojanå¹¶è®¾ç½®å¼€æœºè‡ªå¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> --now trojan.service<br></code></pre></td></tr></table></figure><p><strong>æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ</strong></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> aux | <span class="hljs-keyword">grep</span> trojan | <span class="hljs-keyword">grep</span> -v <span class="hljs-keyword">grep</span><br></code></pre></td></tr></table></figure><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cat</span> /<span class="hljs-keyword">opt</span>/trojan/trojan.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arch Linuxå®‰è£…ï¼ˆè¾‰å°‘ç‰¹åˆ¶ï¼‰</title>
    <link href="/2025/06/01/Arch%20Linux%E4%B8%AD%E6%96%87%E7%BB%B4%E5%9F%BA/"/>
    <url>/2025/06/01/Arch%20Linux%E4%B8%AD%E6%96%87%E7%BB%B4%E5%9F%BA/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ArchLinux-Installation"><a href="#ArchLinux-Installation" class="headerlink" title="ArchLinux Installation"></a>ArchLinux Installation</h1><h2 id="1-è¿æ¥åˆ°äº’è”ç½‘"><a href="#1-è¿æ¥åˆ°äº’è”ç½‘" class="headerlink" title="1.è¿æ¥åˆ°äº’è”ç½‘"></a>1.è¿æ¥åˆ°äº’è”ç½‘</h2><h4 id="1-1-é¦–å…ˆï¼Œç¡®å®šè‡ªå·±ç”µè„‘æœ‰æ²¡æœ‰ç½‘å¡ï¼Œå¦‚æœç”µè„‘æ²¡æœ‰ç½‘å¡ï¼Œä»¥ä¸‹ï¼ˆ1-0-1-6ï¼‰æ­¥éª¤æ²¡æœ‰ç”¨çš„ï¼Œç›´æ¥è¿ç½‘çº¿å³å¯ï¼Œå®‰å“USBå…±äº«ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨rfkillå‘½ä»¤ç¡®è®¤-Wi-Fi-è®¾å¤‡æœªè¢«å±è”½ï¼Œå¦‚æœä¸çŸ¥é“ä½ çš„ç½‘ç»œè®¾å¤‡åç§°ï¼Œè¯·åˆ—å‡ºæ‰€æœ‰-WiFi-è®¾å¤‡ï¼š"><a href="#1-1-é¦–å…ˆï¼Œç¡®å®šè‡ªå·±ç”µè„‘æœ‰æ²¡æœ‰ç½‘å¡ï¼Œå¦‚æœç”µè„‘æ²¡æœ‰ç½‘å¡ï¼Œä»¥ä¸‹ï¼ˆ1-0-1-6ï¼‰æ­¥éª¤æ²¡æœ‰ç”¨çš„ï¼Œç›´æ¥è¿ç½‘çº¿å³å¯ï¼Œå®‰å“USBå…±äº«ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨rfkillå‘½ä»¤ç¡®è®¤-Wi-Fi-è®¾å¤‡æœªè¢«å±è”½ï¼Œå¦‚æœä¸çŸ¥é“ä½ çš„ç½‘ç»œè®¾å¤‡åç§°ï¼Œè¯·åˆ—å‡ºæ‰€æœ‰-WiFi-è®¾å¤‡ï¼š" class="headerlink" title="1.1 é¦–å…ˆï¼Œç¡®å®šè‡ªå·±ç”µè„‘æœ‰æ²¡æœ‰ç½‘å¡ï¼Œå¦‚æœç”µè„‘æ²¡æœ‰ç½‘å¡ï¼Œä»¥ä¸‹ï¼ˆ1.0-1.6ï¼‰æ­¥éª¤æ²¡æœ‰ç”¨çš„ï¼Œç›´æ¥è¿ç½‘çº¿å³å¯ï¼Œå®‰å“USBå…±äº«ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨rfkillå‘½ä»¤ç¡®è®¤ Wi-Fi è®¾å¤‡æœªè¢«å±è”½ï¼Œå¦‚æœä¸çŸ¥é“ä½ çš„ç½‘ç»œè®¾å¤‡åç§°ï¼Œè¯·åˆ—å‡ºæ‰€æœ‰ WiFi è®¾å¤‡ï¼š"></a>1.1 é¦–å…ˆï¼Œç¡®å®šè‡ªå·±ç”µè„‘æœ‰æ²¡æœ‰ç½‘å¡ï¼Œå¦‚æœç”µè„‘æ²¡æœ‰ç½‘å¡ï¼Œä»¥ä¸‹ï¼ˆ1.0-1.6ï¼‰æ­¥éª¤æ²¡æœ‰ç”¨çš„ï¼Œç›´æ¥è¿ç½‘çº¿å³å¯ï¼Œå®‰å“USBå…±äº«ä¹Ÿå¯ä»¥ï¼Œä½¿ç”¨rfkillå‘½ä»¤ç¡®è®¤ Wi-Fi è®¾å¤‡æœªè¢«å±è”½ï¼Œå¦‚æœä¸çŸ¥é“ä½ çš„ç½‘ç»œè®¾å¤‡åç§°ï¼Œè¯·åˆ—å‡ºæ‰€æœ‰ WiFi è®¾å¤‡ï¼š</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">iwctl</span><br></code></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">device list</span><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p>device listï¼ˆä¸ç®¡æ˜¯ç¬”è®°æœ¬å’Œå°å¼ç”µè„‘éƒ½è¦æœ‰ç½‘å¡æ‰èƒ½è¢«æ£€æµ‹åˆ°ï¼Œæ˜¯å¦è¢«å±è”½ï¼Œæ²¡æœ‰åˆ™è·³è¿‡1.2æ­¥ï¼Œæœ‰åˆ™éœ€è¦å¼€å¯ï¼‰</p></blockquote><h4 id="1-2-å¦‚æœè®¾å¤‡æˆ–å…¶ç›¸åº”çš„é€‚é…å™¨å·²å…³é—­ï¼Œè¯·å°†å…¶æ‰“å¼€ï¼ˆå¯è·³è¿‡ï¼‰"><a href="#1-2-å¦‚æœè®¾å¤‡æˆ–å…¶ç›¸åº”çš„é€‚é…å™¨å·²å…³é—­ï¼Œè¯·å°†å…¶æ‰“å¼€ï¼ˆå¯è·³è¿‡ï¼‰" class="headerlink" title="1.2 å¦‚æœè®¾å¤‡æˆ–å…¶ç›¸åº”çš„é€‚é…å™¨å·²å…³é—­ï¼Œè¯·å°†å…¶æ‰“å¼€ï¼ˆå¯è·³è¿‡ï¼‰"></a>1.2 å¦‚æœè®¾å¤‡æˆ–å…¶ç›¸åº”çš„é€‚é…å™¨å·²å…³é—­ï¼Œè¯·å°†å…¶æ‰“å¼€ï¼ˆå¯è·³è¿‡ï¼‰</h4><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">device</span> <span class="hljs-string">name</span> <span class="hljs-built_in">set-property</span> <span class="hljs-string">Powered</span> <span class="hljs-string">on</span><br></code></pre></td></tr></table></figure><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">adapter</span> <span class="hljs-string">adapter</span> <span class="hljs-built_in">set-property</span> <span class="hljs-string">Powered</span> <span class="hljs-string">on</span><br></code></pre></td></tr></table></figure><h4 id="1-3-ç„¶åï¼Œè¦å¼€å§‹æ‰«æç½‘ç»œï¼ˆæ³¨æ„ï¼šè¿™ä¸ªå‘½ä»¤ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ï¼‰ï¼Œæ‰§è¡Œï¼š"><a href="#1-3-ç„¶åï¼Œè¦å¼€å§‹æ‰«æç½‘ç»œï¼ˆæ³¨æ„ï¼šè¿™ä¸ªå‘½ä»¤ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ï¼‰ï¼Œæ‰§è¡Œï¼š" class="headerlink" title="1.3 ç„¶åï¼Œè¦å¼€å§‹æ‰«æç½‘ç»œï¼ˆæ³¨æ„ï¼šè¿™ä¸ªå‘½ä»¤ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ï¼‰ï¼Œæ‰§è¡Œï¼š"></a>1.3 ç„¶åï¼Œè¦å¼€å§‹æ‰«æç½‘ç»œï¼ˆæ³¨æ„ï¼šè¿™ä¸ªå‘½ä»¤ä¸ä¼šè¾“å‡ºä»»ä½•å†…å®¹ï¼‰ï¼Œæ‰§è¡Œï¼š</h4><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">station <span class="hljs-keyword">name</span> <span class="hljs-built_in">scan</span><br></code></pre></td></tr></table></figure><h4 id="1-4-å†ç„¶åï¼Œå°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œï¼š"><a href="#1-4-å†ç„¶åï¼Œå°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œï¼š" class="headerlink" title="1.4 å†ç„¶åï¼Œå°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œï¼š"></a>1.4 å†ç„¶åï¼Œå°±å¯ä»¥åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ç½‘ç»œï¼š</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">station <span class="hljs-type">name</span> <span class="hljs-keyword">get</span>-networks<br></code></pre></td></tr></table></figure><h4 id="1-5-æœ€åï¼Œè¦è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œï¼š"><a href="#1-5-æœ€åï¼Œè¦è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œï¼š" class="headerlink" title="1.5 æœ€åï¼Œè¦è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œï¼š"></a>1.5 æœ€åï¼Œè¦è¿æ¥åˆ°ä¸€ä¸ªç½‘ç»œï¼š</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">station name connect SSIDï¼ˆwifiåå­—ï¼‰<br></code></pre></td></tr></table></figure><blockquote><p>è¾“å…¥WiFiå¯†ç å›è½¦</p><p>æŒ‰exité€€å‡ºiwctl</p></blockquote><h4 id="1-6-æµ‹è¯•"><a href="#1-6-æµ‹è¯•" class="headerlink" title="1.6 æµ‹è¯•"></a>1.6 æµ‹è¯•</h4><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-built_in">ping</span> archlinux<span class="hljs-meta">.org</span><br></code></pre></td></tr></table></figure><blockquote><p>[!WARNING]</p><h5 id="é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…æ˜ åƒåœ¨å¯åŠ¨æ—¶å·²ç»é¢„å…ˆé…ç½®å¥½å¹¶å¯ç”¨äº†systemd-networkdã€systemd-resolvedã€iwdå’ŒModemManagerã€‚ä½†åœ¨å·²ç»å®‰è£…å®Œæˆäº†çš„ç³»ç»Ÿä¹‹ä¸­å¹¶éå¦‚æ­¤"><a href="#é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…æ˜ åƒåœ¨å¯åŠ¨æ—¶å·²ç»é¢„å…ˆé…ç½®å¥½å¹¶å¯ç”¨äº†systemd-networkdã€systemd-resolvedã€iwdå’ŒModemManagerã€‚ä½†åœ¨å·²ç»å®‰è£…å®Œæˆäº†çš„ç³»ç»Ÿä¹‹ä¸­å¹¶éå¦‚æ­¤" class="headerlink" title="é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…æ˜ åƒåœ¨å¯åŠ¨æ—¶å·²ç»é¢„å…ˆé…ç½®å¥½å¹¶å¯ç”¨äº†systemd-networkdã€systemd-resolvedã€iwdå’ŒModemManagerã€‚ä½†åœ¨å·²ç»å®‰è£…å®Œæˆäº†çš„ç³»ç»Ÿä¹‹ä¸­å¹¶éå¦‚æ­¤"></a>é»˜è®¤æƒ…å†µä¸‹ï¼Œå®‰è£…æ˜ åƒåœ¨å¯åŠ¨æ—¶å·²ç»é¢„å…ˆé…ç½®å¥½å¹¶å¯ç”¨äº†systemd-networkdã€systemd-resolvedã€iwdå’ŒModemManagerã€‚ä½†åœ¨å·²ç»å®‰è£…å®Œæˆäº†çš„ç³»ç»Ÿä¹‹ä¸­å¹¶éå¦‚æ­¤</h5></blockquote><h2 id="2-æ›´æ–°ç³»ç»Ÿæ—¶é—´ï¼ˆå¯è·³è¿‡ï¼‰"><a href="#2-æ›´æ–°ç³»ç»Ÿæ—¶é—´ï¼ˆå¯è·³è¿‡ï¼‰" class="headerlink" title="2.æ›´æ–°ç³»ç»Ÿæ—¶é—´ï¼ˆå¯è·³è¿‡ï¼‰"></a>2.æ›´æ–°ç³»ç»Ÿæ—¶é—´ï¼ˆå¯è·³è¿‡ï¼‰</h2><h4 id="åœ¨-Live-ç¯å¢ƒä¸­systemd-timesyncdé»˜è®¤å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç³»ç»Ÿå·²ç»åˆ›å»ºäº’è”ç½‘è¿æ¥åï¼Œç³»ç»Ÿæ—¶é—´å°†è‡ªåŠ¨åŒæ­¥"><a href="#åœ¨-Live-ç¯å¢ƒä¸­systemd-timesyncdé»˜è®¤å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç³»ç»Ÿå·²ç»åˆ›å»ºäº’è”ç½‘è¿æ¥åï¼Œç³»ç»Ÿæ—¶é—´å°†è‡ªåŠ¨åŒæ­¥" class="headerlink" title="åœ¨ Live ç¯å¢ƒä¸­systemd-timesyncdé»˜è®¤å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç³»ç»Ÿå·²ç»åˆ›å»ºäº’è”ç½‘è¿æ¥åï¼Œç³»ç»Ÿæ—¶é—´å°†è‡ªåŠ¨åŒæ­¥"></a>åœ¨ Live ç¯å¢ƒä¸­systemd-timesyncdé»˜è®¤å¯ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ç³»ç»Ÿå·²ç»åˆ›å»ºäº’è”ç½‘è¿æ¥åï¼Œç³»ç»Ÿæ—¶é—´å°†è‡ªåŠ¨åŒæ­¥</h4><h4 id="ä½¿ç”¨timedatectlç¡®ä¿ç³»ç»Ÿæ—¶é—´æ˜¯åŒæ­¥çš„"><a href="#ä½¿ç”¨timedatectlç¡®ä¿ç³»ç»Ÿæ—¶é—´æ˜¯åŒæ­¥çš„" class="headerlink" title="ä½¿ç”¨timedatectlç¡®ä¿ç³»ç»Ÿæ—¶é—´æ˜¯åŒæ­¥çš„"></a>ä½¿ç”¨timedatectlç¡®ä¿ç³»ç»Ÿæ—¶é—´æ˜¯åŒæ­¥çš„</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">timedatectl</span><br></code></pre></td></tr></table></figure><h2 id="3-åˆ›å»ºç¡¬ç›˜åˆ†åŒº"><a href="#3-åˆ›å»ºç¡¬ç›˜åˆ†åŒº" class="headerlink" title="3.åˆ›å»ºç¡¬ç›˜åˆ†åŒº"></a>3.åˆ›å»ºç¡¬ç›˜åˆ†åŒº</h2><h4 id="ç³»ç»Ÿå¦‚æœè¯†åˆ«åˆ°è®¡ç®—æœºçš„å†…ç½®ç¡¬ç›˜ã€Uç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜ç­‰ç±»å‹ç£ç›˜ï¼Œå°±ä¼šå°†å…¶åˆ†é…ä¸ºä¸€ä¸ªå—è®¾å¤‡ï¼Œå¦‚-dev-sdaã€-dev-nvme0n1æˆ–-dev-mmcblk0ã€‚å¯ä»¥ä½¿ç”¨lsblkæˆ–è€…fdiskæŸ¥çœ‹"><a href="#ç³»ç»Ÿå¦‚æœè¯†åˆ«åˆ°è®¡ç®—æœºçš„å†…ç½®ç¡¬ç›˜ã€Uç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜ç­‰ç±»å‹ç£ç›˜ï¼Œå°±ä¼šå°†å…¶åˆ†é…ä¸ºä¸€ä¸ªå—è®¾å¤‡ï¼Œå¦‚-dev-sdaã€-dev-nvme0n1æˆ–-dev-mmcblk0ã€‚å¯ä»¥ä½¿ç”¨lsblkæˆ–è€…fdiskæŸ¥çœ‹" class="headerlink" title="ç³»ç»Ÿå¦‚æœè¯†åˆ«åˆ°è®¡ç®—æœºçš„å†…ç½®ç¡¬ç›˜ã€Uç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜ç­‰ç±»å‹ç£ç›˜ï¼Œå°±ä¼šå°†å…¶åˆ†é…ä¸ºä¸€ä¸ªå—è®¾å¤‡ï¼Œå¦‚&#x2F;dev&#x2F;sdaã€&#x2F;dev&#x2F;nvme0n1æˆ–&#x2F;dev&#x2F;mmcblk0ã€‚å¯ä»¥ä½¿ç”¨lsblkæˆ–è€…fdiskæŸ¥çœ‹"></a>ç³»ç»Ÿå¦‚æœè¯†åˆ«åˆ°è®¡ç®—æœºçš„å†…ç½®ç¡¬ç›˜ã€Uç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜ç­‰ç±»å‹ç£ç›˜ï¼Œå°±ä¼šå°†å…¶åˆ†é…ä¸ºä¸€ä¸ªå—è®¾å¤‡ï¼Œå¦‚&#x2F;dev&#x2F;sdaã€&#x2F;dev&#x2F;nvme0n1æˆ–&#x2F;dev&#x2F;mmcblk0ã€‚å¯ä»¥ä½¿ç”¨lsblkæˆ–è€…fdiskæŸ¥çœ‹</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">fdisk</span> -lï¼ˆæ­¤å¤„ä¸ºå°å†™å­—æ¯lï¼‰<br></code></pre></td></tr></table></figure><h4 id="ç»“æœä¸­ä»¥romã€loopæˆ–è€…airootfsç»“å°¾çš„è®¾å¤‡å¯ä»¥è¢«å¿½ç•¥ã€‚ç»“æœä¸­ä»¥rpbmã€boot0æˆ–è€…boot1ç»“å°¾çš„mmcblk-è®¾å¤‡ä¹Ÿå¯ä»¥è¢«å¿½ç•¥"><a href="#ç»“æœä¸­ä»¥romã€loopæˆ–è€…airootfsç»“å°¾çš„è®¾å¤‡å¯ä»¥è¢«å¿½ç•¥ã€‚ç»“æœä¸­ä»¥rpbmã€boot0æˆ–è€…boot1ç»“å°¾çš„mmcblk-è®¾å¤‡ä¹Ÿå¯ä»¥è¢«å¿½ç•¥" class="headerlink" title="ç»“æœä¸­ä»¥romã€loopæˆ–è€…airootfsç»“å°¾çš„è®¾å¤‡å¯ä»¥è¢«å¿½ç•¥ã€‚ç»“æœä¸­ä»¥rpbmã€boot0æˆ–è€…boot1ç»“å°¾çš„mmcblk*è®¾å¤‡ä¹Ÿå¯ä»¥è¢«å¿½ç•¥"></a>ç»“æœä¸­ä»¥romã€loopæˆ–è€…airootfsç»“å°¾çš„è®¾å¤‡å¯ä»¥è¢«å¿½ç•¥ã€‚ç»“æœä¸­ä»¥rpbmã€boot0æˆ–è€…boot1ç»“å°¾çš„mmcblk*è®¾å¤‡ä¹Ÿå¯ä»¥è¢«å¿½ç•¥</h4><h4 id="å¯¹äºä¸€ä¸ªé€‰å®šçš„è®¾å¤‡ï¼Œä»¥ä¸‹åˆ†åŒºæ˜¯å¿…é¡»è¦æœ‰çš„ï¼š"><a href="#å¯¹äºä¸€ä¸ªé€‰å®šçš„è®¾å¤‡ï¼Œä»¥ä¸‹åˆ†åŒºæ˜¯å¿…é¡»è¦æœ‰çš„ï¼š" class="headerlink" title="å¯¹äºä¸€ä¸ªé€‰å®šçš„è®¾å¤‡ï¼Œä»¥ä¸‹åˆ†åŒºæ˜¯å¿…é¡»è¦æœ‰çš„ï¼š"></a>å¯¹äºä¸€ä¸ªé€‰å®šçš„è®¾å¤‡ï¼Œä»¥ä¸‹åˆ†åŒºæ˜¯å¿…é¡»è¦æœ‰çš„ï¼š</h4><table><thead><tr><th>å·²å®‰è£…ç³»ç»Ÿä¸Šçš„æŒ‚è½½ç‚¹</th><th>åˆ†åŒº</th><th>åˆ†åŒºç±»å‹</th><th>å»ºè®®å¤§å°</th></tr></thead><tbody><tr><td>&#x2F;boot</td><td>&#x2F;dev&#x2F;efi_system_partition</td><td>EFI ç³»ç»Ÿåˆ†åŒº</td><td>1 GiB</td></tr><tr><td>SWAP</td><td>&#x2F;dev&#x2F;swap_partition</td><td>Linux Swap ï¼ˆäº¤æ¢ç©ºé—´ï¼‰</td><td>è‡³å°‘4GiB</td></tr><tr><td>&#x2F;</td><td>&#x2F;dev&#x2F;root_partition</td><td>Linux x86-64æ ¹ç›®å½• (&#x2F;)</td><td>è®¾å¤‡å‰©ä½™ç©ºé—´è‡³å°‘23-32GiB</td></tr></tbody></table><h1 id="4-æ ¼å¼åŒ–åˆ†åŒº"><a href="#4-æ ¼å¼åŒ–åˆ†åŒº" class="headerlink" title="4.æ ¼å¼åŒ–åˆ†åŒº"></a>4.æ ¼å¼åŒ–åˆ†åŒº</h1><h4 id="4-1-åˆ›å»ºåˆ†åŒºåï¼Œå¿…é¡»ä½¿ç”¨åˆé€‚çš„æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯ä¸ªæ–°åˆ›å»ºçš„åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–"><a href="#4-1-åˆ›å»ºåˆ†åŒºåï¼Œå¿…é¡»ä½¿ç”¨åˆé€‚çš„æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯ä¸ªæ–°åˆ›å»ºçš„åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–" class="headerlink" title="4.1 åˆ›å»ºåˆ†åŒºåï¼Œå¿…é¡»ä½¿ç”¨åˆé€‚çš„æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯ä¸ªæ–°åˆ›å»ºçš„åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–"></a>4.1 åˆ›å»ºåˆ†åŒºåï¼Œå¿…é¡»ä½¿ç”¨åˆé€‚çš„æ–‡ä»¶ç³»ç»Ÿå¯¹æ¯ä¸ªæ–°åˆ›å»ºçš„åˆ†åŒºè¿›è¡Œæ ¼å¼åŒ–</h4><h4 id="è¦åœ¨æ ¹åˆ†åŒº-dev-root-partitionä¸Šåˆ›å»ºä¸€ä¸ªExt4æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·è¿è¡Œ"><a href="#è¦åœ¨æ ¹åˆ†åŒº-dev-root-partitionä¸Šåˆ›å»ºä¸€ä¸ªExt4æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·è¿è¡Œ" class="headerlink" title="è¦åœ¨æ ¹åˆ†åŒº&#x2F;dev&#x2F;root_partitionä¸Šåˆ›å»ºä¸€ä¸ªExt4æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·è¿è¡Œ"></a>è¦åœ¨æ ¹åˆ†åŒº&#x2F;dev&#x2F;root_partitionä¸Šåˆ›å»ºä¸€ä¸ªExt4æ–‡ä»¶ç³»ç»Ÿï¼Œè¯·è¿è¡Œ</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkfs.ext4 <span class="hljs-regexp">/dev/</span>root_partitionï¼ˆæ ¹åˆ†åŒºï¼‰<br></code></pre></td></tr></table></figure><h4 id="4-2-å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªEFI-ç³»ç»Ÿåˆ†åŒºï¼Œä½¿ç”¨mkfs-fatå°†å…¶æ ¼å¼åŒ–ä¸ºFat32"><a href="#4-2-å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªEFI-ç³»ç»Ÿåˆ†åŒºï¼Œä½¿ç”¨mkfs-fatå°†å…¶æ ¼å¼åŒ–ä¸ºFat32" class="headerlink" title="4.2 å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªEFI ç³»ç»Ÿåˆ†åŒºï¼Œä½¿ç”¨mkfs.fatå°†å…¶æ ¼å¼åŒ–ä¸ºFat32"></a>4.2 å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªEFI ç³»ç»Ÿåˆ†åŒºï¼Œä½¿ç”¨mkfs.fatå°†å…¶æ ¼å¼åŒ–ä¸ºFat32</h4><h4 id="è­¦å‘Šï¼šåªæœ‰åœ¨åˆ†åŒºæ­¥éª¤ä¸­åˆ›å»ºEFIç³»ç»Ÿåˆ†åŒºæ—¶æ‰éœ€è¦æ ¼å¼åŒ–ã€‚å¦‚æœè¿™ä¸ªç£ç›˜ä¸Šå·²ç»æœ‰ä¸€ä¸ª-EFI-ç³»ç»Ÿåˆ†åŒºäº†ï¼Œå°†å®ƒé‡æ–°æ ¼å¼åŒ–ä¼šç ´åå…¶ä»–å·²å®‰è£…æ“ä½œç³»ç»Ÿçš„å¼•å¯¼åŠ è½½ç¨‹åº"><a href="#è­¦å‘Šï¼šåªæœ‰åœ¨åˆ†åŒºæ­¥éª¤ä¸­åˆ›å»ºEFIç³»ç»Ÿåˆ†åŒºæ—¶æ‰éœ€è¦æ ¼å¼åŒ–ã€‚å¦‚æœè¿™ä¸ªç£ç›˜ä¸Šå·²ç»æœ‰ä¸€ä¸ª-EFI-ç³»ç»Ÿåˆ†åŒºäº†ï¼Œå°†å®ƒé‡æ–°æ ¼å¼åŒ–ä¼šç ´åå…¶ä»–å·²å®‰è£…æ“ä½œç³»ç»Ÿçš„å¼•å¯¼åŠ è½½ç¨‹åº" class="headerlink" title="è­¦å‘Šï¼šåªæœ‰åœ¨åˆ†åŒºæ­¥éª¤ä¸­åˆ›å»ºEFIç³»ç»Ÿåˆ†åŒºæ—¶æ‰éœ€è¦æ ¼å¼åŒ–ã€‚å¦‚æœè¿™ä¸ªç£ç›˜ä¸Šå·²ç»æœ‰ä¸€ä¸ª EFI ç³»ç»Ÿåˆ†åŒºäº†ï¼Œå°†å®ƒé‡æ–°æ ¼å¼åŒ–ä¼šç ´åå…¶ä»–å·²å®‰è£…æ“ä½œç³»ç»Ÿçš„å¼•å¯¼åŠ è½½ç¨‹åº"></a>è­¦å‘Šï¼šåªæœ‰åœ¨åˆ†åŒºæ­¥éª¤ä¸­åˆ›å»ºEFIç³»ç»Ÿåˆ†åŒºæ—¶æ‰éœ€è¦æ ¼å¼åŒ–ã€‚å¦‚æœè¿™ä¸ªç£ç›˜ä¸Šå·²ç»æœ‰ä¸€ä¸ª EFI ç³»ç»Ÿåˆ†åŒºäº†ï¼Œå°†å®ƒé‡æ–°æ ¼å¼åŒ–ä¼šç ´åå…¶ä»–å·²å®‰è£…æ“ä½œç³»ç»Ÿçš„å¼•å¯¼åŠ è½½ç¨‹åº</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mkfs</span>.fat -F <span class="hljs-number">32</span> /dev/efi_system_partitionï¼ˆEFI ç³»ç»Ÿåˆ†åŒºï¼‰<br></code></pre></td></tr></table></figure><h4 id="4-3-å¦‚æœåˆ›å»ºäº†äº¤æ¢åˆ†åŒºï¼Œè¯·ä½¿ç”¨mkswapå°†å…¶åˆå§‹åŒ–"><a href="#4-3-å¦‚æœåˆ›å»ºäº†äº¤æ¢åˆ†åŒºï¼Œè¯·ä½¿ç”¨mkswapå°†å…¶åˆå§‹åŒ–" class="headerlink" title="4.3 å¦‚æœåˆ›å»ºäº†äº¤æ¢åˆ†åŒºï¼Œè¯·ä½¿ç”¨mkswapå°†å…¶åˆå§‹åŒ–"></a>4.3 å¦‚æœåˆ›å»ºäº†äº¤æ¢åˆ†åŒºï¼Œè¯·ä½¿ç”¨mkswapå°†å…¶åˆå§‹åŒ–</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">mkswap <span class="hljs-regexp">/dev/</span>swap_partitionï¼ˆäº¤æ¢ç©ºé—´åˆ†åŒºï¼‰<br></code></pre></td></tr></table></figure><h2 id="5-æŒ‚è½½åˆ†åŒº4-æ ¼å¼åŒ–åˆ†åŒº"><a href="#5-æŒ‚è½½åˆ†åŒº4-æ ¼å¼åŒ–åˆ†åŒº" class="headerlink" title="5.æŒ‚è½½åˆ†åŒº4.æ ¼å¼åŒ–åˆ†åŒº"></a>5.æŒ‚è½½åˆ†åŒº4.æ ¼å¼åŒ–åˆ†åŒº</h2><h4 id="5-1-å°†æ ¹ç£ç›˜å·æŒ‚è½½åˆ°-mnt"><a href="#5-1-å°†æ ¹ç£ç›˜å·æŒ‚è½½åˆ°-mnt" class="headerlink" title="5.1 å°†æ ¹ç£ç›˜å·æŒ‚è½½åˆ°&#x2F;mnt"></a>5.1 å°†æ ¹ç£ç›˜å·æŒ‚è½½åˆ°&#x2F;mnt</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount /dev/root_partitionï¼ˆæ ¹åˆ†åŒºï¼‰ /mnt<br></code></pre></td></tr></table></figure><h4 id="5-2-ç„¶åä½¿ç”¨mkdiråœ¨-mntä¸‹åˆ›å»ºä»»ä½•å‰©ä½™çš„æŒ‚è½½ç‚¹ï¼ˆä¾‹å¦‚ï¼Œä¸º-bootè€Œåˆ›å»º-mnt-bootï¼‰ï¼Œå¹¶æŒ‰ç›¸åº”çš„å±‚çº§é¡ºåºæŒ‚è½½ç›¸åº”çš„ç£ç›˜å·"><a href="#5-2-ç„¶åä½¿ç”¨mkdiråœ¨-mntä¸‹åˆ›å»ºä»»ä½•å‰©ä½™çš„æŒ‚è½½ç‚¹ï¼ˆä¾‹å¦‚ï¼Œä¸º-bootè€Œåˆ›å»º-mnt-bootï¼‰ï¼Œå¹¶æŒ‰ç›¸åº”çš„å±‚çº§é¡ºåºæŒ‚è½½ç›¸åº”çš„ç£ç›˜å·" class="headerlink" title="5.2 ç„¶åä½¿ç”¨mkdiråœ¨&#x2F;mntä¸‹åˆ›å»ºä»»ä½•å‰©ä½™çš„æŒ‚è½½ç‚¹ï¼ˆä¾‹å¦‚ï¼Œä¸º&#x2F;bootè€Œåˆ›å»º&#x2F;mnt&#x2F;bootï¼‰ï¼Œå¹¶æŒ‰ç›¸åº”çš„å±‚çº§é¡ºåºæŒ‚è½½ç›¸åº”çš„ç£ç›˜å·"></a>5.2 ç„¶åä½¿ç”¨mkdiråœ¨&#x2F;mntä¸‹åˆ›å»ºä»»ä½•å‰©ä½™çš„æŒ‚è½½ç‚¹ï¼ˆä¾‹å¦‚ï¼Œä¸º&#x2F;bootè€Œåˆ›å»º&#x2F;mnt&#x2F;bootï¼‰ï¼Œå¹¶æŒ‰ç›¸åº”çš„å±‚çº§é¡ºåºæŒ‚è½½ç›¸åº”çš„ç£ç›˜å·</h4><h4 id="æç¤ºï¼šä½¿ç”¨â€“mkdiré€‰é¡¹è¿è¡Œmountæ¥åˆ›å»ºæŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚æˆ–è€…ï¼Œå…ˆä½¿ç”¨mkdiråˆ›å»ºæŒ‚è½½ç‚¹å†æŒ‚è½½"><a href="#æç¤ºï¼šä½¿ç”¨â€“mkdiré€‰é¡¹è¿è¡Œmountæ¥åˆ›å»ºæŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚æˆ–è€…ï¼Œå…ˆä½¿ç”¨mkdiråˆ›å»ºæŒ‚è½½ç‚¹å†æŒ‚è½½" class="headerlink" title="æç¤ºï¼šä½¿ç”¨â€“mkdiré€‰é¡¹è¿è¡Œmountæ¥åˆ›å»ºæŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚æˆ–è€…ï¼Œå…ˆä½¿ç”¨mkdiråˆ›å»ºæŒ‚è½½ç‚¹å†æŒ‚è½½"></a>æç¤ºï¼šä½¿ç”¨â€“mkdiré€‰é¡¹è¿è¡Œmountæ¥åˆ›å»ºæŒ‡å®šçš„æŒ‚è½½ç‚¹ã€‚æˆ–è€…ï¼Œå…ˆä½¿ç”¨mkdiråˆ›å»ºæŒ‚è½½ç‚¹å†æŒ‚è½½</h4><h4 id="æ³¨æ„ï¼šæŒ‚è½½åˆ†åŒºä¸€å®šè¦éµå¾ªé¡ºåºï¼Œå…ˆæŒ‚è½½æ ¹ï¼ˆrootï¼‰åˆ†åŒºï¼ˆåˆ°-mntï¼‰ï¼Œå†æŒ‚è½½å¼•å¯¼ï¼ˆbootï¼‰åˆ†åŒºï¼ˆåˆ°-mnt-bootæˆ–-mnt-efiï¼Œå¦‚æœå•ç‹¬åˆ†å‡ºæ¥äº†çš„è¯ï¼‰ï¼Œæœ€åå†æŒ‚è½½å…¶ä»–åˆ†åŒºã€‚å¦åˆ™æ‚¨å¯èƒ½é‡åˆ°å®‰è£…å®Œæˆåæ— æ³•å¯åŠ¨ç³»ç»Ÿçš„é—®é¢˜"><a href="#æ³¨æ„ï¼šæŒ‚è½½åˆ†åŒºä¸€å®šè¦éµå¾ªé¡ºåºï¼Œå…ˆæŒ‚è½½æ ¹ï¼ˆrootï¼‰åˆ†åŒºï¼ˆåˆ°-mntï¼‰ï¼Œå†æŒ‚è½½å¼•å¯¼ï¼ˆbootï¼‰åˆ†åŒºï¼ˆåˆ°-mnt-bootæˆ–-mnt-efiï¼Œå¦‚æœå•ç‹¬åˆ†å‡ºæ¥äº†çš„è¯ï¼‰ï¼Œæœ€åå†æŒ‚è½½å…¶ä»–åˆ†åŒºã€‚å¦åˆ™æ‚¨å¯èƒ½é‡åˆ°å®‰è£…å®Œæˆåæ— æ³•å¯åŠ¨ç³»ç»Ÿçš„é—®é¢˜" class="headerlink" title="æ³¨æ„ï¼šæŒ‚è½½åˆ†åŒºä¸€å®šè¦éµå¾ªé¡ºåºï¼Œå…ˆæŒ‚è½½æ ¹ï¼ˆrootï¼‰åˆ†åŒºï¼ˆåˆ°&#x2F;mntï¼‰ï¼Œå†æŒ‚è½½å¼•å¯¼ï¼ˆbootï¼‰åˆ†åŒºï¼ˆåˆ°&#x2F;mnt&#x2F;bootæˆ–&#x2F;mnt&#x2F;efiï¼Œå¦‚æœå•ç‹¬åˆ†å‡ºæ¥äº†çš„è¯ï¼‰ï¼Œæœ€åå†æŒ‚è½½å…¶ä»–åˆ†åŒºã€‚å¦åˆ™æ‚¨å¯èƒ½é‡åˆ°å®‰è£…å®Œæˆåæ— æ³•å¯åŠ¨ç³»ç»Ÿçš„é—®é¢˜"></a>æ³¨æ„ï¼šæŒ‚è½½åˆ†åŒºä¸€å®šè¦éµå¾ªé¡ºåºï¼Œå…ˆæŒ‚è½½æ ¹ï¼ˆrootï¼‰åˆ†åŒºï¼ˆåˆ°&#x2F;mntï¼‰ï¼Œå†æŒ‚è½½å¼•å¯¼ï¼ˆbootï¼‰åˆ†åŒºï¼ˆåˆ°&#x2F;mnt&#x2F;bootæˆ–&#x2F;mnt&#x2F;efiï¼Œå¦‚æœå•ç‹¬åˆ†å‡ºæ¥äº†çš„è¯ï¼‰ï¼Œæœ€åå†æŒ‚è½½å…¶ä»–åˆ†åŒºã€‚å¦åˆ™æ‚¨å¯èƒ½é‡åˆ°å®‰è£…å®Œæˆåæ— æ³•å¯åŠ¨ç³»ç»Ÿçš„é—®é¢˜</h4><h4 id="å¯¹äº-UEFI-ç³»ç»Ÿï¼ŒæŒ‚è½½-EFI-ç³»ç»Ÿåˆ†åŒº"><a href="#å¯¹äº-UEFI-ç³»ç»Ÿï¼ŒæŒ‚è½½-EFI-ç³»ç»Ÿåˆ†åŒº" class="headerlink" title="å¯¹äº UEFI ç³»ç»Ÿï¼ŒæŒ‚è½½ EFI ç³»ç»Ÿåˆ†åŒº"></a>å¯¹äº UEFI ç³»ç»Ÿï¼ŒæŒ‚è½½ EFI ç³»ç»Ÿåˆ†åŒº</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mount --<span class="hljs-built_in">mkdir</span> /dev/efi_system_partition /mnt/boot<br></code></pre></td></tr></table></figure><h4 id="5-3-å¦‚æœåˆ›å»ºäº†äº¤æ¢ç©ºé—´å·ï¼Œè¯·ä½¿ç”¨swaponå¯ç”¨å®ƒ"><a href="#5-3-å¦‚æœåˆ›å»ºäº†äº¤æ¢ç©ºé—´å·ï¼Œè¯·ä½¿ç”¨swaponå¯ç”¨å®ƒ" class="headerlink" title="5.3 å¦‚æœåˆ›å»ºäº†äº¤æ¢ç©ºé—´å·ï¼Œè¯·ä½¿ç”¨swaponå¯ç”¨å®ƒ"></a>5.3 å¦‚æœåˆ›å»ºäº†äº¤æ¢ç©ºé—´å·ï¼Œè¯·ä½¿ç”¨swaponå¯ç”¨å®ƒ</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">swapon <span class="hljs-regexp">/dev/</span>swap_partitionï¼ˆäº¤æ¢ç©ºé—´åˆ†åŒºï¼‰<br></code></pre></td></tr></table></figure><h2 id="6-å®‰è£…ç³»ç»Ÿ"><a href="#6-å®‰è£…ç³»ç»Ÿ" class="headerlink" title="6.å®‰è£…ç³»ç»Ÿ"></a>6.å®‰è£…ç³»ç»Ÿ</h2><h4 id="6-1-é€‰æ‹©é•œåƒæº-etc-pacman-d-mirrorlistä¸­å®šä¹‰äº†è½¯ä»¶åŒ…ä¼šä»å“ªä¸ªé•œåƒç«™ä¸‹è½½ï¼Œåœ¨-LiveCD-å¯åŠ¨çš„ç³»ç»Ÿä¸Šï¼Œä¸”åœ¨è¿æ¥åˆ°äº’è”ç½‘åï¼Œreflectorä¼šé€šè¿‡é€‰æ‹©-20-ä¸ªæœ€æ–°åŒæ­¥çš„-HTTPS-é•œåƒç«™å¹¶æŒ‰ä¸‹è½½é€Ÿç‡å¯¹å…¶è¿›è¡Œæ’åºæ¥æ›´æ–°é•œåƒåˆ—è¡¨"><a href="#6-1-é€‰æ‹©é•œåƒæº-etc-pacman-d-mirrorlistä¸­å®šä¹‰äº†è½¯ä»¶åŒ…ä¼šä»å“ªä¸ªé•œåƒç«™ä¸‹è½½ï¼Œåœ¨-LiveCD-å¯åŠ¨çš„ç³»ç»Ÿä¸Šï¼Œä¸”åœ¨è¿æ¥åˆ°äº’è”ç½‘åï¼Œreflectorä¼šé€šè¿‡é€‰æ‹©-20-ä¸ªæœ€æ–°åŒæ­¥çš„-HTTPS-é•œåƒç«™å¹¶æŒ‰ä¸‹è½½é€Ÿç‡å¯¹å…¶è¿›è¡Œæ’åºæ¥æ›´æ–°é•œåƒåˆ—è¡¨" class="headerlink" title="6.1 é€‰æ‹©é•œåƒæº&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistä¸­å®šä¹‰äº†è½¯ä»¶åŒ…ä¼šä»å“ªä¸ªé•œåƒç«™ä¸‹è½½ï¼Œåœ¨ LiveCD å¯åŠ¨çš„ç³»ç»Ÿä¸Šï¼Œä¸”åœ¨è¿æ¥åˆ°äº’è”ç½‘åï¼Œreflectorä¼šé€šè¿‡é€‰æ‹© 20 ä¸ªæœ€æ–°åŒæ­¥çš„ HTTPS é•œåƒç«™å¹¶æŒ‰ä¸‹è½½é€Ÿç‡å¯¹å…¶è¿›è¡Œæ’åºæ¥æ›´æ–°é•œåƒåˆ—è¡¨"></a>6.1 é€‰æ‹©é•œåƒæº&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistä¸­å®šä¹‰äº†è½¯ä»¶åŒ…ä¼šä»å“ªä¸ªé•œåƒç«™ä¸‹è½½ï¼Œåœ¨ LiveCD å¯åŠ¨çš„ç³»ç»Ÿä¸Šï¼Œä¸”åœ¨è¿æ¥åˆ°äº’è”ç½‘åï¼Œreflectorä¼šé€šè¿‡é€‰æ‹© 20 ä¸ªæœ€æ–°åŒæ­¥çš„ HTTPS é•œåƒç«™å¹¶æŒ‰ä¸‹è½½é€Ÿç‡å¯¹å…¶è¿›è¡Œæ’åºæ¥æ›´æ–°é•œåƒåˆ—è¡¨</h4><h4 id="åœ¨åˆ—è¡¨ä¸­ï¼Œè¶Šé å‰çš„é•œåƒç«™åœ¨ä¸‹è½½è½¯ä»¶åŒ…æ—¶ï¼Œå°±ä¼šæœ‰è¶Šé«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æ‚¨æ£€æŸ¥-etc-pacman-d-mirrorlistæ–‡ä»¶ï¼Œçœ‹çœ‹åˆ—å‡ºçš„é•œåƒç«™çš„é¡ºåºæ˜¯å¦åˆé€‚ã€‚å¦‚æœä¸åˆé€‚ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘æ–‡ä»¶ï¼Œå°†ç¦»æ‚¨æ‰€å¤„åœ°ç†ä½ç½®æœ€è¿‘çš„é•œåƒæŒªåˆ°æ–‡ä»¶çš„å¤´éƒ¨ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥è€ƒè™‘ä¸€äº›å…¶ä»–çš„è¯„åˆ¤æ ‡å‡†"><a href="#åœ¨åˆ—è¡¨ä¸­ï¼Œè¶Šé å‰çš„é•œåƒç«™åœ¨ä¸‹è½½è½¯ä»¶åŒ…æ—¶ï¼Œå°±ä¼šæœ‰è¶Šé«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æ‚¨æ£€æŸ¥-etc-pacman-d-mirrorlistæ–‡ä»¶ï¼Œçœ‹çœ‹åˆ—å‡ºçš„é•œåƒç«™çš„é¡ºåºæ˜¯å¦åˆé€‚ã€‚å¦‚æœä¸åˆé€‚ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘æ–‡ä»¶ï¼Œå°†ç¦»æ‚¨æ‰€å¤„åœ°ç†ä½ç½®æœ€è¿‘çš„é•œåƒæŒªåˆ°æ–‡ä»¶çš„å¤´éƒ¨ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥è€ƒè™‘ä¸€äº›å…¶ä»–çš„è¯„åˆ¤æ ‡å‡†" class="headerlink" title="åœ¨åˆ—è¡¨ä¸­ï¼Œè¶Šé å‰çš„é•œåƒç«™åœ¨ä¸‹è½½è½¯ä»¶åŒ…æ—¶ï¼Œå°±ä¼šæœ‰è¶Šé«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æ‚¨æ£€æŸ¥&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶ï¼Œçœ‹çœ‹åˆ—å‡ºçš„é•œåƒç«™çš„é¡ºåºæ˜¯å¦åˆé€‚ã€‚å¦‚æœä¸åˆé€‚ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘æ–‡ä»¶ï¼Œå°†ç¦»æ‚¨æ‰€å¤„åœ°ç†ä½ç½®æœ€è¿‘çš„é•œåƒæŒªåˆ°æ–‡ä»¶çš„å¤´éƒ¨ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥è€ƒè™‘ä¸€äº›å…¶ä»–çš„è¯„åˆ¤æ ‡å‡†"></a>åœ¨åˆ—è¡¨ä¸­ï¼Œè¶Šé å‰çš„é•œåƒç«™åœ¨ä¸‹è½½è½¯ä»¶åŒ…æ—¶ï¼Œå°±ä¼šæœ‰è¶Šé«˜çš„ä¼˜å…ˆçº§ã€‚è¯·æ‚¨æ£€æŸ¥&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶ï¼Œçœ‹çœ‹åˆ—å‡ºçš„é•œåƒç«™çš„é¡ºåºæ˜¯å¦åˆé€‚ã€‚å¦‚æœä¸åˆé€‚ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘æ–‡ä»¶ï¼Œå°†ç¦»æ‚¨æ‰€å¤„åœ°ç†ä½ç½®æœ€è¿‘çš„é•œåƒæŒªåˆ°æ–‡ä»¶çš„å¤´éƒ¨ï¼ŒåŒæ—¶ä¹Ÿåº”è¯¥è€ƒè™‘ä¸€äº›å…¶ä»–çš„è¯„åˆ¤æ ‡å‡†</h4><h4 id="å¦‚æœ-etc-pacman-d-mirrorlistæ–‡ä»¶ä¸­æ²¡æœ‰åˆé€‚çš„é•œåƒç«™ï¼Œå¯ä»¥æ‰‹åŠ¨ä»archlinux-å®˜æ–¹ç½‘ç«™çš„é•œåƒç«™åˆ—è¡¨ä¸‹è½½ä¸€ä»½ã€‚è¿™éœ€è¦æ‚¨æ‰€åœ¨çš„ç½‘ç»œèƒ½å¤Ÿæ­£å¸¸è®¿é—®-archlinux-å®˜æ–¹ç½‘ç«™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨curlä¸‹è½½ä½äºä¸­å›½å¤§é™†çš„-HTTPS-é•œåƒç«™ï¼š"><a href="#å¦‚æœ-etc-pacman-d-mirrorlistæ–‡ä»¶ä¸­æ²¡æœ‰åˆé€‚çš„é•œåƒç«™ï¼Œå¯ä»¥æ‰‹åŠ¨ä»archlinux-å®˜æ–¹ç½‘ç«™çš„é•œåƒç«™åˆ—è¡¨ä¸‹è½½ä¸€ä»½ã€‚è¿™éœ€è¦æ‚¨æ‰€åœ¨çš„ç½‘ç»œèƒ½å¤Ÿæ­£å¸¸è®¿é—®-archlinux-å®˜æ–¹ç½‘ç«™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨curlä¸‹è½½ä½äºä¸­å›½å¤§é™†çš„-HTTPS-é•œåƒç«™ï¼š" class="headerlink" title="å¦‚æœ&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶ä¸­æ²¡æœ‰åˆé€‚çš„é•œåƒç«™ï¼Œå¯ä»¥æ‰‹åŠ¨ä»archlinux å®˜æ–¹ç½‘ç«™çš„é•œåƒç«™åˆ—è¡¨ä¸‹è½½ä¸€ä»½ã€‚è¿™éœ€è¦æ‚¨æ‰€åœ¨çš„ç½‘ç»œèƒ½å¤Ÿæ­£å¸¸è®¿é—® archlinux å®˜æ–¹ç½‘ç«™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨curlä¸‹è½½ä½äºä¸­å›½å¤§é™†çš„ HTTPS é•œåƒç«™ï¼š"></a>å¦‚æœ&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶ä¸­æ²¡æœ‰åˆé€‚çš„é•œåƒç«™ï¼Œå¯ä»¥æ‰‹åŠ¨ä»archlinux å®˜æ–¹ç½‘ç«™çš„é•œåƒç«™åˆ—è¡¨ä¸‹è½½ä¸€ä»½ã€‚è¿™éœ€è¦æ‚¨æ‰€åœ¨çš„ç½‘ç»œèƒ½å¤Ÿæ­£å¸¸è®¿é—® archlinux å®˜æ–¹ç½‘ç«™ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨curlä¸‹è½½ä½äºä¸­å›½å¤§é™†çš„ HTTPS é•œåƒç«™ï¼š</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">curl -L <span class="hljs-string">&#x27;https://archlinux.org/mirrorlist/?country=CN&amp;protocol=https&#x27;</span> -o <span class="hljs-regexp">/etc/</span>pacman.d/mirrorlist<br></code></pre></td></tr></table></figure><h4 id="æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…pacman-mirrorlisåŒ…æ¥è·å–æŒ‰å›½å®¶åˆ†åˆ—çš„åŸå§‹é•œåƒåˆ—è¡¨ã€‚è¿™ä¹ˆåšçš„ç¼ºç‚¹æ˜¯pacmanä»ç„¶ä¼šä½¿ç”¨å½“å‰é…ç½®ä¸­çš„é•œåƒç«™æ¥ä¸‹è½½è½¯ä»¶åŒ…æ•°æ®åº“å’Œpacman-mirrorlisåŒ…ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæ…¢ã€‚åœ¨æŒ‘é€‰äº†èƒ½ç”¨çš„é•œåƒä¹‹åï¼Œå¯ä»¥æ‰§è¡Œ"><a href="#æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…pacman-mirrorlisåŒ…æ¥è·å–æŒ‰å›½å®¶åˆ†åˆ—çš„åŸå§‹é•œåƒåˆ—è¡¨ã€‚è¿™ä¹ˆåšçš„ç¼ºç‚¹æ˜¯pacmanä»ç„¶ä¼šä½¿ç”¨å½“å‰é…ç½®ä¸­çš„é•œåƒç«™æ¥ä¸‹è½½è½¯ä»¶åŒ…æ•°æ®åº“å’Œpacman-mirrorlisåŒ…ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæ…¢ã€‚åœ¨æŒ‘é€‰äº†èƒ½ç”¨çš„é•œåƒä¹‹åï¼Œå¯ä»¥æ‰§è¡Œ" class="headerlink" title="æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…pacman-mirrorlisåŒ…æ¥è·å–æŒ‰å›½å®¶åˆ†åˆ—çš„åŸå§‹é•œåƒåˆ—è¡¨ã€‚è¿™ä¹ˆåšçš„ç¼ºç‚¹æ˜¯pacmanä»ç„¶ä¼šä½¿ç”¨å½“å‰é…ç½®ä¸­çš„é•œåƒç«™æ¥ä¸‹è½½è½¯ä»¶åŒ…æ•°æ®åº“å’Œpacman-mirrorlisåŒ…ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæ…¢ã€‚åœ¨æŒ‘é€‰äº†èƒ½ç”¨çš„é•œåƒä¹‹åï¼Œå¯ä»¥æ‰§è¡Œ"></a>æˆ–è€…ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®‰è£…pacman-mirrorlisåŒ…æ¥è·å–æŒ‰å›½å®¶åˆ†åˆ—çš„åŸå§‹é•œåƒåˆ—è¡¨ã€‚è¿™ä¹ˆåšçš„ç¼ºç‚¹æ˜¯pacmanä»ç„¶ä¼šä½¿ç”¨å½“å‰é…ç½®ä¸­çš„é•œåƒç«™æ¥ä¸‹è½½è½¯ä»¶åŒ…æ•°æ®åº“å’Œpacman-mirrorlisåŒ…ï¼Œè¿™å¯èƒ½ä¼šå¾ˆæ…¢ã€‚åœ¨æŒ‘é€‰äº†èƒ½ç”¨çš„é•œåƒä¹‹åï¼Œå¯ä»¥æ‰§è¡Œ</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Sy</span><br></code></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -Sy pacman-mirrorlist</span><br></code></pre></td></tr></table></figure><h4 id="å†å°†-etc-pacman-d-mirrorlist-pacnewå¤åˆ¶åˆ°-etc-pacman-d-mirrorlistå¹¶è¿›è¡Œç¼–è¾‘æˆ–è€…ï¼Œå¦‚æœæ‚¨è®°å¾—æƒ³è¦ä½¿ç”¨çš„é•œåƒç«™çš„URLå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘-etc-pacman-d-mirrorlistæ–‡ä»¶å¹¶æ‰‹åŠ¨è¾“-å…¥-URL"><a href="#å†å°†-etc-pacman-d-mirrorlist-pacnewå¤åˆ¶åˆ°-etc-pacman-d-mirrorlistå¹¶è¿›è¡Œç¼–è¾‘æˆ–è€…ï¼Œå¦‚æœæ‚¨è®°å¾—æƒ³è¦ä½¿ç”¨çš„é•œåƒç«™çš„URLå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘-etc-pacman-d-mirrorlistæ–‡ä»¶å¹¶æ‰‹åŠ¨è¾“-å…¥-URL" class="headerlink" title="å†å°†&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlist.pacnewå¤åˆ¶åˆ°&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistå¹¶è¿›è¡Œç¼–è¾‘æˆ–è€…ï¼Œå¦‚æœæ‚¨è®°å¾—æƒ³è¦ä½¿ç”¨çš„é•œåƒç«™çš„URLå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶å¹¶æ‰‹åŠ¨è¾“  å…¥ URL"></a>å†å°†&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlist.pacnewå¤åˆ¶åˆ°&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistå¹¶è¿›è¡Œç¼–è¾‘æˆ–è€…ï¼Œå¦‚æœæ‚¨è®°å¾—æƒ³è¦ä½¿ç”¨çš„é•œåƒç«™çš„URLå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘&#x2F;etc&#x2F;pacman.d&#x2F;mirrorlistæ–‡ä»¶å¹¶æ‰‹åŠ¨è¾“  å…¥ URL</h4><h4 id="6-2-ä½¿ç”¨pacstrapè„šæœ¬ï¼Œå®‰è£…baseåŒ…è½¯ä»¶åŒ…å’ŒLinuxå†…æ ¸ä»¥åŠå¸¸è§„ç¡¬ä»¶çš„å›ºä»¶"><a href="#6-2-ä½¿ç”¨pacstrapè„šæœ¬ï¼Œå®‰è£…baseåŒ…è½¯ä»¶åŒ…å’ŒLinuxå†…æ ¸ä»¥åŠå¸¸è§„ç¡¬ä»¶çš„å›ºä»¶" class="headerlink" title="6.2 ä½¿ç”¨pacstrapè„šæœ¬ï¼Œå®‰è£…baseåŒ…è½¯ä»¶åŒ…å’ŒLinuxå†…æ ¸ä»¥åŠå¸¸è§„ç¡¬ä»¶çš„å›ºä»¶"></a>6.2 ä½¿ç”¨pacstrapè„šæœ¬ï¼Œå®‰è£…baseåŒ…è½¯ä»¶åŒ…å’ŒLinuxå†…æ ¸ä»¥åŠå¸¸è§„ç¡¬ä»¶çš„å›ºä»¶</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">pacstrap -K /mnt <span class="hljs-keyword">base</span> linux linux-firmware <span class="hljs-keyword">base</span>-devel networkmanager openssh dhcpcd vim net-tools<br></code></pre></td></tr></table></figure><h4 id="è¿™æ—¶å€™å¯ä»¥åŒæ—¶é¢å¤–å®‰è£…è®¡ç®—æœºçš„-CPU-å¾®ç åŒ…ï¼Œä½¿ç”¨intel-ucodeå’Œamd-ucodeåŒ…ã€‚ä¹Ÿå¯ä»¥æš‚æ—¶éƒ½ä¸å®‰è£…ï¼Œç­‰åˆ°è¿›å…¥ç³»ç»Ÿåå†å®‰è£…"><a href="#è¿™æ—¶å€™å¯ä»¥åŒæ—¶é¢å¤–å®‰è£…è®¡ç®—æœºçš„-CPU-å¾®ç åŒ…ï¼Œä½¿ç”¨intel-ucodeå’Œamd-ucodeåŒ…ã€‚ä¹Ÿå¯ä»¥æš‚æ—¶éƒ½ä¸å®‰è£…ï¼Œç­‰åˆ°è¿›å…¥ç³»ç»Ÿåå†å®‰è£…" class="headerlink" title="è¿™æ—¶å€™å¯ä»¥åŒæ—¶é¢å¤–å®‰è£…è®¡ç®—æœºçš„ CPU å¾®ç åŒ…ï¼Œä½¿ç”¨intel-ucodeå’Œamd-ucodeåŒ…ã€‚ä¹Ÿå¯ä»¥æš‚æ—¶éƒ½ä¸å®‰è£…ï¼Œç­‰åˆ°è¿›å…¥ç³»ç»Ÿåå†å®‰è£…"></a>è¿™æ—¶å€™å¯ä»¥åŒæ—¶é¢å¤–å®‰è£…è®¡ç®—æœºçš„ CPU å¾®ç åŒ…ï¼Œä½¿ç”¨intel-ucodeå’Œamd-ucodeåŒ…ã€‚ä¹Ÿå¯ä»¥æš‚æ—¶éƒ½ä¸å®‰è£…ï¼Œç­‰åˆ°è¿›å…¥ç³»ç»Ÿåå†å®‰è£…</h4><h4 id="æ–°å®‰è£…çš„ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ–‡æœ¬ç¼–è¾‘å™¨çš„ï¼Œæ‰€ä»¥è¯·æ‚¨å…ˆå®‰è£…æ–‡æœ¬ç¼–è¾‘å™¨å¦‚nanoæˆ–è€…vim"><a href="#æ–°å®‰è£…çš„ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ–‡æœ¬ç¼–è¾‘å™¨çš„ï¼Œæ‰€ä»¥è¯·æ‚¨å…ˆå®‰è£…æ–‡æœ¬ç¼–è¾‘å™¨å¦‚nanoæˆ–è€…vim" class="headerlink" title="æ–°å®‰è£…çš„ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ–‡æœ¬ç¼–è¾‘å™¨çš„ï¼Œæ‰€ä»¥è¯·æ‚¨å…ˆå®‰è£…æ–‡æœ¬ç¼–è¾‘å™¨å¦‚nanoæˆ–è€…vim"></a>æ–°å®‰è£…çš„ç³»ç»Ÿä¸­æ˜¯æ²¡æœ‰æ–‡æœ¬ç¼–è¾‘å™¨çš„ï¼Œæ‰€ä»¥è¯·æ‚¨å…ˆå®‰è£…æ–‡æœ¬ç¼–è¾‘å™¨å¦‚nanoæˆ–è€…vim</h4><h2 id="7-ç”Ÿæˆfstabæ–‡ä»¶"><a href="#7-ç”Ÿæˆfstabæ–‡ä»¶" class="headerlink" title="7.ç”Ÿæˆfstabæ–‡ä»¶"></a>7.ç”Ÿæˆfstabæ–‡ä»¶</h2><h4 id="7-1-é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆfstabæ–‡ä»¶ï¼ˆç”¨-Uæˆ–-Lé€‰é¡¹è®¾ç½®UUIDæˆ–å·æ ‡ï¼‰"><a href="#7-1-é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆfstabæ–‡ä»¶ï¼ˆç”¨-Uæˆ–-Lé€‰é¡¹è®¾ç½®UUIDæˆ–å·æ ‡ï¼‰" class="headerlink" title="7.1 é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆfstabæ–‡ä»¶ï¼ˆç”¨-Uæˆ–-Lé€‰é¡¹è®¾ç½®UUIDæˆ–å·æ ‡ï¼‰"></a>7.1 é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆfstabæ–‡ä»¶ï¼ˆç”¨-Uæˆ–-Lé€‰é¡¹è®¾ç½®UUIDæˆ–å·æ ‡ï¼‰</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">genfstab -U <span class="hljs-regexp">/mnt &gt; /m</span>nt<span class="hljs-regexp">/etc/</span>fstab<br></code></pre></td></tr></table></figure><h4 id="7-2-å¼ºçƒˆå»ºè®®åœ¨æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œæ£€æŸ¥ä¸€ä¸‹ç”Ÿæˆçš„-mnt-etc-fstabæ–‡ä»¶æ˜¯å¦æ­£ç¡®"><a href="#7-2-å¼ºçƒˆå»ºè®®åœ¨æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œæ£€æŸ¥ä¸€ä¸‹ç”Ÿæˆçš„-mnt-etc-fstabæ–‡ä»¶æ˜¯å¦æ­£ç¡®" class="headerlink" title="7.2 å¼ºçƒˆå»ºè®®åœ¨æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œæ£€æŸ¥ä¸€ä¸‹ç”Ÿæˆçš„&#x2F;mnt&#x2F;etc&#x2F;fstabæ–‡ä»¶æ˜¯å¦æ­£ç¡®"></a>7.2 å¼ºçƒˆå»ºè®®åœ¨æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼Œæ£€æŸ¥ä¸€ä¸‹ç”Ÿæˆçš„&#x2F;mnt&#x2F;etc&#x2F;fstabæ–‡ä»¶æ˜¯å¦æ­£ç¡®</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /mnt/etc/fstab<br></code></pre></td></tr></table></figure><h2 id="8-é…ç½®æ–°å®‰è£…çš„ç³»ç»Ÿ"><a href="#8-é…ç½®æ–°å®‰è£…çš„ç³»ç»Ÿ" class="headerlink" title="8.é…ç½®æ–°å®‰è£…çš„ç³»ç»Ÿ"></a>8.é…ç½®æ–°å®‰è£…çš„ç³»ç»Ÿ</h2><h4 id="8-1-é€šè¿‡ä»¥ä¸‹å‘½ä»¤chrootåˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ"><a href="#8-1-é€šè¿‡ä»¥ä¸‹å‘½ä»¤chrootåˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ" class="headerlink" title="8.1 é€šè¿‡ä»¥ä¸‹å‘½ä»¤chrootåˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ"></a>8.1 é€šè¿‡ä»¥ä¸‹å‘½ä»¤chrootåˆ°æ–°å®‰è£…çš„ç³»ç»Ÿ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">arch-chroot /mnt<br></code></pre></td></tr></table></figure><h4 id="8-2-è®¾ç½®æ—¶åŒºï¼š"><a href="#8-2-è®¾ç½®æ—¶åŒºï¼š" class="headerlink" title="8.2 è®¾ç½®æ—¶åŒºï¼š"></a>8.2 è®¾ç½®æ—¶åŒºï¼š</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">ln -sf <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/zoneinfo/</span>Asia<span class="hljs-regexp">/Shanghai /</span>etc/localtime<br></code></pre></td></tr></table></figure><h4 id="8-3-è¿è¡Œhwclockä»¥ç”Ÿæˆ-etc-adjtime"><a href="#8-3-è¿è¡Œhwclockä»¥ç”Ÿæˆ-etc-adjtime" class="headerlink" title="8.3 è¿è¡Œhwclockä»¥ç”Ÿæˆ&#x2F;etc&#x2F;adjtime"></a>8.3 è¿è¡Œhwclockä»¥ç”Ÿæˆ&#x2F;etc&#x2F;adjtime</h4><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">hwclock <span class="hljs-comment">--systohc</span><br></code></pre></td></tr></table></figure><h4 id="8-4-åŒºåŸŸå’Œæœ¬åœ°åŒ–è®¾ç½®"><a href="#8-4-åŒºåŸŸå’Œæœ¬åœ°åŒ–è®¾ç½®" class="headerlink" title="8.4 åŒºåŸŸå’Œæœ¬åœ°åŒ–è®¾ç½®"></a>8.4 åŒºåŸŸå’Œæœ¬åœ°åŒ–è®¾ç½®</h4><h4 id="ç¨‹åºå’Œåº“å¦‚æœéœ€è¦æœ¬åœ°åŒ–æ–‡æœ¬ï¼Œéƒ½ä¾èµ–åŒºåŸŸè®¾ç½®ï¼Œåè€…æ˜ç¡®è§„å®šäº†åœ°åŸŸã€è´§å¸ã€æ—¶åŒºæ—¥æœŸçš„æ ¼å¼ã€å­—ç¬¦æ’åˆ—æ–¹å¼å’Œå…¶ä»–æœ¬åœ°åŒ–æ ‡å‡†"><a href="#ç¨‹åºå’Œåº“å¦‚æœéœ€è¦æœ¬åœ°åŒ–æ–‡æœ¬ï¼Œéƒ½ä¾èµ–åŒºåŸŸè®¾ç½®ï¼Œåè€…æ˜ç¡®è§„å®šäº†åœ°åŸŸã€è´§å¸ã€æ—¶åŒºæ—¥æœŸçš„æ ¼å¼ã€å­—ç¬¦æ’åˆ—æ–¹å¼å’Œå…¶ä»–æœ¬åœ°åŒ–æ ‡å‡†" class="headerlink" title="ç¨‹åºå’Œåº“å¦‚æœéœ€è¦æœ¬åœ°åŒ–æ–‡æœ¬ï¼Œéƒ½ä¾èµ–åŒºåŸŸè®¾ç½®ï¼Œåè€…æ˜ç¡®è§„å®šäº†åœ°åŸŸã€è´§å¸ã€æ—¶åŒºæ—¥æœŸçš„æ ¼å¼ã€å­—ç¬¦æ’åˆ—æ–¹å¼å’Œå…¶ä»–æœ¬åœ°åŒ–æ ‡å‡†"></a>ç¨‹åºå’Œåº“å¦‚æœéœ€è¦æœ¬åœ°åŒ–æ–‡æœ¬ï¼Œéƒ½ä¾èµ–åŒºåŸŸè®¾ç½®ï¼Œåè€…æ˜ç¡®è§„å®šäº†åœ°åŸŸã€è´§å¸ã€æ—¶åŒºæ—¥æœŸçš„æ ¼å¼ã€å­—ç¬¦æ’åˆ—æ–¹å¼å’Œå…¶ä»–æœ¬åœ°åŒ–æ ‡å‡†</h4><h4 id="éœ€è¦è®¾ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶locale-genä¸locale-conf"><a href="#éœ€è¦è®¾ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶locale-genä¸locale-conf" class="headerlink" title="éœ€è¦è®¾ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶locale.genä¸locale.conf"></a>éœ€è¦è®¾ç½®è¿™ä¸¤ä¸ªæ–‡ä»¶locale.genä¸locale.conf</h4><h4 id="ç¼–è¾‘-etc-locale-genå–æ¶ˆæ‰en-US-UTF-8-UTF-8å’Œå…¶ä»–éœ€è¦çš„-UTF-8åŒºåŸŸè®¾ç½®å‰çš„æ³¨é‡Š"><a href="#ç¼–è¾‘-etc-locale-genå–æ¶ˆæ‰en-US-UTF-8-UTF-8å’Œå…¶ä»–éœ€è¦çš„-UTF-8åŒºåŸŸè®¾ç½®å‰çš„æ³¨é‡Š" class="headerlink" title="ç¼–è¾‘&#x2F;etc&#x2F;locale.genå–æ¶ˆæ‰en_US.UTF-8 UTF-8å’Œå…¶ä»–éœ€è¦çš„ UTF-8åŒºåŸŸè®¾ç½®å‰çš„æ³¨é‡Š#"></a>ç¼–è¾‘&#x2F;etc&#x2F;locale.genå–æ¶ˆæ‰en_US.UTF-8 UTF-8å’Œå…¶ä»–éœ€è¦çš„ UTF-8åŒºåŸŸè®¾ç½®å‰çš„æ³¨é‡Š#</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>locale.gen<br></code></pre></td></tr></table></figure><h4 id="8-5-æ¥ç€æ‰§è¡Œlocale-genä»¥ç”Ÿæˆlocaleä¿¡æ¯"><a href="#8-5-æ¥ç€æ‰§è¡Œlocale-genä»¥ç”Ÿæˆlocaleä¿¡æ¯" class="headerlink" title="8.5 æ¥ç€æ‰§è¡Œlocale-genä»¥ç”Ÿæˆlocaleä¿¡æ¯"></a>8.5 æ¥ç€æ‰§è¡Œlocale-genä»¥ç”Ÿæˆlocaleä¿¡æ¯</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">locale-gen</span><br></code></pre></td></tr></table></figure><h4 id="8-6-ç„¶ååˆ›å»ºlocale-confæ–‡ä»¶å¹¶ç¼–è¾‘è®¾å®šLANGå˜é‡"><a href="#8-6-ç„¶ååˆ›å»ºlocale-confæ–‡ä»¶å¹¶ç¼–è¾‘è®¾å®šLANGå˜é‡" class="headerlink" title="8.6 ç„¶ååˆ›å»ºlocale.confæ–‡ä»¶å¹¶ç¼–è¾‘è®¾å®šLANGå˜é‡"></a>8.6 ç„¶ååˆ›å»ºlocale.confæ–‡ä»¶å¹¶ç¼–è¾‘è®¾å®šLANGå˜é‡</h4><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs abnf">/etc/locale.conf<br><span class="hljs-attribute">LANG</span><span class="hljs-operator">=</span>en_US.UTF-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h4 id="8-7-è®¾ç½®ä¸»æœºåï¼ˆzjh-archnotebookï¼‰"><a href="#8-7-è®¾ç½®ä¸»æœºåï¼ˆzjh-archnotebookï¼‰" class="headerlink" title="8.7 è®¾ç½®ä¸»æœºåï¼ˆzjh@archnotebookï¼‰"></a>8.7 è®¾ç½®ä¸»æœºåï¼ˆzjh@archnotebookï¼‰</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">vim</span> /etc/<span class="hljs-built_in">hostname</span><br></code></pre></td></tr></table></figure><h4 id="8-8-è®¾ç½®ç½‘ç»œï¼ˆå¯è·³è¿‡ï¼‰"><a href="#8-8-è®¾ç½®ç½‘ç»œï¼ˆå¯è·³è¿‡ï¼‰" class="headerlink" title="8.8 è®¾ç½®ç½‘ç»œï¼ˆå¯è·³è¿‡ï¼‰"></a>8.8 è®¾ç½®ç½‘ç»œï¼ˆå¯è·³è¿‡ï¼‰</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>hosts<br></code></pre></td></tr></table></figure><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1</span>localhost<br>::<span class="hljs-number">1</span>localhost<br><span class="hljs-number">127.0.1.1</span>ä¸»æœºå.localdomainä¸»æœºå<br></code></pre></td></tr></table></figure><h4 id="8-9-è®¾ç½®rootå¯†ç "><a href="#8-9-è®¾ç½®rootå¯†ç " class="headerlink" title="8.9 è®¾ç½®rootå¯†ç "></a>8.9 è®¾ç½®rootå¯†ç </h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd root</span><br></code></pre></td></tr></table></figure><h2 id="9-å®‰è£…GRUBå¼•å¯¼ç¨‹åº"><a href="#9-å®‰è£…GRUBå¼•å¯¼ç¨‹åº" class="headerlink" title="9.å®‰è£…GRUBå¼•å¯¼ç¨‹åº"></a>9.å®‰è£…GRUBå¼•å¯¼ç¨‹åº</h2><h4 id="9-1-é¦–å…ˆå®‰è£…è½¯ä»¶åŒ…grubå’Œefibootmgrå…¶ä¸­GRUBæ˜¯å¯åŠ¨å¼•å¯¼å™¨ï¼Œefibootmgrè¢«GRUBè„šæœ¬ç”¨æ¥å°†å¯åŠ¨é¡¹å†™å…¥NVRAMï¼Œæƒ³è¦è®©grub-mkconfigæ¢æµ‹å…¶ä»–å·²ç»å®‰è£…çš„ç³»ç»Ÿå¼•å¯¼å¹¶è‡ªåŠ¨æŠŠä»–ä»¬æ·»åŠ åˆ°å¯åŠ¨èœå•ä¸­ï¼Œå¿…é¡»å®‰è£…os-proberåŒ…ï¼Œè¦æŒ‚åœ¨ntfsåˆ†åŒºå¿…é¡»ç”¨åˆ°ntfs-3gåŒ…"><a href="#9-1-é¦–å…ˆå®‰è£…è½¯ä»¶åŒ…grubå’Œefibootmgrå…¶ä¸­GRUBæ˜¯å¯åŠ¨å¼•å¯¼å™¨ï¼Œefibootmgrè¢«GRUBè„šæœ¬ç”¨æ¥å°†å¯åŠ¨é¡¹å†™å…¥NVRAMï¼Œæƒ³è¦è®©grub-mkconfigæ¢æµ‹å…¶ä»–å·²ç»å®‰è£…çš„ç³»ç»Ÿå¼•å¯¼å¹¶è‡ªåŠ¨æŠŠä»–ä»¬æ·»åŠ åˆ°å¯åŠ¨èœå•ä¸­ï¼Œå¿…é¡»å®‰è£…os-proberåŒ…ï¼Œè¦æŒ‚åœ¨ntfsåˆ†åŒºå¿…é¡»ç”¨åˆ°ntfs-3gåŒ…" class="headerlink" title="9.1 é¦–å…ˆå®‰è£…è½¯ä»¶åŒ…grubå’Œefibootmgrå…¶ä¸­GRUBæ˜¯å¯åŠ¨å¼•å¯¼å™¨ï¼Œefibootmgrè¢«GRUBè„šæœ¬ç”¨æ¥å°†å¯åŠ¨é¡¹å†™å…¥NVRAMï¼Œæƒ³è¦è®©grub-mkconfigæ¢æµ‹å…¶ä»–å·²ç»å®‰è£…çš„ç³»ç»Ÿå¼•å¯¼å¹¶è‡ªåŠ¨æŠŠä»–ä»¬æ·»åŠ åˆ°å¯åŠ¨èœå•ä¸­ï¼Œå¿…é¡»å®‰è£…os-proberåŒ…ï¼Œè¦æŒ‚åœ¨ntfsåˆ†åŒºå¿…é¡»ç”¨åˆ°ntfs-3gåŒ…"></a>9.1 é¦–å…ˆå®‰è£…è½¯ä»¶åŒ…grubå’Œefibootmgrå…¶ä¸­GRUBæ˜¯å¯åŠ¨å¼•å¯¼å™¨ï¼Œefibootmgrè¢«GRUBè„šæœ¬ç”¨æ¥å°†å¯åŠ¨é¡¹å†™å…¥NVRAMï¼Œæƒ³è¦è®©grub-mkconfigæ¢æµ‹å…¶ä»–å·²ç»å®‰è£…çš„ç³»ç»Ÿå¼•å¯¼å¹¶è‡ªåŠ¨æŠŠä»–ä»¬æ·»åŠ åˆ°å¯åŠ¨èœå•ä¸­ï¼Œå¿…é¡»å®‰è£…os-proberåŒ…ï¼Œè¦æŒ‚åœ¨ntfsåˆ†åŒºå¿…é¡»ç”¨åˆ°ntfs-3gåŒ…</h4><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pacman</span> -S grub efibootmgr os-prober ntfs-<span class="hljs-number">3</span>g<br></code></pre></td></tr></table></figure><h4 id="9-2-æ³¨æ„â€“efi-directoryå’Œâ€“bootloader-idæ˜¯GRUB-UEFIç‰¹æœ‰çš„â€“efi-directoryæ›¿ä»£äº†å·²ç»åºŸå¼ƒçš„â€“root-directoryæ‚¨å¯èƒ½æ³¨æ„åˆ°åœ¨grub-installå‘½ä»¤ä¸­æ²¡æœ‰device-path-é€‰é¡¹ï¼ˆä¾‹å¦‚-dev-sdaï¼‰äº‹å®ä¸Šå³ä½¿æä¾›äº†device-pathï¼Œä¹Ÿä¼šè¢«GRUB-UEFIå®‰è£…è„šæœ¬å¿½ç•¥ï¼Œå› ä¸º-UEFI-å¯åŠ¨åŠ è½½å™¨ä¸ä½¿ç”¨MBRå¯åŠ¨ä»£ç æˆ–å¯åŠ¨æ‰‡åŒº"><a href="#9-2-æ³¨æ„â€“efi-directoryå’Œâ€“bootloader-idæ˜¯GRUB-UEFIç‰¹æœ‰çš„â€“efi-directoryæ›¿ä»£äº†å·²ç»åºŸå¼ƒçš„â€“root-directoryæ‚¨å¯èƒ½æ³¨æ„åˆ°åœ¨grub-installå‘½ä»¤ä¸­æ²¡æœ‰device-path-é€‰é¡¹ï¼ˆä¾‹å¦‚-dev-sdaï¼‰äº‹å®ä¸Šå³ä½¿æä¾›äº†device-pathï¼Œä¹Ÿä¼šè¢«GRUB-UEFIå®‰è£…è„šæœ¬å¿½ç•¥ï¼Œå› ä¸º-UEFI-å¯åŠ¨åŠ è½½å™¨ä¸ä½¿ç”¨MBRå¯åŠ¨ä»£ç æˆ–å¯åŠ¨æ‰‡åŒº" class="headerlink" title="9.2 æ³¨æ„â€“efi-directoryå’Œâ€“bootloader-idæ˜¯GRUB UEFIç‰¹æœ‰çš„â€“efi-directoryæ›¿ä»£äº†å·²ç»åºŸå¼ƒçš„â€“root-directoryæ‚¨å¯èƒ½æ³¨æ„åˆ°åœ¨grub-installå‘½ä»¤ä¸­æ²¡æœ‰device_path é€‰é¡¹ï¼ˆä¾‹å¦‚ &#x2F;dev&#x2F;sdaï¼‰äº‹å®ä¸Šå³ä½¿æä¾›äº†device_pathï¼Œä¹Ÿä¼šè¢«GRUB UEFIå®‰è£…è„šæœ¬å¿½ç•¥ï¼Œå› ä¸º UEFI å¯åŠ¨åŠ è½½å™¨ä¸ä½¿ç”¨MBRå¯åŠ¨ä»£ç æˆ–å¯åŠ¨æ‰‡åŒº"></a>9.2 æ³¨æ„â€“efi-directoryå’Œâ€“bootloader-idæ˜¯GRUB UEFIç‰¹æœ‰çš„â€“efi-directoryæ›¿ä»£äº†å·²ç»åºŸå¼ƒçš„â€“root-directoryæ‚¨å¯èƒ½æ³¨æ„åˆ°åœ¨grub-installå‘½ä»¤ä¸­æ²¡æœ‰device_path é€‰é¡¹ï¼ˆä¾‹å¦‚ &#x2F;dev&#x2F;sdaï¼‰äº‹å®ä¸Šå³ä½¿æä¾›äº†device_pathï¼Œä¹Ÿä¼šè¢«GRUB UEFIå®‰è£…è„šæœ¬å¿½ç•¥ï¼Œå› ä¸º UEFI å¯åŠ¨åŠ è½½å™¨ä¸ä½¿ç”¨MBRå¯åŠ¨ä»£ç æˆ–å¯åŠ¨æ‰‡åŒº</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=esp <span class="hljs-attribute">--bootloader-id</span>=GRUB<br></code></pre></td></tr></table></figure><h4 id="9-3-å¦‚æœä½ ä½¿ç”¨äº†â€“removableé€‰é¡¹ï¼Œé‚£GRUB-å°†è¢«å®‰è£…åˆ°esp-EFI-BOOT-BOOTX64-EFIï¼ˆå½“ä½¿ç”¨i386-efiæ—¶æ˜¯esp-EFI-BOOT-BOOTIA32-EFI-ï¼‰ï¼Œæ­¤æ—¶å³ä½¿-EFI-å˜é‡è¢«é‡è®¾æˆ–è€…ä½ æŠŠè¿™ä¸ªé©±åŠ¨å™¨æ¥åˆ°å…¶ä»–ç”µè„‘ä¸Šï¼Œä½ ä»å¯ä»è¿™ä¸ªé©±åŠ¨å™¨ä¸Šå¯åŠ¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ åªè¦åƒæ“ä½œBIOS-è®¾å¤‡ä¸€æ ·åœ¨å¯åŠ¨æ—¶é€‰æ‹©è¿™ä¸ªé©±åŠ¨å™¨å°±å¯ä»¥äº†ã€‚å¦‚æœè®¾å¤‡æ˜¯åŒæ—¶å®‰è£…äº†Windowsçš„å¤šå¼•å¯¼å¯åŠ¨ï¼Œæ³¨æ„-Windows-é€šå¸¸ä¼šåœ¨è¿™é‡Œå®‰è£…ä¸€ä¸ª-EFI-å¯æ‰§è¡Œç¨‹åºï¼Œè¯¥ç¨‹åºçš„ç›®çš„æ˜¯ä»…é‡å»ºWindowsçš„UEFIå¯åŠ¨é¡¹ã€‚å¦‚æœä½ æƒ³åœ¨Macä¸Šå®‰è£…GRUBï¼Œé‚£ä½ å¿…é¡»è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚æŸäº›å°å¼æœºä¸»æ¿åªä¼šåœ¨æ­¤ä½ç½®å¯»æ‰¾-EFI-å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤è¯¥é€‰é¡¹æ˜¯å¿…éœ€çš„ï¼Œå°¤å…¶æ˜¯å¾®æ˜Ÿï¼ˆMSIï¼‰ä¸»æ¿ã€‚-å¦‚æœä½ æ›´æ–°äº†UEFIï¼Œå¯åŠ¨é¡¹å¯èƒ½ä¼šåœ¨æ›´æ–°åä¸¢å¤±ã€‚å› æ­¤å¯ä»¥åˆ›å»ºä¸€ä¸ªremovableå¯åŠ¨é¡¹ä½œä¸ºåå¤‡"><a href="#9-3-å¦‚æœä½ ä½¿ç”¨äº†â€“removableé€‰é¡¹ï¼Œé‚£GRUB-å°†è¢«å®‰è£…åˆ°esp-EFI-BOOT-BOOTX64-EFIï¼ˆå½“ä½¿ç”¨i386-efiæ—¶æ˜¯esp-EFI-BOOT-BOOTIA32-EFI-ï¼‰ï¼Œæ­¤æ—¶å³ä½¿-EFI-å˜é‡è¢«é‡è®¾æˆ–è€…ä½ æŠŠè¿™ä¸ªé©±åŠ¨å™¨æ¥åˆ°å…¶ä»–ç”µè„‘ä¸Šï¼Œä½ ä»å¯ä»è¿™ä¸ªé©±åŠ¨å™¨ä¸Šå¯åŠ¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ åªè¦åƒæ“ä½œBIOS-è®¾å¤‡ä¸€æ ·åœ¨å¯åŠ¨æ—¶é€‰æ‹©è¿™ä¸ªé©±åŠ¨å™¨å°±å¯ä»¥äº†ã€‚å¦‚æœè®¾å¤‡æ˜¯åŒæ—¶å®‰è£…äº†Windowsçš„å¤šå¼•å¯¼å¯åŠ¨ï¼Œæ³¨æ„-Windows-é€šå¸¸ä¼šåœ¨è¿™é‡Œå®‰è£…ä¸€ä¸ª-EFI-å¯æ‰§è¡Œç¨‹åºï¼Œè¯¥ç¨‹åºçš„ç›®çš„æ˜¯ä»…é‡å»ºWindowsçš„UEFIå¯åŠ¨é¡¹ã€‚å¦‚æœä½ æƒ³åœ¨Macä¸Šå®‰è£…GRUBï¼Œé‚£ä½ å¿…é¡»è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚æŸäº›å°å¼æœºä¸»æ¿åªä¼šåœ¨æ­¤ä½ç½®å¯»æ‰¾-EFI-å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤è¯¥é€‰é¡¹æ˜¯å¿…éœ€çš„ï¼Œå°¤å…¶æ˜¯å¾®æ˜Ÿï¼ˆMSIï¼‰ä¸»æ¿ã€‚-å¦‚æœä½ æ›´æ–°äº†UEFIï¼Œå¯åŠ¨é¡¹å¯èƒ½ä¼šåœ¨æ›´æ–°åä¸¢å¤±ã€‚å› æ­¤å¯ä»¥åˆ›å»ºä¸€ä¸ªremovableå¯åŠ¨é¡¹ä½œä¸ºåå¤‡" class="headerlink" title="9.3 å¦‚æœä½ ä½¿ç”¨äº†â€“removableé€‰é¡¹ï¼Œé‚£GRUB å°†è¢«å®‰è£…åˆ°esp&#x2F;EFI&#x2F;BOOT&#x2F;BOOTX64.EFIï¼ˆå½“ä½¿ç”¨i386-efiæ—¶æ˜¯esp&#x2F;EFI&#x2F;BOOT&#x2F;BOOTIA32.EFI ï¼‰ï¼Œæ­¤æ—¶å³ä½¿ EFI å˜é‡è¢«é‡è®¾æˆ–è€…ä½ æŠŠè¿™ä¸ªé©±åŠ¨å™¨æ¥åˆ°å…¶ä»–ç”µè„‘ä¸Šï¼Œä½ ä»å¯ä»è¿™ä¸ªé©±åŠ¨å™¨ä¸Šå¯åŠ¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ åªè¦åƒæ“ä½œBIOS è®¾å¤‡ä¸€æ ·åœ¨å¯åŠ¨æ—¶é€‰æ‹©è¿™ä¸ªé©±åŠ¨å™¨å°±å¯ä»¥äº†ã€‚å¦‚æœè®¾å¤‡æ˜¯åŒæ—¶å®‰è£…äº†Windowsçš„å¤šå¼•å¯¼å¯åŠ¨ï¼Œæ³¨æ„ Windows é€šå¸¸ä¼šåœ¨è¿™é‡Œå®‰è£…ä¸€ä¸ª EFI å¯æ‰§è¡Œç¨‹åºï¼Œè¯¥ç¨‹åºçš„ç›®çš„æ˜¯ä»…é‡å»ºWindowsçš„UEFIå¯åŠ¨é¡¹ã€‚å¦‚æœä½ æƒ³åœ¨Macä¸Šå®‰è£…GRUBï¼Œé‚£ä½ å¿…é¡»è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚æŸäº›å°å¼æœºä¸»æ¿åªä¼šåœ¨æ­¤ä½ç½®å¯»æ‰¾ EFI å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤è¯¥é€‰é¡¹æ˜¯å¿…éœ€çš„ï¼Œå°¤å…¶æ˜¯å¾®æ˜Ÿï¼ˆMSIï¼‰ä¸»æ¿ã€‚ å¦‚æœä½ æ›´æ–°äº†UEFIï¼Œå¯åŠ¨é¡¹å¯èƒ½ä¼šåœ¨æ›´æ–°åä¸¢å¤±ã€‚å› æ­¤å¯ä»¥åˆ›å»ºä¸€ä¸ªremovableå¯åŠ¨é¡¹ä½œä¸ºåå¤‡"></a>9.3 å¦‚æœä½ ä½¿ç”¨äº†â€“removableé€‰é¡¹ï¼Œé‚£GRUB å°†è¢«å®‰è£…åˆ°esp&#x2F;EFI&#x2F;BOOT&#x2F;BOOTX64.EFIï¼ˆå½“ä½¿ç”¨i386-efiæ—¶æ˜¯esp&#x2F;EFI&#x2F;BOOT&#x2F;BOOTIA32.EFI ï¼‰ï¼Œæ­¤æ—¶å³ä½¿ EFI å˜é‡è¢«é‡è®¾æˆ–è€…ä½ æŠŠè¿™ä¸ªé©±åŠ¨å™¨æ¥åˆ°å…¶ä»–ç”µè„‘ä¸Šï¼Œä½ ä»å¯ä»è¿™ä¸ªé©±åŠ¨å™¨ä¸Šå¯åŠ¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ åªè¦åƒæ“ä½œBIOS è®¾å¤‡ä¸€æ ·åœ¨å¯åŠ¨æ—¶é€‰æ‹©è¿™ä¸ªé©±åŠ¨å™¨å°±å¯ä»¥äº†ã€‚å¦‚æœè®¾å¤‡æ˜¯åŒæ—¶å®‰è£…äº†Windowsçš„å¤šå¼•å¯¼å¯åŠ¨ï¼Œæ³¨æ„ Windows é€šå¸¸ä¼šåœ¨è¿™é‡Œå®‰è£…ä¸€ä¸ª EFI å¯æ‰§è¡Œç¨‹åºï¼Œè¯¥ç¨‹åºçš„ç›®çš„æ˜¯ä»…é‡å»ºWindowsçš„UEFIå¯åŠ¨é¡¹ã€‚å¦‚æœä½ æƒ³åœ¨Macä¸Šå®‰è£…GRUBï¼Œé‚£ä½ å¿…é¡»è¦ä½¿ç”¨è¯¥é€‰é¡¹ã€‚æŸäº›å°å¼æœºä¸»æ¿åªä¼šåœ¨æ­¤ä½ç½®å¯»æ‰¾ EFI å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå› æ­¤è¯¥é€‰é¡¹æ˜¯å¿…éœ€çš„ï¼Œå°¤å…¶æ˜¯å¾®æ˜Ÿï¼ˆMSIï¼‰ä¸»æ¿ã€‚ å¦‚æœä½ æ›´æ–°äº†UEFIï¼Œå¯åŠ¨é¡¹å¯èƒ½ä¼šåœ¨æ›´æ–°åä¸¢å¤±ã€‚å› æ­¤å¯ä»¥åˆ›å»ºä¸€ä¸ªremovableå¯åŠ¨é¡¹ä½œä¸ºåå¤‡</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">grub-install <span class="hljs-attribute">--target</span>=x86_64-efi <span class="hljs-attribute">--efi-directory</span>=esp --removable<br></code></pre></td></tr></table></figure><h4 id="9-4-ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶"><a href="#9-4-ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶" class="headerlink" title="9.4 ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶"></a>9.4 ç”Ÿæˆä¸»é…ç½®æ–‡ä»¶</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">grub-mkconfig -o <span class="hljs-regexp">/boot/g</span>rub/grub.cfg<br></code></pre></td></tr></table></figure><h4 id="9-5-é€€å‡ºarch-chroot"><a href="#9-5-é€€å‡ºarch-chroot" class="headerlink" title="9.5 é€€å‡ºarch-chroot"></a>9.5 é€€å‡ºarch-chroot</h4><h4 id="è¾“å…¥exitæˆ–æŒ‰Ctrl-dé€€å‡º-chroot-ç¯å¢ƒ"><a href="#è¾“å…¥exitæˆ–æŒ‰Ctrl-dé€€å‡º-chroot-ç¯å¢ƒ" class="headerlink" title="è¾“å…¥exitæˆ–æŒ‰Ctrl+dé€€å‡º chroot ç¯å¢ƒ"></a>è¾“å…¥exitæˆ–æŒ‰Ctrl+dé€€å‡º chroot ç¯å¢ƒ</h4><h4 id="å¯é€‰ç”¨umount-R-mntæ‰‹åŠ¨å¸è½½è¢«æŒ‚è½½çš„åˆ†åŒºï¼šè¿™æœ‰åŠ©äºå‘ç°ä»»ä½•â€œç¹å¿™â€çš„åˆ†åŒº"><a href="#å¯é€‰ç”¨umount-R-mntæ‰‹åŠ¨å¸è½½è¢«æŒ‚è½½çš„åˆ†åŒºï¼šè¿™æœ‰åŠ©äºå‘ç°ä»»ä½•â€œç¹å¿™â€çš„åˆ†åŒº" class="headerlink" title="å¯é€‰ç”¨umount -R &#x2F;mntæ‰‹åŠ¨å¸è½½è¢«æŒ‚è½½çš„åˆ†åŒºï¼šè¿™æœ‰åŠ©äºå‘ç°ä»»ä½•â€œç¹å¿™â€çš„åˆ†åŒº"></a>å¯é€‰ç”¨umount -R &#x2F;mntæ‰‹åŠ¨å¸è½½è¢«æŒ‚è½½çš„åˆ†åŒºï¼šè¿™æœ‰åŠ©äºå‘ç°ä»»ä½•â€œç¹å¿™â€çš„åˆ†åŒº</h4><h4 id="æœ€åï¼Œé€šè¿‡æ‰§è¡Œrebooté‡å¯ç³»ç»Ÿï¼Œsystemdå°†è‡ªåŠ¨å¸è½½ä»ç„¶æŒ‚è½½çš„ä»»ä½•åˆ†åŒºã€‚è¿™æ—¶å€™ä¸è¦å¿˜è®°ç§»é™¤å®‰è£…ä»‹è´¨ï¼Œç„¶åä½¿ç”¨rootè´¦æˆ·ç™»å½•åˆ°æ–°ç³»ç»Ÿ"><a href="#æœ€åï¼Œé€šè¿‡æ‰§è¡Œrebooté‡å¯ç³»ç»Ÿï¼Œsystemdå°†è‡ªåŠ¨å¸è½½ä»ç„¶æŒ‚è½½çš„ä»»ä½•åˆ†åŒºã€‚è¿™æ—¶å€™ä¸è¦å¿˜è®°ç§»é™¤å®‰è£…ä»‹è´¨ï¼Œç„¶åä½¿ç”¨rootè´¦æˆ·ç™»å½•åˆ°æ–°ç³»ç»Ÿ" class="headerlink" title="æœ€åï¼Œé€šè¿‡æ‰§è¡Œrebooté‡å¯ç³»ç»Ÿï¼Œsystemdå°†è‡ªåŠ¨å¸è½½ä»ç„¶æŒ‚è½½çš„ä»»ä½•åˆ†åŒºã€‚è¿™æ—¶å€™ä¸è¦å¿˜è®°ç§»é™¤å®‰è£…ä»‹è´¨ï¼Œç„¶åä½¿ç”¨rootè´¦æˆ·ç™»å½•åˆ°æ–°ç³»ç»Ÿ"></a>æœ€åï¼Œé€šè¿‡æ‰§è¡Œrebooté‡å¯ç³»ç»Ÿï¼Œsystemdå°†è‡ªåŠ¨å¸è½½ä»ç„¶æŒ‚è½½çš„ä»»ä½•åˆ†åŒºã€‚è¿™æ—¶å€™ä¸è¦å¿˜è®°ç§»é™¤å®‰è£…ä»‹è´¨ï¼Œç„¶åä½¿ç”¨rootè´¦æˆ·ç™»å½•åˆ°æ–°ç³»ç»Ÿ</h4><h4 id="é‡å¯ä¹‹åä»¥rootç”¨æˆ·ç™»å½•"><a href="#é‡å¯ä¹‹åä»¥rootç”¨æˆ·ç™»å½•" class="headerlink" title="é‡å¯ä¹‹åä»¥rootç”¨æˆ·ç™»å½•"></a>é‡å¯ä¹‹åä»¥rootç”¨æˆ·ç™»å½•</h4><h2 id="10-å¼€å¯ç½‘ç»œåˆ›å»ºç”¨æˆ·"><a href="#10-å¼€å¯ç½‘ç»œåˆ›å»ºç”¨æˆ·" class="headerlink" title="10.å¼€å¯ç½‘ç»œåˆ›å»ºç”¨æˆ·"></a>10.å¼€å¯ç½‘ç»œåˆ›å»ºç”¨æˆ·</h2><h4 id="10-1-å¼€å¯NetworkManageræœåŠ¡"><a href="#10-1-å¼€å¯NetworkManageræœåŠ¡" class="headerlink" title="10.1 å¼€å¯NetworkManageræœåŠ¡"></a>10.1 å¼€å¯NetworkManageræœåŠ¡</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">systemctl <span class="hljs-keyword">enable</span> <span class="hljs-comment">--now NetworkManager</span><br></code></pre></td></tr></table></figure><h4 id="10-2-ä½¿ç”¨NetworkManageré™„å¸¦nmcliè¿æ¥ç½‘ç»œ"><a href="#10-2-ä½¿ç”¨NetworkManageré™„å¸¦nmcliè¿æ¥ç½‘ç»œ" class="headerlink" title="10.2 ä½¿ç”¨NetworkManageré™„å¸¦nmcliè¿æ¥ç½‘ç»œ"></a>10.2 ä½¿ç”¨NetworkManageré™„å¸¦nmcliè¿æ¥ç½‘ç»œ</h4><ul><li>æ˜¾ç¤ºé™„è¿‘çš„Wi-Fiç½‘ç»œ</li><li>nmcli device wifi list</li><li>è¿æ¥åˆ°Wi-Fiç½‘ç»œ</li><li>nmcli device wifi connect SSID_æˆ–_BSSID password å¯†ç </li><li>è¿æ¥åˆ°éšè—çš„Wi-Fiç½‘ç»œ</li><li>nmcli device wifi connect SSID_æˆ–_BSSID password å¯†ç  hidden yes</li><li>è¿æ¥åˆ°wlan1ç½‘ç»œæ¥å£ä¸Šçš„ Wi-Fi</li><li>nmcli device wifi connect SSID_æˆ–_BSSID </li><li>password å¯†ç  ifname wlan1 profile_name</li><li>æ–­å¼€ç½‘ç»œæ¥å£ä¸Šçš„è¿æ¥ï¼š</li><li>nmcli device disconnect ifname eth0</li><li>æ˜¾ç¤ºè¿æ¥åˆ—è¡¨åŠå…¶åç§°ã€UUIDã€ç±»å‹å’Œæ”¯æŒè®¾å¤‡</li><li>nmcli connection show</li><li>æ¿€æ´»è¿æ¥ï¼ˆå³ä½¿ç”¨ç°æœ‰é…ç½®æ–‡ä»¶è¿æ¥åˆ°ç½‘ç»œï¼‰</li><li>nmcli connection up name_æˆ–_uuid</li><li>åˆ é™¤è¿æ¥</li><li>nmcli connection delete name_æˆ–_uuid</li><li>æ˜¾ç¤ºæ‰€æœ‰ç½‘ç»œè®¾å¤‡åŠå…¶çŠ¶æ€</li><li>nmcli device</li><li>å…³é—­ Wi-Fi</li><li>nmcli radio wifi off</li></ul><h4 id="10-3-åˆ›å»ºæ™®é€šç”¨æˆ·"><a href="#10-3-åˆ›å»ºæ™®é€šç”¨æˆ·" class="headerlink" title="10.3 åˆ›å»ºæ™®é€šç”¨æˆ·"></a>10.3 åˆ›å»ºæ™®é€šç”¨æˆ·</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">useradd -m -<span class="hljs-selector-tag">G</span> wheel zjh<br></code></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">passwd zjh</span><br></code></pre></td></tr></table></figure><h4 id="10-4-å°†æ–°ç”¨æˆ·åŠ å…¥sudoersä¸­"><a href="#10-4-å°†æ–°ç”¨æˆ·åŠ å…¥sudoersä¸­" class="headerlink" title="10.4 å°†æ–°ç”¨æˆ·åŠ å…¥sudoersä¸­"></a>10.4 å°†æ–°ç”¨æˆ·åŠ å…¥sudoersä¸­</h4><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim <span class="hljs-regexp">/etc/</span>sudoers <br></code></pre></td></tr></table></figure><p><strong>å–æ¶ˆ %wheel ALL&#x3D;(ALL:ALL)  ALLçš„æ³¨é‡Š</strong></p><h2 id="11-å®‰è£…æ¡Œé¢ç¯å¢ƒ"><a href="#11-å®‰è£…æ¡Œé¢ç¯å¢ƒ" class="headerlink" title="11.å®‰è£…æ¡Œé¢ç¯å¢ƒ"></a>11.å®‰è£…æ¡Œé¢ç¯å¢ƒ</h2><p><del>pacman -S plasma kde-applications sddm</del></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">pacman -S plasma-<span class="hljs-keyword">meta</span> sddm bash-completion<br></code></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">pacman -S nvidia nvidia-settings nvidia-utils</span><br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>éœ€è¦x11ç¯å¢ƒå®‰è£…<strong>xorg plasma-x11-sessionï¼ˆä¸éœ€è¦åˆ™è·³è¿‡ï¼‰</strong></p><p>ä» Plasma 6.4 å¼€å§‹ï¼ŒX11ä¼šè¯åªèƒ½é€šplasma-x11-sessionåŒ…è½¯ä»¶åŒ…å•ç‹¬æä¾›</p><ul><li>è¦ä»æ§åˆ¶å°å¯åŠ¨Plasma on Waylandä¼šè¯ï¼Œè¯·è¿è¡Œ&#x2F;usr&#x2F;lib&#x2F;plasma-dbus-run-session-if-needed &#x2F;usr&#x2F;bin&#x2F;startplasma-waylandã€‚</li><li>è‹¥è¦ä½¿ç”¨â€xinit&#x2F;startxâ€å¯åŠ¨ Plasma æ¡Œé¢ï¼Œè¯·åœ¨ .xinitrc æ–‡ä»¶ä¸­æ·»åŠ  export DESKTOP_SESSION&#x3D;plasma å’Œ exec startplasma-x11ï¼Œæˆ–è€…ç›´æ¥åœ¨æ§åˆ¶å°è¿è¡Œstartx &#x2F;usr&#x2F;bin&#x2F;startplasma-x11ï¼Œè‹¥è¦åœ¨ç™»å½•æ—¶å¼€å¯ Xorgï¼Œè§ç™»å½•æ—¶å¯åŠ¨ X</li></ul></blockquote><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-symbol">pacman</span> -S xorg plasma-<span class="hljs-built_in">x11</span>-session<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">systemctl <span class="hljs-built_in">enable</span> sddm<br></code></pre></td></tr></table></figure><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">reboot</span><br></code></pre></td></tr></table></figure><blockquote><p>[!IMPORTANT]</p><p><strong>éœ€è¦å®‰è£…ä¾èµ–</strong></p></blockquote><p><strong>è¿™ä¸ªæ˜¯appimageç¨‹åºçš„ä¾èµ–</strong></p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino">sudo pacman -S appmenu-gtk-<span class="hljs-keyword">module</span><br></code></pre></td></tr></table></figure><p><strong>è¿™ä¸ªæ˜¯qv2rayçš„ä¾èµ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S libxcrypt-compat<br></code></pre></td></tr></table></figure><p><strong>è¿™ä¸ªæ˜¯ç«ç‹firefoxçš„ä¾èµ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S dbus-glib<br><span class="hljs-built_in">sudo</span> pacman -S speech-dispatcher<br></code></pre></td></tr></table></figure><p><strong>è¿™ä¸ªæ˜¯ç½‘ç»œä¸‹è½½å·¥å…·</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S wget<br></code></pre></td></tr></table></figure><p><strong>ä¿®å¤ä½¿ç”¨windows11å­—ä½“</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S noto-fonts-cjk wqy-microhei wqy-zenhei ttf-liberation<br></code></pre></td></tr></table></figure><p><strong>sddmä¸»é¢˜ä¾èµ–Qtå›¾å½¢æ•ˆæœQMLæ¨¡å—</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S qt5-graphicaleffects qt5-quickcontrols qt5-quickcontrols2<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S qt5-svg qt5-multimedia<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S qt6-declarative qt6-multimedia<br></code></pre></td></tr></table></figure><blockquote><p>[!NOTE]</p><p>qt6-virtualkeyboard è™šæ‹Ÿé”®ç›˜ï¼ˆé»˜è®¤å·²ç»å®‰è£…ï¼‰</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S qt6-virtualkeyboard <br></code></pre></td></tr></table></figure><p><strong>hexoæ‰€éœ€çš„ä¾èµ–</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S nodejs npm<br></code></pre></td></tr></table></figure><p><strong>ç£ç›˜ç®¡ç†å·¥å…·</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S partitionmanager<br></code></pre></td></tr></table></figure><h2 id="12-æºåˆ—è¡¨-32ä½æº"><a href="#12-æºåˆ—è¡¨-32ä½æº" class="headerlink" title="12.æºåˆ—è¡¨+32ä½æº"></a>12.æºåˆ—è¡¨+32ä½æº</h2><h5 id="Mirrorlistçš„Chinaæº"><a href="#Mirrorlistçš„Chinaæº" class="headerlink" title="Mirrorlistçš„Chinaæº"></a>Mirrorlistçš„Chinaæº</h5><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">## China</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.aliyun.com<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.bfsu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.cqu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.hit.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.hust.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.jcut.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.jlu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.jxust.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.neusoft.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.nju.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rror.nyist.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.qlu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.shanghaitech.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.sjtug.sjtu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.ustc.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.wsyu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br>Server = https:<span class="hljs-regexp">//mi</span>rrors.xjtu.edu.cn<span class="hljs-regexp">/archlinux/</span><span class="hljs-variable">$repo</span><span class="hljs-regexp">/os/</span><span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><h4 id="12-1-å¼€å¯pacman-confä¸­çš„32ä½æº"><a href="#12-1-å¼€å¯pacman-confä¸­çš„32ä½æº" class="headerlink" title="12.1 å¼€å¯pacman.confä¸­çš„32ä½æº"></a>12.1 å¼€å¯pacman.confä¸­çš„32ä½æº</h4><blockquote><h5 id="å»é™¤ä»¥ä¸‹æ³¨é‡Š"><a href="#å»é™¤ä»¥ä¸‹æ³¨é‡Š" class="headerlink" title="å»é™¤ä»¥ä¸‹æ³¨é‡Š"></a>å»é™¤ä»¥ä¸‹æ³¨é‡Š</h5></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[multilib]</span><br><span class="hljs-attr">Include</span> = /etc/pacman.d/mirrorlist<br></code></pre></td></tr></table></figure><blockquote><h5 id="åŠ å…¥ä»¥ä¸‹æº"><a href="#åŠ å…¥ä»¥ä¸‹æº" class="headerlink" title="åŠ å…¥ä»¥ä¸‹æº"></a>åŠ å…¥ä»¥ä¸‹æº</h5></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[archlinuxcn]</span><br><span class="hljs-attr">Server</span> = https://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/<span class="hljs-variable">$arch</span><br></code></pre></td></tr></table></figure><h4 id="12-2-å®‰è£…archlinuxcn-keyringåŒ…å‰çš„é¢å¤–æ­¥éª¤ï¼ˆå¯è·³è¿‡ï¼Œç›®å‰2025å¹´æµ‹è¯•æ— æŠ¥é”™ï¼‰"><a href="#12-2-å®‰è£…archlinuxcn-keyringåŒ…å‰çš„é¢å¤–æ­¥éª¤ï¼ˆå¯è·³è¿‡ï¼Œç›®å‰2025å¹´æµ‹è¯•æ— æŠ¥é”™ï¼‰" class="headerlink" title="12.2 å®‰è£…archlinuxcn-keyringåŒ…å‰çš„é¢å¤–æ­¥éª¤ï¼ˆå¯è·³è¿‡ï¼Œç›®å‰2025å¹´æµ‹è¯•æ— æŠ¥é”™ï¼‰"></a>12.2 å®‰è£…archlinuxcn-keyringåŒ…å‰çš„é¢å¤–æ­¥éª¤ï¼ˆå¯è·³è¿‡ï¼Œç›®å‰2025å¹´æµ‹è¯•æ— æŠ¥é”™ï¼‰</h4><blockquote><p>åœ¨2023å¹´åï¼Œå®‰è£…archlinuxcn-keyringæ—¶å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼Œä»¥ä¸‹æç¤º</p></blockquote><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">error: </span>archlinuxcn-keyring: Signature from&quot;Jiachen YANG(Arch Linux Packager Signing Key)â€ is marginal trust<br></code></pre></td></tr></table></figure><blockquote><p>éœ€è¦åœ¨æœ¬åœ°ä¿¡ä»»farseerfcçš„GPG key</p></blockquote><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lsl">sudo pacman-<span class="hljs-type">key</span> --lsign-<span class="hljs-type">key</span> <span class="hljs-string">&quot;farseerfc@archlinux.org&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S archlinuxcn-keyring<br></code></pre></td></tr></table></figure><blockquote><p>å®‰è£…yay</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S yay<br></code></pre></td></tr></table></figure><h2 id="13-å®‰è£…æ˜¾å¡é©±åŠ¨"><a href="#13-å®‰è£…æ˜¾å¡é©±åŠ¨" class="headerlink" title="13.å®‰è£…æ˜¾å¡é©±åŠ¨"></a>13.å®‰è£…æ˜¾å¡é©±åŠ¨</h2><h4 id="13-1-intelæ ¸æ˜¾é©±åŠ¨ï¼ˆcpuä¸å¸¦Fçš„éœ€è¦å®‰è£…ï¼‰"><a href="#13-1-intelæ ¸æ˜¾é©±åŠ¨ï¼ˆcpuä¸å¸¦Fçš„éœ€è¦å®‰è£…ï¼‰" class="headerlink" title="13.1 intelæ ¸æ˜¾é©±åŠ¨ï¼ˆcpuä¸å¸¦Fçš„éœ€è¦å®‰è£…ï¼‰"></a>13.1 intelæ ¸æ˜¾é©±åŠ¨ï¼ˆcpuä¸å¸¦Fçš„éœ€è¦å®‰è£…ï¼‰</h4><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">sudo pacman -S mesa lib32-mesa vulkan-<span class="hljs-built_in">int</span>el lib32-vulkan-<span class="hljs-built_in">int</span>el<br></code></pre></td></tr></table></figure><h4 id="13-2-nvidiaæ˜¾å¡é©±åŠ¨ï¼ˆåœ¨ä¸Šé¢å·²ç»å®‰è£…ä¸€éƒ¨åˆ†æ˜¾å¡é©±åŠ¨äº†ï¼‰"><a href="#13-2-nvidiaæ˜¾å¡é©±åŠ¨ï¼ˆåœ¨ä¸Šé¢å·²ç»å®‰è£…ä¸€éƒ¨åˆ†æ˜¾å¡é©±åŠ¨äº†ï¼‰" class="headerlink" title="13.2 nvidiaæ˜¾å¡é©±åŠ¨ï¼ˆåœ¨ä¸Šé¢å·²ç»å®‰è£…ä¸€éƒ¨åˆ†æ˜¾å¡é©±åŠ¨äº†ï¼‰"></a>13.2 nvidiaæ˜¾å¡é©±åŠ¨ï¼ˆåœ¨ä¸Šé¢å·²ç»å®‰è£…ä¸€éƒ¨åˆ†æ˜¾å¡é©±åŠ¨äº†ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pacman -S lib32-nvidia-util<br></code></pre></td></tr></table></figure><h4 id="13-3-æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆä¸€ï¼‰"><a href="#13-3-æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆä¸€ï¼‰" class="headerlink" title="13.3 æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆä¸€ï¼‰"></a>13.3 æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆä¸€ï¼‰</h4><h4 id="å®‰è£…optimus-managerä»¥åŠå…¶å›¾å½¢å‰ç«¯optimus-manager-qté€šè¿‡è¯¥ç¨‹åºå¯ä»¥åœ¨é›†æˆæ˜¾å¡å’Œç‹¬ç«‹æ˜¾å¡é—´è½»æ¾åˆ‡æ¢ï¼Œoptimus-manageræä¾›ä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºä»…ç”¨ç‹¬æ˜¾ã€ä»…ç”¨é›†æ˜¾ä»¥åŠhybridåŠ¨æ€åˆ‡æ¢æ¨¡å¼"><a href="#å®‰è£…optimus-managerä»¥åŠå…¶å›¾å½¢å‰ç«¯optimus-manager-qté€šè¿‡è¯¥ç¨‹åºå¯ä»¥åœ¨é›†æˆæ˜¾å¡å’Œç‹¬ç«‹æ˜¾å¡é—´è½»æ¾åˆ‡æ¢ï¼Œoptimus-manageræä¾›ä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºä»…ç”¨ç‹¬æ˜¾ã€ä»…ç”¨é›†æ˜¾ä»¥åŠhybridåŠ¨æ€åˆ‡æ¢æ¨¡å¼" class="headerlink" title="å®‰è£…optimus-managerä»¥åŠå…¶å›¾å½¢å‰ç«¯optimus-manager-qté€šè¿‡è¯¥ç¨‹åºå¯ä»¥åœ¨é›†æˆæ˜¾å¡å’Œç‹¬ç«‹æ˜¾å¡é—´è½»æ¾åˆ‡æ¢ï¼Œoptimus-manageræä¾›ä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºä»…ç”¨ç‹¬æ˜¾ã€ä»…ç”¨é›†æ˜¾ä»¥åŠhybridåŠ¨æ€åˆ‡æ¢æ¨¡å¼"></a>å®‰è£…optimus-managerä»¥åŠå…¶å›¾å½¢å‰ç«¯optimus-manager-qté€šè¿‡è¯¥ç¨‹åºå¯ä»¥åœ¨é›†æˆæ˜¾å¡å’Œç‹¬ç«‹æ˜¾å¡é—´è½»æ¾åˆ‡æ¢ï¼Œoptimus-manageræä¾›ä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºä»…ç”¨ç‹¬æ˜¾ã€ä»…ç”¨é›†æ˜¾ä»¥åŠhybridåŠ¨æ€åˆ‡æ¢æ¨¡å¼</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S optimus-manager optimus-manager-qt</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> optimus-manager.service<br></code></pre></td></tr></table></figure><h4 id="é‡å¯å³å¯ä½¿ç”¨"><a href="#é‡å¯å³å¯ä½¿ç”¨" class="headerlink" title="é‡å¯å³å¯ä½¿ç”¨"></a>é‡å¯å³å¯ä½¿ç”¨</h4><h4 id="13-4-æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆäºŒï¼‰"><a href="#13-4-æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆäºŒï¼‰" class="headerlink" title="13.4 æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆäºŒï¼‰"></a>13.4 æ˜¾å¡åŒåˆ‡æ–¹æ¡ˆï¼ˆäºŒï¼‰</h4><blockquote><p>å®‰è£…envycontrol</p></blockquote><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yay -S envycontrol</span><br></code></pre></td></tr></table></figure><blockquote><p>åŠ¨æ€æ¨¡å¼</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> envycontrol -s hybrid<br></code></pre></td></tr></table></figure><blockquote><p>nvidiaç‹¬ç«‹æ˜¾å¡æ¨¡å¼</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> envycontrol -s nvidia<br></code></pre></td></tr></table></figure><blockquote><p>integratedæ ¸æ˜¾æ¨¡å¼</p></blockquote><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">sudo envycontrol -s <span class="hljs-built_in">int</span>egrated<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Arch Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
